{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","trim","split","forEach","header","key","shift","value","join","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","map","encodeURIComponent","replace","parseData","data","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","getURL","config","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","isArray","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","emit","requester","delete","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","once","finalHandler","res","merge","isURI","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","cache","parallel","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","_queue","dispatcher","splice","resolve","push","update","fetch","handler","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","bind","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"getServersList","operation","sort","getOperation","serversList","requestNextServer","previousError","server","basePath","requestHandler","sendRequest","handleMissingServers","waitBeforeRetry","hasDiscoveryServers","updateAndRetry","delay","nextServer","start","requestReporter","isErrorResponse","reportError","report","getHttpClient","onRetry","_httpClient","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","discoveryServers","list","getUpdatedServers","latestServers","discoverServers","urls","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","refreshDiscoveryServers","outdated","serversAreUpdated","updated","handleResolution","getRefreshBasePath",14,"arr","size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"balancerOptions","Server","statsStore","createServerStats","stats","calculateAvgLatency","balance","calculateStatsBalance","read","createStats","write","getWeightAvg","number",16,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","index","concat","onUpdateInParallel","closePendingRequests","floor","_time","isEmptyBuffer","closePendingRequest","closeClient","abort",17,"RoundRobin","forceUpdate","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",18,"Function","isArrayNative","uriRegex","Date","getTime","ctx","fn","obj","ms","setTimeout","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}