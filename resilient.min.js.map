{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","Cache","this","store","Object","create","prototype","flush","key","emptyObject","get","clone","time","value","exists","isObj","isArr","data","set","now","./utils",2,"resolver","http","Client","_resilient","path","options","cb","send","post","put","del","delete","patch","head","method","args","normalizeArgs","requester","apply","emit","isFullUrlSchema","plainHttpRequest","arguments","mergeHttpOptions","noop","wrapCallback","once","finalRequestHandler","err","res","defaults","timeout","$timeout","merge","isURI","url","_httpClient","fn","called","./http","./resolver",3,"service","timeouts","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","roundRobin","roundRobinSize","weight","success","error","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","enableSelfRefresh","forceRefreshFirst","refreshServersInterval","refreshServers","refreshOptions","refreshPath","resilientOptions",4,"Servers","Requester","ResilientError","CONCURRENCY","ServersDiscovery","middleware","_middleware","getOptions","getServers","hasDiscoveryServers","updateServersInParallel","buf","sort","pending","counter","onServersUpdateFn","onUpdateServers","onUpdateInParallelFn","onUpdateInParallel","slice","forEach","server","index","pool","concat","updateServers","next","fetchServers","params","addTimeStamp","run","handler","total","decrement","reset","extend","qs","_time","closeAndEmptyPendingRequests","isEmptyBuffer","closePendingRequest","splice","client","xhr","readyState","closeClient","abort","filter","request","./error","./requester","./servers",5,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,1007,"status","stack","message",6,"IS_BROWSER","JSON_MIME","resolveModule","HttpClient","VERSION","mapResponse","body","statusCode","isJSONContent","JSON","parse","test","headers","mapOptions","mapRequestBody","defineUserAgent","getUserAgent","LIBRARY_VERSION","json","requestWrapper","lil-http",7,"Options","Resilient","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",8,"midware","hooks","Middleware","createPool","use","middlewares","toArr","isFn","map","passArgs","register","type","hook","hooksMiddleware","in","out","mw","opts",9,"omit","getRaw","setServers","each","bind","undefined","defaultOptions","keys",10,"operation","getOperation","serversList","getServersList","requestNextServer","previousError","shift","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","getPreviousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","onRetry","retrier","waitBeforeRetry","updateDiscoveryServersAndRetry","delay","resolve","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","push","mapAndResolve","resolution","join","basePath","getTimeout","toLowerCase","arr","v","_sync","unlock","DiscoveryResolver","update","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","indexOf","m","toUpperCase","trim","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",11,"EventBus","Sync","cache","_client","_options","list","serversURL","urls","discoveryServers","resetScore","resetStats","latestServers","getUpdatedServers","discoverServers","discoveryOptions","serviceOptions","httpOptions","useHttpClient","restoreHttpClient","serversUpdated","updated","lastUpdate","refresh","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./middleware","./resolvers/discovery","./sync","lil-event",12,"Resolver","sync","wrapHandler","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServiceServers","updateServiceServers","getRefreshServers","getRefreshOptions","locked","enqueue","onRefreshServers","lock","dequeue","mErr","refreshDiscoveryServers","outdated","canUpdateDiscoveryServers","serversAreUpdated","interval","handleResolution","_cache","getRefreshBasePath","./discovery",13,"ServiceResolve","unlockAndDispatchQueue","fetch","dispatcher","../discovery","../error","../requester","./service",14,"isCacheEnabled","getCache","name","saveServers","refreshCache","errorHandler","resolveFromCache","resolveWithError","hasValidCache","expires","handleResponse","done","isValidResponse","defineServers","valid","parseAsJSON","../utils",15,"roundRobinSerie","size","getRandom","ps","k","j","rs","pop","max","Math","round","random",16,"balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","field","statsStore","createServerStats","read","createStats","write","getWeightAvg","number",17,"RoundRobin","mapServers","empty","x","y","roundRobinSort","find","isValidURI","uri","mapServer","./roundrobin","./server",18,"locks","queues","state","getSync","task","queue",19,"toStr","toString","Array","hasOwn","hasOwnProperty","Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","obj","ms","setTimeout","str","base","notEmpty","objIterator","extender","merger","target","iterator","eachArgument",20,21,"root","factory","Event","lil","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents",22,"slicer","hasBind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","auth","withCredentials","responseType","assign","cur","setHeaders","defaultContent","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","split","header","isJSONResponse","getResponseHeader","encodeParams","getOwnPropertyNames","encodeURIComponent","replace","parseData","responseText","response","getStatus","buildResponse","statusText","buildErrorResponse","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","onLoad","config","ev","isCrossOrigin","match","getURL","XHRFactory","XMLHttpRequest","createClient","open","user","password","updateProgress","lengthComputable","loaded","hasContentTypeHeader","buildPayload","stringify","timeoutResolver","timeoutId","clearTimeout","progress","onprogress","requestFactory",23,"calls","exec","end"],"mappings":"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"}