{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","map","getAllResponseHeaders","split","forEach","header","trim","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","value","encodeURIComponent","join","replace","parseData","data","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","getURL","config","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","isArray","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","key","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","emit","requester","delete","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","once","finalHandler","res","getOptions","merge","isURI","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","cache","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","parallel","cacheExpiration","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","_queue","dispatcher","splice","resolve","push","update","fetch","handler","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","bind","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"getServersList","operation","sort","getOperation","serversList","nextServer","previousError","server","shift","basePath","requestHandler","sendRequest","handleMissingServers","delayRetry","hasDiscoveryServers","updateAndRetry","delay","start","requestReport","isErrorResponse","reportError","report","getHttpClient","onRetry","_httpClient","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_options","_client","setOptions","setDiscoveryOptions","setServiceOptions","getHttpOptions","discoveryServers","list","discoverServers","getUpdatedServers","getLatestServers","urls","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","VERBS","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServers","onRefreshServers","outdate","serversAreUpdated","updated","handleResolution",14,"arr","size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"Server","setStats","stats","getStats","calculateAvgLatency","getBalance","applyOptions","calculateStatsBalance","read","createStats","write","getWeightAvg","number",16,"getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","index","concat","onUpdateInParallel","closePendingRequests","floor","_time","isEmptyBuffer","closePendingRequest","closeClient","abort",17,"RoundRobin","force","y","roundRobinSort","find","mapServers","empty","forceUpdate","isValidURI","uri","mapServer","./roundrobin","./server",18,"Function","isArrayNative","uriRegex","Date","getTime","ctx","fn","obj","ms","setTimeout","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":";CACC,SAASA,GAAG,GAAG,gBAAiBC,UAAS,mBAAoBC,QAAOA,OAAOD,QAAQD,QAAS,IAAG,kBAAmBG,SAAQA,OAAOC,IAAID,UAAUH,OAAO,CAAC,GAAIK,EAAE,oBAAoBC,QAAOD,EAAEC,OAAO,mBAAoBC,QAAOF,EAAEE,OAAO,mBAAoBC,QAAOH,EAAEG,MAAMH,EAAEI,UAAUT,MAAM,WAAW,GAAIG,GAAOD,EAAOD,CAAQ,OAAO,SAAUD,GAAEU,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,SAASC,UAAS,YAAYA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAG,EAAG,IAAGI,EAAE,MAAOA,GAAEJ,GAAG,EAAG,IAAIT,GAAE,GAAIc,OAAM,uBAAuBL,EAAE,IAAK,MAAMT,GAAEe,KAAK,mBAAmBf,EAAE,GAAIgB,GAAEV,EAAEG,IAAIb,WAAYS,GAAEI,GAAG,GAAGQ,KAAKD,EAAEpB,QAAQ,SAASD,GAAG,GAAIW,GAAED,EAAEI,GAAG,GAAGd,EAAG,OAAOa,GAAEF,EAAEA,EAAEX,IAAIqB,EAAEA,EAAEpB,QAAQD,EAAEU,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGb,QAAQ,GAAIiB,SAASD,UAAS,YAAYA,OAAQ,KAAI,GAAIH,GAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKW,GAAG,SAASP,EAAQf,EAAOD,IAE7xB,SAAUwB,EAAMC,GACf,SAAWvB,KAAW,YAAcA,EAAOC,IAAK,CAC9CD,GAAQ,WAAYuB,OACf,UAAWzB,KAAY,SAAU,CACtCyB,EAAQzB,EACR,UAAWC,KAAW,UAAYA,IAAW,KAAM,CACjDA,EAAOD,QAAUA,EAAUA,EAAQ0B,UAEhC,CACLD,EAASD,EAAKG,IAAMH,EAAKG,YAE3BC,KAAM,SAAU5B,GAChB,YACA,IAAI6B,GAAU,OACd,IAAIC,GAAQC,OAAOC,UAAUC,QAC7B,IAAIC,GAASC,MAAMH,UAAUI,KAC7B,IAAIC,GAASN,OAAOC,UAAUM,cAC9B,IAAIC,GAASC,SAASD,MACtB,IAAIE,GAAc,uCAClB,IAAIC,GAAgB,mBACpB,IAAIC,SAA0BC,kBAAmB,WACjD,IAAIC,GAAO,YAEX,IAAIC,IACFC,OAAQ,MACRC,QAAS,GAAK,IACdC,KAAM,KACNC,QAAS,KACTC,MAAO,KACPC,gBAAiB,MACjBC,aAAc,OAGhB,SAASC,GAAMzC,GACb,MAAOA,IAAKiB,EAAMT,KAAKR,KAAO,mBAAqB,MAGrD,QAAS0C,GAAOC,GACd,GAAIvC,GAAGG,EAAGqC,EAAGC,EAAKC,EAAOzB,EAAOb,KAAKuC,WAAWxB,MAAM,EACtD,KAAKnB,EAAI,EAAGG,EAAIuC,EAAKrC,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC1CyC,EAAMC,EAAK1C,EACX,KAAKwC,IAAKC,GAAK,GAAIrB,EAAOhB,KAAKqC,EAAKD,GAAID,EAAOC,GAAKC,EAAID,GAE1D,MAAOD,GAGT,QAASK,GAAWC,EAAKZ,GACvB,GAAII,EAAMJ,GAAU,CAClBA,EAAQ,gBAAkBA,EAAQ,iBAAmBxB,EAAKqC,cAC1D,KAAK,GAAIC,KAASd,GAAS,CACzBY,EAAIG,iBAAiBD,EAAOd,EAAQc,MAK1C,QAASE,GAAWJ,GAClB,GAAIK,MAAUjB,EAAUY,EAAIM,wBAAwBC,MAAM,KAC1DnB,GAAQoB,QAAQ,SAAUC,GACxB,GAAIA,EAAQ,CACVA,EAASA,EAAOF,MAAM,IACtBF,GAAII,EAAO,GAAGC,SAAWD,EAAO,IAAM,IAAIC,SAG9C,OAAOL,GAGT,QAASM,GAAeX,GACtB,MAAOpB,GAAcgC,KAAKZ,EAAIa,kBAAkB,iBAGlD,QAASC,GAAaC,GACpB,MAAO9C,QAAO+C,oBAAoBD,GAAQE,OAAO,SAAUC,GACzD,MAAOH,GAAOG,KAAUC,YACvBd,IAAI,SAAUa,GACf,GAAIE,GAASL,EAAOG,KAAU,KAAQ,GAAKH,EAAOG,EAClD,OAAOG,oBAAmBH,IAASE,EAAQ,IAAMC,mBAAmBD,GAAS,MAC5EE,KAAK,KAAKC,QAAQ,OAAQ,KAG/B,QAASC,GAAUxB,GACjB,GAAIyB,EACJ,IAAIzB,EAAIT,eAAiB,OAAQ,CAC/BkC,EAAOzB,EAAI0B,YACX,IAAIf,EAAeX,IAAQyB,EAAMA,EAAOE,KAAKC,MAAMH,OAC9C,CACLA,EAAOzB,EAAI6B,SAEb,MAAOJ,GAGT,QAASK,GAAc9B,GACrB,OACEA,IAAKA,EACL+B,OAAQ/B,EAAI+B,OACZN,KAAMD,EAAUxB,GAChBZ,QAASgB,EAAWJ,IAIxB,QAASgC,GAAmBhC,EAAKiC,GAC/B,GAAIJ,GAAW,GAAIzE,OAAM6E,EAAMC,QAC/BzC,GAAOoC,EAAUC,EAAc9B,GAC/B6B,GAASI,MAAQA,CACjBJ,GAASM,MAAQF,EAAME,KACvB,OAAON,GAGT,QAASO,GAAQpC,EAAKqC,GACpB,GAAIC,GAAS,KACb,OAAO,UAAUC,GACf,IAAKD,EAAQ,CACXD,EAAGL,EAAmBhC,EAAKuC,GAAM,KACjCD,GAAS,OAKf,QAASE,GAAOxC,EAAKqC,GACnB,MAAO,YACL,GAAIrC,EAAIyC,aAAe,EAAG,CACxB,GAAIzC,EAAI+B,QAAU,KAAO/B,EAAI+B,OAAS,IAAK,CACzCM,EAAG,KAAMP,EAAc9B,QAClB,CACLqC,EAAGP,EAAc9B,GAAM,SAM/B,QAAS0C,GAAcC,GACrB,GAAIC,GAAQD,EAAIC,MAAMjE,EACtB,OAAOiE,IAASA,EAAM,KAAOnE,EAG/B,QAASoE,GAAOC,GACd,GAAIH,GAAMG,EAAOH,GACjB,IAAInD,EAAMsD,EAAO/B,QAAS,CACxB4B,IAAQA,EAAII,QAAQ,QAAU,EAAI,IAAM,KAAOjC,EAAagC,EAAO/B,QAErE,MAAO4B,GAGT,QAASK,GAAWL,GAClB,GAAI9D,GAAoB6D,EAAcC,GAAM,CAC1C,MAAO,IAAI7D,oBACN,CACL,MAAO,IAAImE,iBAIf,QAASC,GAAaJ,GACpB,GAAI7D,IAAU6D,EAAO7D,QAAU,OAAOkE,aACtC,IAAIhE,GAAO2D,EAAO3D,QAClB,IAAIwD,GAAME,EAAOC,EAEjB,IAAI9C,GAAMgD,EAAWL,EACrB3C,GAAIoD,KAAKnE,EAAQ0D,EAAKG,EAAOzD,MAAOF,EAAKkE,KAAMlE,EAAKmE,SACpDtD,GAAIV,gBAAkBwD,EAAOxD,eAC7BU,GAAIT,aAAeuD,EAAOvD,YAC1BS,GAAId,QAAU4D,EAAO5D,OACrBa,GAAWC,EAAK8C,EAAO1D,QACvB,OAAOY,GAGT,QAASuD,GAAevD,EAAKqC,GAC3B,MAAO,UAAUmB,GACf,GAAIC,IAAIC,iBAAkB,CACxBrB,EAAGmB,EAAIC,IAAIE,OAASF,IAAIG,WACnB,CACLvB,EAAGmB,KAKT,QAASK,GAAQf,EAAQT,EAAIyB,GAC3B,GAAI9D,GAAMkD,EAAaJ,EACvB,IAAIrB,GAAOjC,EAAMsD,EAAOrB,OAASpD,MAAM0F,QAAQjB,EAAOrB,MAAQE,KAAKqC,UAAUlB,EAAOrB,MAAQqB,EAAOrB,IACnG,IAAIwC,GAAe7B,EAAQpC,EAAKqC,EAEhCrC,GAAIkE,OAAS1B,EAAOxC,EAAKqC,EACzBrC,GAAImE,QAAUF,CACdjE,GAAIoE,UAAYH,CAChBjE,GAAIqE,QAAUJ,CACd,UAAWH,KAAa,WAAY9D,EAAIsE,WAAaf,EAAevD,EAAK8D,EAEzE,KACE9D,EAAIuE,KAAK9C,GACT,MAAOxF,GACPgI,EAAahI,GAGf,OAAS+D,IAAKA,EAAK8C,OAAQA,GAG7B,QAAS0B,GAAevF,GACtB,MAAO,UAAU0D,EAAK8B,EAASpC,EAAIyB,GACjC,GAAI3G,GAAGG,EAAGsC,EAAM,IAChB,IAAIkD,GAASrD,KAAWT,GAAYC,OAAQA,GAC5C,IAAIY,GAAOzB,EAAOb,KAAKuC,UAEvB,KAAK3C,EAAI,EAAGG,EAAIuC,EAAKrC,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC1CyC,EAAMC,EAAK1C,EACX,UAAWyC,KAAQ,WAAY,CAC7ByC,EAAKzC,CACL,IAAIyC,IAAOzC,EAAKkE,EAAWlE,MACtB,IAAIJ,EAAMI,GAAM,CACrBH,EAAOqD,EAAQlD,OACV,UAAWA,KAAQ,WAAakD,EAAOH,IAAK,CACjDG,EAAOH,IAAM/C,GAIjB,MAAOiE,GAAQf,EAAQT,GAAMtD,EAAM+E,IAIvC,QAASlG,GAAKkF,EAAQrB,EAAMY,EAAIyB,GAC9B,MAAOU,GAAe,OAAOE,MAAM,KAAM5E,WAG3ClC,EAAKG,QAAUA,CACfH,GAAKoB,SAAWA,CAChBpB,GAAKqC,eAAiB,YACtBrC,GAAK+G,IAAMH,EAAe,MAC1B5G,GAAKgH,KAAOJ,EAAe,OAC3B5G,GAAKiH,IAAML,EAAe,MAC1B5G,GAAKkH,IAAMN,EAAe,SAC1B5G,GAAKmH,MAAQP,EAAe,QAC5B5G,GAAKoH,KAAOR,EAAe,OAE3B,OAAOtI,GAAQ0B,KAAOA,SAGlBqH,GAAG,SAAS/H,EAAQf,EAAOD,GACjC,GAAIgJ,GAAIhI,EAAQ,UAEhBf,GAAOD,QAAUiJ,CAEjB,SAASA,KACPrH,KAAKsH,SAGPD,EAAMjH,UAAUmH,MAAQ,SAAUC,GAChC,GAAIA,EAAK,CACPxH,KAAKsH,MAAME,GAAO,SACb,CACLxH,KAAKsH,UAITD,GAAMjH,UAAUyG,IAAM,SAAUW,GAC9B,MAAOA,GAAMxH,KAAKsH,MAAME,GAAOJ,EAAEK,MAAMzH,KAAKsH,OAG9CD,GAAMjH,UAAUsH,KAAO,SAAUF,GAC/B,GAAIA,GAAOxH,KAAKsH,MAAME,GAAM,CAC1B,MAAOxH,MAAKsH,MAAME,GAAKE,MAI3BL,GAAMjH,UAAUuH,OAAS,SAAUH,GACjC,GAAIlE,GAAQtD,KAAKsH,MAAME,EACvB,OAAOJ,GAAE1F,MAAM4B,KACR8D,EAAEQ,MAAMtE,EAAMK,OAASL,EAAMK,KAAKjE,OAAS,GAC7C0H,EAAE1F,MAAM4B,EAAMK,QACd,MAGP0D,GAAMjH,UAAUyH,IAAM,SAAUL,EAAK7D,GACnC,GAAI6D,GAAO7D,EAAM,CACf3D,KAAKsH,MAAME,IAAS7D,KAAMA,EAAM+D,KAAMN,EAAEU,WAIzCC,UAAU,KAAKC,GAAG,SAAS5I,EAAQf,EAAOD,GAC7C,GAAIgJ,GAAIhI,EAAQ,UAChB,IAAI6I,GAAW7I,EAAQ,aACvB,IAAIU,GAAOV,EAAQ,SAEnBf,GAAOD,QAAU8J,CAEjB,SAASA,GAAOtJ,GACdoB,KAAKmI,WAAavJ,EAGpBsJ,EAAO9H,UAAUqG,KAAO,SAAU2B,EAAMzB,EAASpC,EAAIpD,GACnD,GAAIY,GAAOsG,EAAc5I,KAAKO,KAAMoI,EAAMzB,EAASpC,EAAIpD,EACvDnB,MAAKmI,WAAWG,KAAK,gBAAiBvG,EAAK,GAAI/B,KAAKmI,WACpDI,GAAU3B,MAAM5G,KAAM+B,GAGxBmG,GAAO9H,UAAUyG,IAAM,SAAUuB,EAAMzB,EAASpC,GAC9C,MAAOvE,MAAKyG,KAAK2B,EAAMzB,EAASpC,EAAI,OAGtC2D,GAAO9H,UAAU0G,KAAO,SAAUsB,EAAMzB,EAASpC,GAC/C,MAAOvE,MAAKyG,KAAK2B,EAAMzB,EAASpC,EAAI,QAGtC2D,GAAO9H,UAAU2G,IAAM,SAAUqB,EAAMzB,EAASpC,GAC9C,MAAOvE,MAAKyG,KAAK2B,EAAMzB,EAASpC,EAAI,OAGtC2D,GAAO9H,UAAU4G,IAAMkB,EAAO9H,UAAUoI,OAAS,SAAUJ,EAAMzB,EAASpC,GACxE,MAAOvE,MAAKyG,KAAK2B,EAAMzB,EAASpC,EAAI,UAGtC2D,GAAO9H,UAAU6G,MAAQ,SAAUmB,EAAMzB,EAASpC,GAChD,MAAOvE,MAAKyG,KAAK2B,EAAMzB,EAASpC,EAAI,SAGtC2D,GAAO9H,UAAU8G,KAAO,SAAUkB,EAAMzB,EAASpC,GAC/C,MAAOvE,MAAKyG,KAAK2B,EAAMzB,EAASpC,EAAI,QAGtC,SAASgE,GAAU5B,EAASpC,GAC1B,MAAOkE,GAAgB9B,GACnB+B,EAAiB/B,EAASpC,GAC1B0D,EAASjI,KAAKmI,WAAYxB,EAASpC,GAGzC,QAAS8D,GAAcD,EAAMzB,EAASpC,EAAIpD,GACxC,SAAWwF,KAAY,WAAY,CACjCpC,EAAKoC,CACLA,GAAU3E,UAAU,GAEtB2E,EAAUgC,EAAiB3I,KAAKmI,WAAYxB,EAC5C,UAAWyB,KAAS,SAAUzB,EAAQyB,KAAOA,CAC7C,UAAWjH,KAAW,SAAUwF,EAAQxF,OAASA,CACjD,UAAWoD,KAAO,WAAYA,EAAK6C,EAAEnG,IACrC,QAAS0F,EAASiC,EAAa5I,KAAKmI,WAAY5D,IAGlD,QAASqE,GAAahK,EAAW2F,GAC/B,MAAO6C,GAAEyB,KAAK,QAASC,GAAarE,EAAKsE,GACvCnK,EAAU0J,KAAK,iBAAkB7D,EAAKsE,EAAKnK,EAC3C2F,GAAGE,EAAKsE,KAIZ,QAASJ,GAAiB/J,EAAW+H,GACnC,GAAIzF,GAAWtC,EAAUoK,WAAW,WAAWnC,KAC/C,OAAOO,GAAE6B,MAAM/H,EAAUyF,GAG3B,QAAS8B,GAAgB9B,GACvB,MAAOA,KAAYS,EAAE8B,MAAMvC,EAAQyB,OAAShB,EAAE8B,MAAMvC,EAAQ9B,OAAS,MAGvE,QAAS6D,GAAiB/B,EAASpC,GACjC,GAAIoC,EAAQyB,KAAMzB,EAAQ9B,IAAM8B,EAAQyB,IACxC,OAAOtI,GAAKL,KAAK,KAAMkH,EAASpC,MAG/B4E,SAAS,EAAEC,aAAa,GAAGrB,UAAU,KAAKsB,GAAG,SAASjK,EAAQf,EAAOD,GACxE,GAAI8C,GAAW7C,EAAOD,UAEtB8C,GAASoI,SACPnI,OAAQ,MACRC,QAAS,GAAK,IACdmI,QAAS,KACTC,MAAO,EACPC,UAAW,IACXC,oBAAqB,KACrBC,kBAAmB,MAGrBzI,GAAS0I,UACPC,OAAQ,KACRC,WAAY,KACZC,eAAgB,EAChBC,QACEC,QAAS,GACT9F,MAAO,GACP+F,QAAS,IAIbhJ,GAASiJ,WACPZ,QAAS,KACTpI,OAAQ,MACRiJ,MAAO,KACPZ,MAAO,EACPC,UAAW,IACXrI,QAAS,EAAI,IACbiJ,gBAAiB,GAAK,IACtBC,qBAAsB,KACtBC,uBAAwB,GAAK,EAAI,IACjCC,eAAgB,KAChBC,eAAgB,KAChBC,SAAU,KACVC,gBAAiB,GAAK,GAAK,IAC3BhB,kBAAmB,KACnBD,oBAAqB,MAGvBxI,GAAS0J,kBACP,UACA,QACA,YACA,WACA,kBACA,QACA,kBACA,iBACA,iBACA,uBACA,yBACA,4BAGIC,GAAG,SAASzL,EAAQf,EAAOD,GACjC,GAAIgJ,GAAIhI,EAAQ,UAChB,IAAI0L,GAAiB1L,EAAQ,UAC7B,IAAI2L,GAAU3L,EAAQ,YACtB,IAAI4L,GAAY5L,EAAQ,cACxB,IAAI6L,GAAmB7L,EAAQ,sBAC/B,IAAI8L,GAAmB9L,EAAQ,sBAE/Bf,GAAOD,QAAU+M,CAEjB,SAASA,GAAkBvM,EAAW+H,EAAS4C,GAC7C,QAAStB,GAAS1D,GAChB,MAAO,SAAS6G,GAAO3G,EAAKsE,GAC1BsC,EAAc5G,EAAKsE,EACnBxE,GAAGE,EAAKsE,IAIZ,QAASuC,GAAc/G,GACrB3F,EAAU2M,UAAY,IACtBL,GAAiBtM,EAAW+H,EAAS4C,GAAStB,EAAS1D,IAGzD,QAAS8G,GAAc5G,EAAKsE,GAC1BnK,EAAU2M,UAAY,KACtB3M,GAAU4M,OAAO9I,QAAQ+I,EAAWhH,EAAKsE,GACzCnK,GAAU4M,OAAOE,OAAO,GAG1B,QAASD,GAAWhH,EAAKsE,GACvB,MAAO,UAAUxE,GACf,IAAMA,EAAGE,EAAKsE,GAAO,MAAO5K,MAIhC,MAAO,SAASwN,GAAQpH,GACtB,GAAI3F,EAAU2M,UAAW,CACvB3M,EAAU4M,OAAOI,KAAKrH,OACjB,CACL+G,EAAc/G,KAKpByG,EAAUG,kBAAoBA,CAE9BA,GAAkBU,OAAS,SAAUjN,EAAW+H,EAASpC,GACvD4G,EAAkBvM,EAAW+H,GAC1BsE,EAAiBrM,GACf2F,IAGP4G,GAAkBW,MAAQ,SAAUlN,EAAW+H,EAASpC,GACtD4G,EAAkBvM,EAAW+H,GAAS,QAASoF,GAAQtH,EAAKsE,GAC1D,GAAItE,EAAKF,EAAGE,OACP,IAAIsE,GAAOA,EAAIpF,KAAMY,EAAG,KAAMwE,EAAIpF,UAClCY,GAAG,GAAIuG,GAAe,KAAM/B,SAIlCiD,sBAAsB,EAAEC,UAAU,EAAEC,cAAc,GAAGC,YAAY,GAAGC,sBAAsB,GAAGrE,UAAU,KAAKsE,GAAG,SAASjN,EAAQf,EAAOD,GAC1I,GAAIgJ,GAAIhI,EAAQ,UAChB,IAAI0L,GAAiB1L,EAAQ,UAE7Bf,GAAOD,QAAU6M,CAEjB,SAASA,GAAiBrM,GACxB,QAAS0N,GAAYvD,EAAKxE,GACxB,GAAIZ,GAAOoF,EAAIpF,IACf2E,GAAK,UAAW3E,EAChB/E,GAAU2N,WAAW5I,EACrB6I,GAAa7I,EACbY,GAAG,KAAMwE,GAGX,QAAS0D,GAAahI,EAAKF,GACzB,GAAImI,IAAkB,CACpBC,EAAiBlI,EAAKF,OACjB,CACLqI,EAAiBnI,EAAKF,IAI1B,QAASoI,GAAiBlI,EAAKF,GAC7B,GAAI6F,GAAQyC,GACZ,IAAIC,EAAc1C,GAAQ,CACxB7F,EAAG,MAAQN,OAAQ,IAAK8I,OAAQ,KAAMpJ,KAAMyG,EAAMzG,WAC7C,CACLiJ,EAAiBnI,EAAKF,IAI1B,QAASuI,GAAc1C,GACrB,GAAI4C,GAAQ,MAAOC,EAAUrO,EAAUoK,WAAW,aAAanC,IAAI,kBACnE,OAAOuD,IAAShD,EAAEQ,MAAMwC,EAAMzG,OAAUyD,EAAEU,MAAQsC,EAAM1C,KAAQuF,GAAW,MAG7E,QAAST,GAAa7I,GACpB,GAAI+I,IAAkB,CACpBpE,EAAK,QAAS3E,EACd/E,GAAUmO,OAAOlF,IAAI,UAAWlE,IAIpC,QAAS+I,KACP,MAAO9N,GAAUoK,WAAW,aAAanC,IAAI,SAG/C,QAASgG,KACP,MAAOjO,GAAUmO,OAAOlG,IAAI,WAG9B,QAASyB,GAAKlF,EAAMO,GAClB/E,EAAU0J,KAAK,aAAelF,EAAMO,EAAM/E,GAG5C,MAAO,SAASsO,GAAc3I,GAC5B,MAAO,SAASwH,GAAQtH,EAAKsE,GAC3B,GAAItE,EAAK,CACPgI,EAAahI,EAAKF,OACb,IAAI4I,EAAgBpE,GAAM,CAC/BuD,EAAYvD,EAAKxE,OACZ,CACLA,EAAG,GAAIuG,GAAe,KAAM/B,OAMpC,QAAS6D,GAAiBnI,EAAKF,GAC7BE,EAAMA,IAASR,OAAQ,IACvB,OAAOM,GAAG,GAAIuG,GAAerG,EAAIR,OAAQQ,IAG3C,QAAS0I,GAAgBpE,GACvB,GAAIiE,GAAQ,KACZ,IAAIjE,EAAK,CACP,GAAI3B,EAAEQ,MAAMmB,EAAIpF,OAASoF,EAAIpF,KAAKjE,OAAQ,CACxCsN,EAAQ,SACH,UAAWjE,GAAIpF,OAAS,SAAU,CACvC,IACEoF,EAAIpF,KAAOE,KAAKC,MAAMiF,EAAIpF,KAC1BqJ,GAAQ,KACR,MAAO7O,MAGb,MAAO6O,MAGNf,UAAU,EAAElE,UAAU,KAAKqF,GAAG,SAAShO,EAAQf,EAAOD,GACzDC,EAAOD,QAAU0M,CAEjB,IAAIuC,IACFC,IAAM,4CACNC,KAAM,kEACNC,KAAM,uDACNC,KAAM,uCACNC,KAAM,gDACNC,KAAM,uCACNC,KAAM,4BAGR,SAAS9C,GAAe7G,EAAQE,GAC9B,GAAIA,YAAiB7E,OAAO,CAC1BA,MAAMG,KAAKO,KACXA,MAAKmE,MAAQA,CACb,IAAIA,EAAM5E,KAAMS,KAAKT,KAAO4E,EAAM5E,IAClC,IAAI4E,EAAME,MAAOrE,KAAKqE,MAAQF,EAAME,UAC/B,IAAIF,EAAO,CAChBnE,KAAK+F,QAAU5B,EAEjBnE,KAAKiE,OAASA,GAAU,GACxBjE,MAAKoE,QAAUiJ,EAASrN,KAAKiE,QAG/B6G,EAAe1K,UAAYD,OAAO0N,OAAOvO,MAAMc,UAE/C0K,GAAeuC,SAAWA,OAEpBS,GAAG,SAAS1O,EAAQf,EAAOD,GACjC,GAAIgJ,GAAIhI,EAAQ,UAChB,IAAIU,GAAOiO,GACX,IAAIC,GAAY,mBAEhB3P,GAAOD,QAAU6P,CAEjB,SAASA,KACP,MAAOnO,GAAK8G,MAAM,KAAM5E,WAG1BiM,EAAOhO,QAAUH,EAAKG,OACtBgO,GAAOC,YAAcA,CAErB,SAASH,KACP,SAAWtP,UAAW,UAAYA,OAAQ,CACxC,MAAOW,GAAQ,yCACV,CACL,MAAO+O,GAAe/O,EAAQ,aAIlC,QAAS+O,GAAepI,GACtB,MAAO,SAASwC,GAAU5B,EAASpC,GACjC,MAAOwB,GAAQqI,EAAWzH,GAAUuH,EAAY3J,KAIpD,QAAS2J,GAAY3J,GACnB,MAAO,UAAUE,EAAKsE,EAAKsF,GACzB,GAAItF,EAAK,CACP,GAAIA,EAAIuF,WAAYvF,EAAI9E,OAAS8E,EAAIuF,UACrC,IAAID,EAAMtF,EAAIpF,KAAO4K,EAAcxF,GAAOlF,KAAKC,MAAMuK,GAAQA,EAE/D9J,EAAGE,EAAKsE,IAIZ,QAASqF,GAAWzH,GAClB,SAAWA,KAAY,SAAUA,GAAY9B,IAAK8B,EAClDA,GAAU6H,EAAa7H,EACvB,IAAIA,EAAQ1D,OAAQ0D,EAAQ8H,GAAK9H,EAAQ1D,MACzC,IAAI0D,EAAQhD,KAAM+K,EAAe/H,EACjC,OAAOA,GAGT,QAAS4H,GAAcxF,GACrB,aAAcA,GAAIsF,OAAS,UAAYL,EAAUlL,KAAKiG,EAAIzH,QAAQ,iBAGpE,QAASkN,GAAa7H,GACpBA,EAAUA,KACVA,GAAQrF,QAAUqF,EAAQrF,WAC1BqF,GAAQrF,QAAQ,cAAgBqF,EAAQrF,QAAQ,eAAiBqN,GACjE,OAAOhI,GAGT,QAASgI,KACP,MAAO,kBAAoBV,EAAOW,gBAAkB,UAGtD,QAASF,GAAe/H,GACtB,GAAI0H,GAAO1H,EAAQhD,IACnB,IAAI0K,GAAQjH,EAAE1F,MAAM2M,IAASjH,EAAEQ,MAAMyG,GAAO,CAC1C1H,EAAQkI,KAAO,IACflI,GAAQhD,KAAO,KAEjBgD,EAAQ0H,KAAOA,KAGdS,oCAAoC,EAAE/G,UAAU,GAAGhC,QAAU,KAAKgJ,GAAG,SAAS3P,EAAQf,EAAOD,GAChG,GAAI4Q,GAAY5P,EAAQ,cACxB,IAAI6P,GAAU7P,EAAQ,YACtB,IAAI8B,GAAW9B,EAAQ,aACvB,IAAI2L,GAAU3L,EAAQ,YACtB,IAAI8I,GAAS9I,EAAQ,WACrB,IAAIU,GAAOV,EAAQ,SAEnBf,GAAOD,QAAU8Q,CAEjB,SAASA,GAAiBvI,GACxB,MAAO,IAAIqI,GAAUrI,GAGvBuI,EAAiBjP,QAAU,OAC3BiP,GAAiBC,eAAiBrP,EAAKG,OACvCiP,GAAiBhO,SAAWA,CAC5BgO,GAAiBD,QAAUA,CAC3BC,GAAiBnE,QAAUA,CAC3BmE,GAAiBhH,OAASA,CAC1BgH,GAAiBnJ,QAAUjG,CAC3BA,GAAK8O,gBAAkBM,EAAiBjP,UAErCmP,WAAW,EAAEC,aAAa,EAAElG,SAAS,EAAEmG,YAAY,GAAGC,cAAc,GAAGpD,YAAY,KAAKqD,IAAI,SAASpQ,EAAQf,EAAOD,GACvH,GAAIgJ,GAAIhI,EAAQ,UAChB,IAAI8B,GAAW9B,EAAQ,aACvB,IAAI2L,GAAU3L,EAAQ,YAEtBf,GAAOD,QAAU6Q,CAEjB,SAASA,GAAQtI,EAAS8I,GACxBzP,KAAKsH,MAAQmI,EAAOrI,EAAEK,MAAMvG,EAASuO,MACrCzP,MAAK6H,IAAIlB,GAGXsI,EAAQ7O,UAAUyG,IAAM,SAAUW,GAChC,MAAOA,GAAMxH,KAAKsH,MAAME,GAAOJ,EAAEK,MAAMzH,KAAKsH,OAG9C2H,GAAQ7O,UAAUyH,IAAM,SAAUL,EAAKlE,GACrC,GAAI8D,EAAE1F,MAAM8F,GAAM,CAChBJ,EAAEsI,KAAKlI,EAAKJ,EAAEuI,KAAK3P,KAAMA,KAAK6H,UACzB,IAAIvE,IAAUD,UAAW,CAC9B,GAAImE,IAAQ,UAAW,CACrBxH,KAAKuM,WAAWjJ,OACX,CACL,GAAIkE,IAAQ,iBAAkBlE,EAAQ,GAAIyH,GAAQzH,EAClDtD,MAAKsH,MAAME,GAAOlE,IAKxB2L,GAAQ7O,UAAUN,KAAO,WACvB,MAAOsH,GAAEwI,KAAK5P,KAAKsH,MAAOpG,EAAS0J,kBAGrCqE,GAAQ7O,UAAUmJ,QAAU,SAAUA,GACpC,MAAOA,GAAUvJ,KAAKuM,WAAWhD,GAAWvJ,KAAKsH,MAAMiC,QAGzD0F,GAAQ7O,UAAUmM,WAAa,SAAUhD,GACvC,GAAIvJ,KAAKsH,MAAMiC,QAAS,CACtBvJ,KAAKsH,MAAMiC,QAAQ1B,IAAI0B,OAClB,CACLvJ,KAAKsH,MAAMiC,QAAU,GAAIwB,GAAQxB,IAIrC0F,GAAQ7O,UAAUqH,MAAQ,WACxB,MAAOwH,GAAQ3Q,OAAOuR,EAAO7P,KAAKsH,QAGpC2H,GAAQ3Q,OAAS,SAAUqI,EAASmJ,GAClC,GAAIxI,GAAQ,GAAI2H,EAChBa,GAAiB1I,EAAEK,MAAMqI,GAAkB5O,EAC3Cf,QAAO4P,KAAKD,GAAgBpN,QAAQsN,EAAerJ,EAASW,GAC5D,OAAOA,GAGT,SAAS0I,GAAerJ,EAASW,GAC/BX,EAAUS,EAAE1F,MAAMiF,GAAWA,IAC7B,OAAO,UAAU8I,GACf,GAAIA,IAAS,mBAAoB,CAC/BnI,EAAMO,IAAI4H,EAAM,GAAIR,GAAQtI,EAAQ8I,GAAOA,MAKjD,QAASI,GAAOlJ,GACd,GAAIsJ,KACJ7I,GAAEsI,KAAK/I,EAAS,SAAUa,EAAKlE,GAC7B,GAAIA,YAAiB2L,GAAS,CAC5BgB,EAAIzI,GAAOlE,EAAMuD,QAGrB,OAAOoJ,MAGNZ,aAAa,EAAElD,YAAY,GAAGpE,UAAU,KAAKmI,IAAI,SAAS9Q,EAAQf,EAAOD,GAC5E,GAAIgJ,GAAIhI,EAAQ,UAChB,IAAIU,GAAOV,EAAQ,SACnB,IAAIwL,GAAmBxL,EAAQ,cAAcwL,gBAC7C,IAAIE,GAAiB1L,EAAQ,UAC7B,IAAI6L,GAAmB7L,EAAQ,sBAE/Bf,GAAOD,QAAU4M,CAEjB,SAASA,GAAUpM,GACjB,QAASuR,GAAe5G,EAAS6G,GAC/B,GAAIxR,EAAUgL,WAAW/C,IAAI,UAAW,CACtC,MAAO0C,GAAQ8G,KAAKD,EAAWxR,EAAUgL,gBACpC,CACL,MAAOL,GAAQ1C,OAInB,QAASd,GAAQwD,EAAS5C,EAASpC,EAAI0L,GACrC,GAAIG,GAAYE,EAAa3J,EAAQxF,OACrC,IAAIoP,GAAcJ,EAAe5G,EAAS6G,EAC1CzJ,GAAUS,EAAEK,MAAMd,EAElB,SAAS6J,GAAWC,GAClB,GAAI1E,GAAS2E,EAASH,EAAYI,OAClC,IAAID,EAAQ,CACV/J,EAAQ9B,IAAMuC,EAAE5D,KAAKkN,EAAO7L,IAAK8B,EAAQiK,SAAUjK,EAAQyB,KAC3D2D,GAAU8E,EAAeH,EAAQN,EAAWzJ,EAASpC,EAAIiM,EACzDM,GAAYlS,EAAW+H,EAASoF,EAASkE,OACpC,CACLc,EAAqBxH,EAAS5C,EAAS8J,EAAelM,IAI1DiM,IAGF,QAASO,GAAqBxH,EAAS5C,EAAS8J,EAAelM,GAC7D,GAAIiF,GAAQ,IACZ,IAAI7C,EAAQ6C,MAAO,CACjBA,EAAQwH,EAAWzH,EAAS5C,EAASpC,EACrC,IAAIoC,EAAQ+C,qBAAuB9K,EAAUqS,sBAAuB,CAClEC,EAAetS,EAAW4K,OACrB,CACLA,SAEG,CACLjF,EAAG,GAAIuG,GAAe,IAAM2F,KAIhC,QAASO,GAAWzH,EAAS5C,EAASpC,GACpC,MAAO,YACL6C,EAAE+J,MAAM3H,EAAMD,EAAS5C,EAASpC,GAAKoC,EAAQ8C,YAIjD,QAASD,GAAMD,EAAS5C,EAASpC,GAC/B,MAAO,YACL,GAAIgF,EAAQ5B,SAAU,CACpBhB,EAAQ6C,OAAS,CACjB5K,GAAU0J,KAAK,gBAAiB3B,EAAS4C,EACzCxD,GAAQwD,EAAS5C,EAASpC,OACrB,CACLA,EAAG,GAAIuG,GAAe,SAK5B,MAAO/E,GAGT,QAAS8K,GAAeH,EAAQN,EAAWzJ,EAASpC,EAAIiM,GACtD,GAAIY,GAAQhK,EAAEU,KACd,OAAO,SAASuJ,GAAc5M,EAAKsE,GACjC,GAAImB,GAAU9C,EAAEU,MAAQsJ,CACxB,IAAIE,EAAgB3K,EAASlC,EAAKsE,GAAM,CACtC2H,EAAOa,YAAYnB,EAAWlG,EAC9BsG,GAAW/L,OACN,CACLiM,EAAOc,OAAOpB,EAAWlG,EACzByB,GAAQ5C,EAAKxE,KAKnB,QAASuM,GAAYlS,EAAW+H,EAASoF,EAASkE,GAChD,GAAIlK,GAAU,IACd,KACEA,EAAU0L,EAAc7S,GAAWwI,EAAEwI,KAAKjJ,EAASiE,GAAmBmB,EACtE,IAAIkE,EAAKA,EAAIrE,KAAK7F,GAClB,MAAOtB,GACPsH,EAAQtH,IAIZ,QAASyM,GAAetS,EAAW8S,GACjC9S,EAAU2M,UAAY,KACtBP,GAAUG,kBAAkBU,OAAOjN,EAAW,KAAM8S,GAGtD,QAAS/F,GAAQ5C,EAAKxE,GACpBzE,EAAKoO,YAAY3J,GAAI,KAAMwE,EAAKA,EAAIsF,MAGtC,QAASoD,GAAc7S,GACrB,aAAcA,GAAU+S,cAAgB,WAAa/S,EAAU+S,YAAc7R,EAG/E,QAASwR,GAAgB3K,EAASlC,EAAKsE,GACrC,MAAQpC,GAAQgD,mBAAqBiI,EAAcnN,GAAOsE,IAAS8I,EAAoBpN,EAAKsE,GAG9F,QAAS8I,GAAoBpN,EAAKsE,GAChC,MAAQtE,IAAOA,EAAIlF,OAAS8D,WAAc0F,GAAO1F,WAAayO,EAAgBrN,GAAOsE,IAAQ,MAG/F,QAAS+I,GAAgB/I,GACvB,MAAOgJ,GAAoB,IAAKhJ,GAGlC,QAAS6I,GAAc7I,GACrB,MAAOgJ,GAAoB,IAAKhJ,GAGlC,QAASgJ,GAAoBxS,EAAMwJ,GACjC,MAAOA,KAAQA,EAAIxJ,MAAQwJ,EAAI9E,QAAU1E,GAAQwJ,EAAI9E,SAAW,IAAM,MAGxE,QAASqM,GAAanP,GACpB,OAAQA,GAAUA,EAAOkE,gBAAkB,MAAQ,OAAS,WAG3DgK,aAAa,EAAErD,sBAAsB,EAAEC,UAAU,EAAE9C,SAAS,EAAEpB,UAAU,KAAKiK,IAAI,SAAS5S,EAAQf,EAAOD,GAC5G,GAAIgJ,GAAIhI,EAAQ,UAChB,IAAI6P,GAAU7P,EAAQ,YACtB,IAAI8I,GAAS9I,EAAQ,WACrB,IAAIiI,GAAQjI,EAAQ,UACpB,IAAI+L,GAAoB/L,EAAQ,uBAChC,IAAI6S,GAAW7S,EAAQ,YAEvBf,GAAOD,QAAU4Q,CAEjB,SAASA,GAAUrI,GACjB3G,KAAKkS,SAAW,IAChBlS,MAAKwL,SACLxL,MAAKuL,UAAY,KACjBvL,MAAKmS,QAAU,GAAIjK,GAAOlI,KAC1BA,MAAK+M,OAAS,GAAI1F,EAClBrH,MAAK2R,YAAc,IACnB3R,MAAKoS,WAAWzL,GAGlBqI,EAAU5O,UAAYD,OAAO0N,OAAOoE,EAAS7R,UAE7C4O,GAAU5O,UAAUgS,WAAa,SAAU3C,EAAM9I,GAC/C,GAAIW,GAAQ,IACZ,IAAImI,GAAQrI,EAAE1F,MAAMiF,GAAU,CAC5BW,EAAQtH,KAAKkS,SAASrL,IAAI4I,EAC1B,IAAInI,YAAiB2H,GAAS3H,EAAMO,IAAIlB,OACnC,CACL3G,KAAKkS,SAAWjD,EAAQ3Q,OAAOmR,IAInCT,GAAU5O,UAAUiS,oBAAsB,SAAU1L,GAClD3G,KAAKoS,WAAW,YAAazL,EAC7B,OAAO3G,MAGTgP,GAAU5O,UAAUkS,kBAAoB,SAAU3L,GAChD3G,KAAKoS,WAAW,UAAWzL,EAC3B,OAAO3G,MAGTgP,GAAU5O,UAAU4I,WAAa,SAAUyG,GACzC,MAAOA,GAAOzP,KAAKkS,SAASrL,IAAI4I,GAAQzP,KAAKkS,SAG/ClD,GAAU5O,UAAUmS,eAAiB,SAAU9C,GAC7C,GAAI9I,GAAU3G,KAAKkS,SAASrL,IAAI4I,GAAQ,UACxC,IAAI9I,EAAS,MAAOA,GAAQ7G,OAG9BkP,GAAU5O,UAAUmJ,QAAU,SAAUkG,GACtC,GAAI9I,GAAU3G,KAAKkS,SAASrL,IAAI4I,GAAQ,UACxC,IAAI9I,EAAS,MAAOA,GAAQ4C,UAG9ByF,GAAU5O,UAAUoS,iBAAmB,SAAUC,GAC/C,GAAIrL,EAAEQ,MAAM6K,GAAO,CACjBzS,KAAKkS,SAASrL,IAAI,aAAa0C,QAAQkJ,OAClC,CACL,MAAOzS,MAAKuJ,QAAQ,cAIxByF,GAAU5O,UAAU6Q,oBAAsB,WACxC,GAAI1H,GAAUvJ,KAAKwS,kBACnB,OAAOpL,GAAE1F,MAAM6H,IAAYA,EAAQ5B,UAAY,MAGjDqH,GAAU5O,UAAUmM,WAAa,SAAUkG,GACzCzS,KAAKkS,SAASrL,IAAI,WAAW0C,QAAQkJ,EACrC,OAAOzS,MAGTgP,GAAU5O,UAAUsS,gBAAkB,SAAU/L,EAASpC,GACvD,MAAO+G,GAActL,KAAM,QAAS2G,EAASpC,GAG/CyK,GAAU5O,UAAUuS,kBAAoB3D,EAAU5O,UAAUwS,iBAAmB,SAAUjM,EAASpC,GAChGA,QAAYoC,KAAY,WAAaA,EAAUpC,CAC/C,IAAIvE,KAAKwS,mBAAoB,CAC3BxS,KAAK0S,gBAAgB/L,EAASpC,OACzB,IAAIvE,KAAKuJ,QAAQ,WAAY,CAClChF,EAAG,KAAMvE,KAAKuJ,QAAQ,WAAWsJ,YAC5B,CACLtO,EAAG,GAAIjF,OAAM,oBAEf,MAAOU,MAGTgP,GAAU5O,UAAUkL,cAAgB,SAAU3E,EAASpC,GACrD,MAAO+G,GAActL,KAAM,SAAU2G,EAASpC,GAGhDyK,GAAU5O,UAAU0S,WAAa,WAC/B9S,KAAK+M,OAAOxF,OACZ,OAAOvH,MAGTgP,GAAU5O,UAAU2S,cAAgB,SAAU9E,GAC5C,SAAWA,KAAW,WAAY,CAChCjO,KAAK2R,YAAc1D,GAIvBe,GAAU5O,UAAU4S,kBAAoB,WACtChT,KAAK2R,YAAc,KAGrB3C,GAAU5O,UAAU6S,kBAAoB,WACtC,MAAOjT,MAAKuJ,QAAQ,WAAW2J,cAAgBlT,KAAKgJ,WAAW,aAAanC,IAAI,oBAAsB,GAGxGmI,GAAU5O,UAAUwJ,SAAW,SAAUjD,GACvC,GAAIA,EAAS,CACX3G,KAAKkS,SAASrL,IAAI,YAAYgB,IAAIlB,OAC7B,CACL,MAAO3G,MAAKgJ,WAAW,aAI3BgG,GAAU5O,UAAU6N,OAASe,EAAU5O,UAAUN,KAAO,WACtD,MAAOE,MAAKmS,QAGdnD,GAAU5O,UAAUqG,KAAOuI,EAAU5O,UAAU2F,QAAU,SAAUqC,EAAMzB,EAASpC,GAChF,MAAOvE,MAAKmS,QAAQ1L,KAAK2B,EAAMzB,EAASpC,GAG1CyK,GAAU5O,UAAU+S,KAAO,SAAUC,GACnCpT,KAAK+S,cAAc,SAAUpM,EAASpC,GACpC6C,EAAE+J,MAAM,WAAciC,EAAOzM,EAASpC,MAExC,OAAOvE,MAGTgP,GAAU5O,UAAUiT,OAAS,WAC3BrT,KAAKgT,oBAGP,IAAIM,IAAS,MAAO,OAAQ,MAAO,MAAO,SAAU,OAAQ,QAC5DA,GAAM5Q,QAAQ6Q,EAEd,SAASA,GAAkBC,GACzBxE,EAAU5O,UAAUoT,GAAQ,SAAUpL,EAAMzB,EAASpC,GACnD,MAAOvE,MAAKmS,QAAQqB,GAAMpL,EAAMzB,EAASpC,IAI7C,QAAS+G,GAAc1M,EAAWuC,EAAQwF,EAASpC,GACjD,SAAWoC,KAAY,WAAY,CACjCpC,EAAKoC,CACLA,GAAU,KAEZwE,EAAkBhK,GAAQvC,EAAW+H,EAASpC,GAAM6C,EAAEnG,KACtD,OAAOrC,MAGN6U,UAAU,EAAErE,WAAW,EAAEsE,uBAAuB,EAAEpE,YAAY,GAAGvH,UAAU,GAAG4L,YAAY,KAAKC,IAAI,SAASxU,EAAQf,EAAOD,GAC9H,GAAIgJ,GAAIhI,EAAQ,UAChB,IAAI0L,GAAiB1L,EAAQ,UAC7B,IAAI4L,GAAY5L,EAAQ,cACxB,IAAI+L,GAAoB/L,EAAQ,uBAChC,IAAI8L,GAAmB9L,EAAQ,sBAC/B,IAAI2L,GAAU3L,EAAQ,YAEtBf,GAAOD,QAAUyV,CAEjB,SAASA,GAASjV,EAAW+H,EAASpC,GACpC,IACEoH,EAAQ1D,GACR,MAAOxD,GACPF,EAAG,GAAIuG,GAAe,KAAMrG,IAG9B,QAASkH,GAAQmI,GACf,GAAIC,IAA+B,CACjCC,EAAuBF,OAClB,IAAIG,EAAgB,WAAY,CACrCH,QACK,IAAI7C,IAAuB,CAChC3F,EAAcwI,OACT,CACLA,EAAK,GAAIhJ,GAAe,QAI5B,QAASQ,GAAcwI,GACrB3I,EAAkBU,OAAOjN,EAAW,KAAMkV,GAG5C,QAASE,GAAuBF,GAC9B,GAAInN,GAAU/H,EAAUoK,WAAW,YACnC,IAAI8G,GAAiB1I,EAAEwI,KAAKjJ,EAAQE,OAAQ,UAAW,kBACvD,IAAI4D,GAAiBrD,EAAE6B,MAAM6G,EAAgBnJ,EAAQE,IAAI,mBAAqB6C,oBAAqB,OACnG,IAAIH,GAAU5C,EAAQE,IAAI,iBAC1BqE,GAAiBtM,EAAW6L,EAAgBlB,GAAS2K,EAAiBvN,EAASmN,IAGjF,QAASI,GAAiBvN,EAASmN,GACjC,MAAO,UAAUrP,EAAKsE,GACpB,GAAItE,EAAK,CACPqP,EAAK,GAAIhJ,GAAe,KAAMrG,QACzB,IAAIsE,GAAOA,EAAIpF,KAAM,CAC1BgD,EAAQ4C,QAAQR,EAAIpF,KACpB,KAAKsQ,IAAmB,CACtB3I,EAAcwI,OACT,CACLA,SAEG,CACLA,EAAK,GAAIhJ,GAAe,KAAMrG,MAKpC,QAASsP,KACP,GAAII,GAAU,KACd,IAAIxN,GAAU/H,EAAUoK,WAAW,YACnC,IAAIO,GAAU5C,EAAQE,IAAI,UAC1B,IAAI2D,GAAiB7D,EAAQE,IAAI,iBACjC,IAAI2D,GAAkBA,EAAe7C,SAAU,CAC7C,GAAI4B,GAAWA,EAAQ5B,SAAU,CAC/BwM,EAAU5K,EAAQ2J,aAAevM,EAAQE,IAAI,8BACxC,CACLsN,EAAU,MAGd,MAAOA,GAGT,QAASF,KACP,GAAI1K,GAAU3K,EAAU2K,QAAQ,UAChC,OAAOA,IAAWA,EAAQ5B,UAAYyM,EAAkB7K,IAAY,MAGtE,QAAS6K,GAAkB7K,GACzB,GAAI8K,GAAU,IACd,IAAIpD,IAAuB,CACzBoD,EAAU9K,EAAQ2J,aAAetU,EAAUoK,WAAW,aAAanC,IAAI,mBAEzE,MAAOwN,GAGT,QAASpD,KACP,MAAOrS,GAAUqS,sBAGnB,QAAShJ,GAASxD,EAAKsE,GACrB,GAAItE,EAAK,CACPF,EAAGE,OACE,CACL6P,EAAiBvL,IAIrB,QAASuL,GAAiBvL,GACxB,GAAIQ,GAAU3K,EAAU2K,SACxB,IAAIR,GAAOA,EAAIgE,OAAQ,CACrBxD,EAAU,GAAIwB,GAAQhC,EAAIpF,UACrB,KAAKsQ,EAAgB,WAAY,CACtC,MAAO1P,GAAG,GAAIuG,GAAe,OAE/BE,EAAUpM,GAAW2K,EAAS5C,EAASpC,OAIxCmP,uBAAuB,EAAEzH,UAAU,EAAEC,cAAc,GAAGC,YAAY,GAAGC,sBAAsB,GAAGrE,UAAU,KAAKwM,IAAI,SAASnV,EAAQf,EAAOD,GAC5IC,EAAOD,QAAU6J,CAEjB,SAASA,GAASuM,EAAKC,GACrBA,EAAOA,EAAO,EAAI,EAAIA,CACtB,OAAO3K,GAAW2K,EAAMD,GAAKE,EAAUD,IAAO9D,QAGhD,QAAS7G,GAAWhL,EAAG6V,GACrB,GAAIC,GAAGC,EAAGxV,EAAGyV,IACb,KAAKH,EAAI,CACPA,IACA,KAAKC,EAAI,EAAGA,GAAK9V,EAAG8V,GAAK,EAAGD,EAAG/I,KAAKgJ,OAC/B,CACLD,EAAKA,EAAGnU,QAEV,GAAI1B,EAAI,IAAM,EAAG,CACf6V,EAAG/I,MAAM,EACT9M,IAAK,EAEP,IAAK+V,EAAI,EAAGA,EAAI/V,EAAI,EAAG+V,GAAK,EAAG,CAC7BC,EAAGD,KACH,KAAKxV,EAAI,EAAGA,EAAIP,EAAI,EAAGO,GAAK,EAAG,CAC7B,GAAIsV,EAAGtV,MAAQ,GAAKsV,EAAG7V,EAAI,EAAIO,MAAQ,EAAG,CACxCyV,EAAGD,GAAGjJ,MAAM+I,EAAGtV,GAAIsV,EAAG7V,EAAI,EAAIO,MAGlCsV,EAAGjJ,OAAO,EAAG,EAAGiJ,EAAGI,OAErB,MAAOD,GAGT,QAASJ,GAAUM,GACjBA,EAAMA,EAAM,EAAIA,EAAM,EAAIA,CAC1B,OAAOC,MAAKC,MAAMD,KAAKE,UAAYH,EAAM,GAAK,SAG1CI,IAAI,SAAShW,EAAQf,EAAOD,GAClC,GAAIgJ,GAAIhI,EAAQ,UAChB,IAAI8B,GAAW9B,EAAQ,aAEvBf,GAAOD,QAAUiX,CAEjB,SAASA,GAAOxQ,EAAK8B,GACnB3G,KAAK6E,IAAMA,CACX7E,MAAKsV,UACLtV,MAAKoS,WAAWzL,GAGlB0O,EAAOjV,UAAUoR,OAAS,SAAUpB,EAAWlG,EAASuF,GACtD,GAAI8F,GAAQvV,KAAKwV,SAASpF,EAC1B,IAAImF,EAAO,CACTA,EAAM9F,GAAQ,YAAc,CAC5B,IAAIvF,EAAS,CACXqL,EAAMrL,QAAUuL,EAAoBvL,EAASqL,KAKnDF,GAAOjV,UAAUmR,YAAc,SAAUnB,EAAWlG,GAClDlK,KAAKwR,OAAOpB,EAAWlG,EAAS,SAGlCmL,GAAOjV,UAAUsV,WAAa,SAAUtF,EAAWzJ,GACjD,GAAI4O,GAAQvV,KAAKwV,SAASpF,EAC1B,IAAIpG,GAAShK,KAAK2V,aAAahP,GAASqD,MACxC,IAAIlE,GAAQyP,EAAMxP,QAAUwP,EAAMpR,KAClC,OAAO2B,KAAU,EAAI,EAAI8P,EAAsBL,EAAOvL,EAAQlE,GAGhEuP,GAAOjV,UAAUoV,SAAW,SAAUpF,EAAWhO,GAC/C,GAAImT,GAAQvV,KAAKuV,MAAMnF,GAAa,OACpC,IAAImF,GAASnT,EAAOmT,EAAQA,EAAMnT,EAClC,OAAOmT,GAGTF,GAAOjV,UAAUgS,WAAa,SAAUzL,GACtC3G,KAAK2G,QAAUS,EAAE6B,SAAU/H,EAAS0I,SAAUjD,GAGhD0O,GAAOjV,UAAUuV,aAAe,SAAUhP,GACxC,GAAIS,EAAE1F,MAAMiF,GAAU,CACpB,MAAOS,GAAE6B,SAAUjJ,KAAK2G,QAASA,OAC5B,CACL,MAAO3G,MAAK2G,SAIhB0O,GAAOjV,UAAUkV,SAAW,SAAUC,GACpCvV,KAAKuV,MAAQA,IACXM,KAAMC,IACNC,MAAOD,KAIX,SAASA,KACP,OACE5L,QAAS,EACT/F,MAAO,EACP4B,QAAS,GAIb,QAASiQ,KACP,MAAQT,OAAMxP,QAAU,IAAMD,MAASkE,OAAOC,QAGhD,QAAS2L,GAAsBL,EAAOvL,EAAQlE,GAC5C,MAAOoP,IACFK,EAAMxP,QAAU,IAAMD,EAASkE,EAAOC,QACxCsL,EAAMpR,MAAQ,IAAM2B,EAASkE,EAAO7F,MACrCoR,EAAMrL,QAAUF,EAAOE,SAAY,KAGvC,QAASuL,GAAoBvL,EAASqL,GACpC,MAAOL,IAAOhL,EAAUqL,EAAMrL,UAAYqL,EAAMxP,QAAUwP,EAAMpR,QAGlE,QAAS+Q,GAAMe,GACb,MAAOhB,MAAKC,MAAMe,EAAS,KAAO,OAGjC5G,aAAa,EAAEtH,UAAU,KAAKmO,IAAI,SAAS9W,EAAQf,EAAOD,GAC7D,GAAIgJ,GAAIhI,EAAQ,UAChB,IAAI0L,GAAiB1L,EAAQ,UAC7B,IAAI2L,GAAU3L,EAAQ,YACtB,IAAI4L,GAAY5L,EAAQ,cAExBf,GAAOD,QAAU8M,CAEjB,SAASA,GAAiBtM,EAAW+H,EAAS4C,GAC5C,QAASP,KACP,MAAO5B,GAAE6B,MAAMrK,EAAUoK,WAAW,aAAanC,MAAOF,GAG1D,QAASwP,KACP,MAAO5M,IAAW3K,EAAU2K,QAAQ,aAGtC,QAAS0H,KACP,GAAI1H,GAAU4M,GACd,OAAO5M,IAAWA,EAAQ5B,UAAY,MAGxC,QAASyO,GAAa7R,GACpB,GAAIoC,GAAUqC,GACdrC,GAAQ1D,OAASoT,EAAa1P,EAC9B,IAAIA,EAAQ+D,SAAU,CACpB4L,EAAwB3P,EAASpC,OAC5B,CACLyG,EAAUpM,GAAWuX,IAAcxP,EAAS4P,EAAgBhS,KAIhE,QAAS+R,GAAwB3P,EAASpC,GACxC,GAAI0L,MAAU1G,EAAU4M,IAAa9F,KAAK,OAAQzR,EAAUgL,WAC5DL,GAAQ/I,MAAM,EAAG,GAAGkC,QAAQ,SAAUgO,EAAQ8F,GAC5C9F,GAAWA,EACX,IAAI8F,IAAU,GAAKjN,EAAQ7J,OAAS,EAAG,CACrCgR,EAASA,EAAO+F,OAAOlN,EAAQ/I,MAAM,IAEvCwK,EAAUpM,GAAW,GAAImM,GAAQ2F,GAAS/J,EAAS+P,EAAmBF,EAAOvG,EAAK1L,GAAK0L,KAI3F,QAASyG,GAAmBF,EAAOvG,EAAK1L,GACtC,MAAO,UAAUE,EAAKsE,GACpB,GAAItE,EAAKwL,EAAIuG,GAAS,IACtB,IAAIzN,GAAOyN,IAAU,EAAG,CACtBD,EAAgBhS,EAAI0L,GAAKxL,EAAKsE,KAKpC,QAASwN,GAAgBhS,EAAI0L,GAC3B,MAAO,UAAUxL,EAAKsE,GACpB4N,EAAqB1G,EACrB1L,GAAGE,GAAO,KAAMsE,IAIpB,QAASuC,GAAc/G,GACrB,IACE6R,EAAa7R,GACb,MAAOE,GACPF,EAAG,GAAIuG,GAAe,KAAMrG,KAIhC,MAAO,SAASwD,GAAS1D,GACvB,GAAI0M,MAA0B,MAAO,CACnC1M,EAAG,GAAIuG,GAAe,WACjB,CACLQ,EAAc/G,KAKpB,QAAS8R,GAAa1P,GACpB,GAAIe,GAAON,EAAEU,MAAQmN,KAAK2B,MAAM3B,KAAKE,SAAW,IAChD,OAAO/N,GAAEzF,OAAOgF,EAAQ1D,QAAU0D,EAAQ8H,QAAYoI,MAAOnP,IAG/D,QAASiP,GAAqB1G,GAC5B,GAAIA,EAAK,CACP,IAAK6G,EAAc7G,GAAMA,EAAIvN,QAAQqU,EACrC9G,GAAIvE,OAAO,IAIf,QAASqL,GAAoB9I,GAC3B,GAAIA,EAAQ,CACV,GAAIA,EAAO/L,IAAK,CACd,GAAI+L,EAAO/L,IAAIyC,aAAe,EAAG,CAC/BqS,EAAY/I,EAAO/L,UAEhB,UAAW+L,GAAOgJ,QAAU,WAAY,CAC7CD,EAAY/I,KAKlB,QAAS+I,GAAY/I,GACnB,IAAMA,EAAOgJ,QAAU,MAAO9Y,KAGhC,QAAS2Y,GAAc7G,GACrB,MAAOA,GAAI9M,OAAO,SAAU4C,GAAW,MAAOqB,GAAE1F,MAAMqE,KAAYrG,SAAW,KAG5EuM,UAAU,EAAEC,cAAc,GAAGC,YAAY,GAAGpE,UAAU,KAAKmP,IAAI,SAAS9X,EAAQf,EAAOD,GAC1F,GAAIgJ,GAAIhI,EAAQ,UAChB,IAAIiW,GAASjW,EAAQ,WACrB,IAAI+X,GAAa/X,EAAQ,eAEzBf,GAAOD,QAAU2M,CAEjB,SAASA,GAAQxB,GACfvJ,KAAKuJ,UACLvJ,MAAKqU,QAAU,CACfrU,MAAKoX,MAAQ,KACbpX,MAAK6H,IAAI0B,GAGXwB,EAAQ3K,UAAUiQ,KAAO,SAAUD,EAAWzJ,GAC5C,GAAI4C,GAAUvJ,KAAKuJ,QAAQ/I,MAAM,GAAG6P,KAAK,SAAUxO,EAAGwV,GACpD,MAAOxV,GAAE6T,WAAWtF,EAAWzJ,GAAW0Q,EAAE3B,WAAWtF,EAAWzJ,IAEpE,OAAO2Q,GAAe/N,EAAS5C,GAGjCoE,GAAQ3K,UAAUmX,KAAO,SAAU1S,GACjC,GAAIxF,GAAGG,EAAGkR,EAAS,IACnB,KAAKrR,EAAI,EAAGG,EAAIQ,KAAKuJ,QAAQ7J,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAClD,GAAIW,KAAKuJ,QAAQlK,GAAGwF,MAAQA,EAAK,CAC/B6L,EAAS1Q,KAAKuJ,QAAQlK,EACtB,QAGJ,MAAOqR,GAGT3F,GAAQ3K,UAAUyG,IAAM,WACtB,MAAO7G,MAAKuJ,QAAQ/I,MAAM,GAG5BuK,GAAQ3K,UAAUyH,IAAM,SAAU0B,GAChC,GAAInC,EAAEQ,MAAM2B,GAAU,CACpBvJ,KAAKoX,MAAQ,IACbpX,MAAKqU,QAAUjN,EAAEU,KACjB9H,MAAKuJ,QAAUiO,EAAW/X,KAAKO,KAAMuJ,IAIzCwB,GAAQ3K,UAAU8S,WAAa,WAC7B,MAAO9L,GAAEU,MAAQ9H,KAAKqU,QAGxBtJ,GAAQ3K,UAAUqX,MAAQ,WACxB,MAAOzX,MAAKuJ,QAAQ7J,SAAW,EAGjCqL,GAAQ3K,UAAUuH,OAAS,WACzB,MAAO3H,MAAKyU,OAAS,EAGvB1J,GAAQ3K,UAAUqU,KAAO,WACvB,MAAOzU,MAAKuJ,QAAQ7J,OAGtBqL,GAAQ3K,UAAUsX,YAAc,WAC9B,GAAIN,GAAQpX,KAAKoX,KACjB,IAAIA,EAAOpX,KAAKoX,MAAQ,KACxB,OAAOA,GAGTrM,GAAQ3K,UAAUyS,KAAO,WACvB,MAAO7S,MAAKuJ,QAAQhH,IAAI,SAAUmO,GAChC,MAAOA,GAAO7L,MAIlB,SAAS8S,GAAWC,GAClB,GAAIxQ,EAAE1F,MAAMkW,GAAMA,EAAMA,EAAI/S,KAAO+S,EAAIA,GACvC,OAAOxQ,GAAE8B,MAAM0O,GAGjB,QAASJ,GAAWjO,GAClB,MAAOA,GACJpG,OAAOwU,GACPpV,IAAI6E,EAAEuI,KAAK3P,KAAM6X,IAGtB,QAASA,GAAUlU,GACjB,GAAI+M,EACJ,IAAI/M,YAAgB0R,GAAQ,CAC1B3E,EAAS/M,MACJ,CACL+M,EAAS1Q,KAAKuX,KAAKnQ,EAAE1F,MAAMiC,GAAQA,EAAKkB,IAAMlB,EAC9C,KAAK+M,EAAQA,EAAS,GAAI2E,GAAO1R,GAEnC,MAAO+M,GAGT,QAAS4G,GAAe/N,EAAS5C,GAC/B,GAAI8N,GAAO,CACX,IAAI9N,GAAWA,EAAQmD,WAAY,CACjC2K,EAAO9N,EAAQoD,eAAiBR,EAAQ7J,OAAS6J,EAAQ7J,OAASiH,EAAQoD,cAC1E,IAAI0K,EAAO,EAAGlL,EAAU4N,EAAW5N,EAASkL,GAE9C,MAAOlL,MAGNuO,eAAe,GAAGC,WAAW,GAAGhQ,UAAU,KAAKiQ,IAAI,SAAS5Y,EAAQf,EAAOD,GAC9E,GAAIgJ,GAAIhJ,CACR,IAAI8B,GAAQC,OAAOC,UAAUC,QAC7B,IAAIG,GAAQD,MAAMH,UAAUI,KAC5B,IAAIC,GAASN,OAAOC,UAAUM,cAC9B,IAAIiP,GAAOsI,SAAS7X,UAAUuP,IAC9B,IAAIuI,GAAgB3X,MAAM0F,OAC1B,IAAIkS,GAAW,sBAEf/Q,GAAEnG,KAAO,QAASA,MAElBmG,GAAEU,IAAM,WACN,OAAO,GAAIsQ,OAAOC,UAGpBjR,GAAE1F,MAAQ,SAAUzC,GAClB,MAAOA,IAAKiB,EAAMT,KAAKR,KAAO,mBAAqB,MAGrDmI,GAAEQ,MAAQ,SAAU3I,GAClB,MAAOA,IAAKiZ,EAAgBA,EAAcjZ,GAAKiB,EAAMT,KAAKR,KAAO,kBAAoB,MAGvFmI,GAAEuI,KAAO,SAAU2I,EAAKC,GACtB,MAAO5I,GAAO4I,EAAG5I,KAAK2I,GAAO,WAC3B,MAAOC,GAAG3R,MAAM0R,EAAKtW,YAIzBoF,GAAEsI,KAAO,SAAU8I,EAAKD,GACtB,GAAIlZ,GAAGG,CACP,IAAI4H,EAAEQ,MAAM4Q,GACV,IAAKnZ,EAAI,EAAGG,EAAIgZ,EAAI9Y,OAAQL,EAAIG,EAAGH,GAAK,EAAGkZ,EAAGC,EAAInZ,GAAIA,OACnD,IAAI+H,EAAE1F,MAAM8W,GACf,IAAKnZ,IAAKmZ,GAAK,GAAI/X,EAAOhB,KAAK+Y,EAAKnZ,GAAIkZ,EAAGlZ,EAAGmZ,EAAInZ,IAGtD+H,GAAEyB,KAAO,SAAU0P,GACjB,GAAI/T,GAAS,KACb,OAAO,YACL,GAAIA,IAAW,MAAO,CACpBA,EAAS,IACT+T,GAAG3R,MAAM,KAAM5E,aAKrBoF,GAAEK,MAAQ,SAAU+Q,GAClB,MAAOpR,GAAEzF,UAAW6W,GAGtBpR,GAAEwI,KAAO,SAAU4I,EAAKzI,GACtB,GAAIvI,GAAKyI,IACT,IAAI7I,EAAE1F,MAAM8W,GAAM,CAChB,IAAKhR,IAAOgR,GAAK,GAAI/X,EAAOhB,KAAK+Y,EAAKhR,GAAM,CAC1C,GAAIuI,EAAK9K,QAAQuC,MAAU,EAAGyI,EAAIzI,GAAOgR,EAAIhR,IAGjD,MAAOyI,GAGT7I,GAAE+J,MAAQ,SAAUoH,EAAIE,GACtB,MAAOC,YAAWH,EAAIE,GAAM,GAG9BrR,GAAE8B,MAAQ,SAAUyP,GAClB,aAAcA,KAAQ,UAAYR,EAASrV,KAAK6V,GAGlDvR,GAAE5D,KAAO,SAAUoV,GACjB,OAAQA,GAAQ,IAAOpY,EAAMf,KAAKuC,UAAW,GAC1CmB,OAAO,SAAU0V,GAAQ,aAAcA,KAAS,UAAYA,EAAKnZ,OAAS,IAC1E8D,KAAK,IAGV4D,GAAEzF,OAASmX,EAAYC,EAEvB3R,GAAE6B,MAAQ6P,EAAYE,EAEtB,SAASD,GAASnX,EAAQ4F,EAAKlE,GAC7B1B,EAAO4F,GAAOlE,EAGhB,QAASwV,GAAYG,GACnB,MAAO,UAAUrX,GACfwF,EAAEsI,KAAKlP,EAAMf,KAAKuC,UAAW,GAAIkX,EAAoBtX,EAAQqX,GAC7D,OAAOrX,IAIX,QAASsX,GAAoBtX,EAAQqX,GACnC,MAAO,UAAUT,GACf,GAAIpR,EAAE1F,MAAM8W,GAAM,CAChBpR,EAAEsI,KAAK8I,EAAK,SAAUhR,EAAKlE,GACzB2V,EAASrX,EAAQ4F,EAAKlE,OAM9B,QAAS0V,GAAOpX,EAAQ4F,EAAKlE,GAC3B,GAAI8D,EAAE1F,MAAM4B,IAAU8D,EAAE1F,MAAME,EAAO4F,IAAO,CAC1CJ,EAAE6B,MAAMrH,EAAO4F,GAAMlE,OAChB,CACLyV,EAASnX,EAAQ4F,EAAKlE,UAIpB6V,IAAI,SAAS/Z,EAAQf,EAAOD,SAE5Bgb,IAAI,SAASha,EAAQf,EAAOD,IAEjC,SAAUwB,EAAMC,GACf,SAAWvB,KAAW,YAAcA,EAAOC,IAAK,CAC9CD,GAAQ,WAAYuB,OACf,UAAWzB,KAAY,SAAU,CACtCyB,EAAQzB,EACR,UAAWC,KAAW,UAAYA,IAAW,KAAM,CACjDA,EAAOD,QAAUA,EAAQib,WAEtB,CACLxZ,EAASD,EAAKG,IAAMH,EAAKG,YAE3BC,KAAM,SAAU5B,GAChB,YACA,IAAI6B,GAAU,OACd,IAAIO,GAAQD,MAAMH,UAAUI,KAC5B,IAAIC,GAASN,OAAOC,UAAUM,cAE9B,SAAS2Y,MAETA,EAAMjZ,UAAUkZ,YAAcD,CAE9BA,GAAMjZ,UAAUmZ,YAAcF,EAAMjZ,UAAUoZ,GAAK,SAAUC,EAAOlB,EAAI1P,GACtE,SAAW4Q,KAAU,SAAU,KAAM,IAAIC,WAAU,kCACnD,UAAWnB,KAAO,WAAY,KAAM,IAAImB,WAAU,qCAClD,KAAKC,EAAala,KAAKO,KAAMyZ,EAAOlB,GAAK,CACvCqB,EAAana,KAAKO,KAAMyZ,GAAO7N,MAAO2M,GAAIA,EAAI1P,KAAMA,GAAQ,QAE9D,MAAO7I,MAGTqZ,GAAMjZ,UAAUyZ,eAAiBR,EAAMjZ,UAAU0Z,IAAM,SAAUL,EAAOlB,GACtE,GAAI/B,EACJ,IAAIuD,GAAYH,EAAana,KAAKO,KAAMyZ,EACxC,IAAIO,GAAWL,EAAala,KAAKO,KAAMyZ,EAAOlB,EAC9C,IAAIyB,EAAU,CACZxD,EAAQuD,EAAU9U,QAAQ+U,EAC1B,IAAIxD,GAAS,EAAGuD,EAAUrO,OAAO8K,EAAO,GAE1C,MAAOxW,MAGTqZ,GAAMjZ,UAAU6Z,gBAAkBZ,EAAMjZ,UAAUyI,KAAO,SAAU4Q,EAAOlB,EAAI1P,GAC5E7I,KAAKuZ,YAAYE,EAAOlB,EAAI,KAC5B,OAAOvY,MAGTqZ,GAAMjZ,UAAUkI,KAAO+Q,EAAMjZ,UAAU8Z,KAAO,SAAUT,GACtD,GAAIpa,GAAGG,EAAGwa,EAAUjY,EAAOvB,EAAMf,KAAKuC,WAAWxB,MAAM,EACvD,IAAIuZ,GAAYH,EAAana,KAAKO,KAAMyZ,EACxC,IAAIA,EAAO,CACT,IAAKpa,EAAI,EAAGG,EAAIua,EAAUra,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC/C2a,EAAWD,EAAU1a,EACrB,IAAI2a,EAASnR,KAAMkR,EAAUrO,OAAOrM,EAAG,EACvC2a,GAASzB,GAAG3R,MAAM,KAAM7E,IAG5B,MAAO/B,MAGTqZ,GAAMjZ,UAAU+Z,mBAAqBd,EAAMjZ,UAAUga,OAAS,SAAUX,GACtE,GAAIA,GAAShZ,EAAOhB,KAAKO,KAAKqa,QAASZ,GAAQ,CAC7CzZ,KAAKqa,QAAQZ,GAAO/N,OAAO,GAE7B,MAAO1L,MAGT,SAAS2Z,GAAaF,EAAOlB,GAC3B,GAAIlZ,GAAGG,EAAGwa,EAAUD,EAAYH,EAAana,KAAKO,KAAMyZ,EACxD,KAAKpa,EAAI,EAAGG,EAAIua,EAAUra,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC/C2a,EAAWD,EAAU1a,EACrB,IAAI2a,EAASzB,KAAOA,EAAI,MAAOyB,IAInC,QAASJ,GAAaH,EAAOlB,GAC3B,GAAI+B,GAASC,EAAU9a,KAAKO,KAC5B,OAAOS,GAAOhB,KAAK6a,EAAQb,GAASa,EAAOb,GAAUa,EAAOb,MAG9D,QAASc,KACP,MAAOva,MAAKqa,UAAYra,KAAKqa,YAG/BhB,EAAMpZ,QAAUA,CAChB7B,GAAQib,MAAQA,cAGP,IAAI"}