{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","trim","split","forEach","header","key","shift","value","join","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","map","encodeURIComponent","replace","parseData","data","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","getURL","config","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","isArray","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","requester","delete","emit","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","once","finalHandler","res","merge","isURI","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","cache","parallel","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","_queue","dispatcher","splice","resolve","push","update","fetch","handler","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse","parseAsJSON",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","bind","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"getServersList","operation","sort","getOperation","serversList","requestNextServer","previousError","server","basePath","requestHandler","sendRequest","handleMissingServers","waitBeforeRetry","hasDiscoveryServers","updateAndRetry","delay","nextServer","start","requestReporter","isErrorResponse","reportError","report","resolveRequest","getHttpClient","onRetry","resolution","_httpClient","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","discoveryServers","list","getUpdatedServers","latestServers","discoverServers","urls","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","refreshDiscoveryServers","outdated","serversAreUpdated","updated","handleResolution","getRefreshBasePath",14,"arr","size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"balancerOptions","Server","statsStore","createServerStats","stats","calculateAvgLatency","balance","calculateStatsBalance","read","createStats","write","getWeightAvg","number",16,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","index","concat","onUpdateInParallel","closePendingRequests","floor","_time","isEmptyBuffer","closePendingRequest","closeClient","abort",17,"RoundRobin","forceUpdate","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",18,"Function","isArrayNative","uriRegex","Date","getTime","ctx","fn","obj","ms","setTimeout","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}