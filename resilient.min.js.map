{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","hasDomainRequest","XDomainRequest","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","isArr","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","map","getAllResponseHeaders","split","forEach","header","trim","parseData","data","contentType","getResponseHeader","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","createClient","config","toUpperCase","XMLHttpRequest","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","TypeError","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","key","clone","time","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","isFullUrl","plainHttp","concat","mergeHttpOptions","noop","getHttpOptions","isURI","./http","./resolver",4,"service","servers","retry","updateOnRetry","refresh","balancer","enable","weight","latency","discovery","cache","retryWait","parallel","cacheExpiration","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","DiscoveryResolver","getOptions","getServers","isUpdating","_updating","hasDiscoveryServers","exists","_queue","push","updateServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","buf","sort","server","index","onUpdateInParallel","res","isEmptyBuffer","splice","closePendingRequests","client","close","update","fetch","indexOf","Math","floor","random","abort","filter","./discovery-servers","./error","./requester","./servers",6,"defineServers","isValidResponse","setServers","handlerError","refreshCache","isCacheEnabled","getFromCache","resolveWithError","expiration","getCache","_cache",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","requestWrapper","body","mapResponse","statusCode","isJSONContent","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","./client","./defaults","./options","./resilient",10,"type","getRaw","each","value","bind","undefined","omit","defaultOptions","keys","defineDefaults",11,"getServersList","operation","enabled","getOperation","serversList","next","previousError","handler","shift","requestHandler","join","basePath","sendRequest","handleMissingServers","delayRetry","delay","getDiscoveryServers","start","isUnavailableStatus","reportError","report","isInvalidStatus",12,"VERBS","_client","setOptions","setDiscoveryOptions","setClientOptions","setDiscoveryServers","list","discoverServers","flushCache","areServersUpdated","lastUpdate","defineMethodProxy","verb","./cache","./discovery-resolver",13,"Resolver","resolve","hasServers","valid","isUpToDate","handleResolution",14,"Server","setStats","stats","getStats","calculateAvgLatency","getBalance","balance","round","read","createStats","write","number",15,"updated","y","find","mapServers","empty","isValidURI","uri","mapServer","./server",16,"Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","fn","obj","ms","setTimeout","str","test","base","part",17],"mappings":"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"}