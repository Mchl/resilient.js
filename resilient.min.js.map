{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","trim","split","forEach","header","key","shift","value","join","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","map","encodeURIComponent","replace","parseData","data","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","getURL","config","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","isArray","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","requester","delete","emit","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","once","finalHandler","res","merge","isURI","_httpClient","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","cache","parallel","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","_queue","dispatcher","splice","resolve","push","update","fetch","handler","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse","parseAsJSON",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","bind","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"getServersList","operation","sort","getOperation","serversList","requestNextServer","previousError","server","basePath","requestHandler","sendRequest","handleMissingServers","waitBeforeRetry","hasDiscoveryServers","updateAndRetry","delay","nextServer","start","requestReporter","isErrorResponse","reportError","report","resolveRequest","getHttpClient","onRetry","resolution","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","discoveryServers","list","getUpdatedServers","latestServers","discoverServers","urls","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","refreshDiscoveryServers","outdated","serversAreUpdated","updated","handleResolution","getRefreshBasePath",14,"arr","size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"balancerOptions","Server","statsStore","createServerStats","stats","calculateAvgLatency","balance","calculateStatsBalance","read","createStats","write","getWeightAvg","number",16,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","index","concat","onUpdateInParallel","closePendingRequests","floor","_time","isEmptyBuffer","closePendingRequest","closeClient","abort",17,"RoundRobin","forceUpdate","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",18,"Function","isArrayNative","uriRegex","Date","getTime","ctx","fn","obj","ms","setTimeout","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}