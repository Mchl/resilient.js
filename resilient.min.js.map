{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","hasBind","Function","bind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","data","headers","withCredentials","responseType","isObj","assign","target","x","cur","args","arguments","once","fn","called","apply","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","trim","split","forEach","header","key","shift","value","join","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","map","encodeURIComponent","replace","parseData","responseText","JSON","parse","response","getStatus","status","buildResponse","statusText","readyState","buildErrorResponse","error","stack","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","cb","err","onLoad","config","ev","isCrossOrigin","url","match","getURL","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","lengthComputable","loaded","total","hasContentTypeHeader","buildPayload","isArray","stringify","timeoutResolver","timeoutId","clearTimeout","request","progress","errorHandler","setTimeout","abort","onprogress","send","requestFactory","options","get","post","put","del","patch","head",2,"_","Cache","store","flush","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","requester","delete","emit","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","finalRequestHandler","res","$timeout","merge","isURI","_httpClient","./http","./resolver",4,"service","timeouts","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","resolve","_queue","push","update","fetch","handler","queue","splice","dispatcher","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","cache","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse","parseAsJSON",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"message","create",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"operation","getOperation","serversList","getServersList","requestNextServer","previousError","server","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","sort","previousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","waitBeforeRetry","retrier","updateDiscoveryServersAndRetry","delay","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","mapAndResolve","resolution","basePath","getTimeout","toLowerCase","arr","v","onRetry","hasDiscoveryServers","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","m","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","discoveryServers","list","resetScore","resetStats","getUpdatedServers","latestServers","discoverServers","urls","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","refreshDiscoveryServers","outdated","serversAreUpdated","updated","handleResolution","getRefreshBasePath",14,"size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","statsStore","createServerStats","read","createStats","write","getWeightAvg","number",16,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","counter","decrement","reset","pending","index","concat","onUpdateInParallel","closePendingRequests","extend","_time","isEmptyBuffer","closePendingRequest","closeClient",17,"RoundRobin","forceUpdate","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",18,"isArrayNative","uriRegex","Date","getTime","ctx","obj","ms","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}