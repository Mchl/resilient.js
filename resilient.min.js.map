{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","hasBind","Function","bind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","data","headers","withCredentials","responseType","isObj","assign","target","x","cur","args","arguments","once","fn","called","apply","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","trim","split","forEach","header","key","shift","value","join","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","map","encodeURIComponent","replace","parseData","responseText","JSON","parse","response","getStatus","status","buildResponse","statusText","readyState","buildErrorResponse","error","stack","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","cb","err","onLoad","config","ev","isCrossOrigin","url","match","getURL","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","lengthComputable","loaded","total","hasContentTypeHeader","buildPayload","isArray","stringify","timeoutResolver","timeoutId","clearTimeout","request","progress","errorHandler","setTimeout","abort","onprogress","send","requestFactory","options","get","post","put","del","patch","head",2,"_","Cache","store","flush","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","requester","delete","emit","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","finalHandler","res","merge","isURI","_httpClient","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","_queue","dispatcher","splice","resolve","push","update","fetch","handler","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","cache","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse","parseAsJSON",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"message","create",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"getServersList","operation","sort","getOperation","serversList","requestNextServer","previousError","server","basePath","requestHandler","sendRequest","handleMissingServers","waitBeforeRetry","hasDiscoveryServers","updateAndRetry","delay","nextServer","start","requestReporter","isErrorResponse","reportError","report","resolveRequest","getHttpClient","onRetry","resolution","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","discoveryServers","list","getUpdatedServers","latestServers","discoverServers","urls","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","refreshDiscoveryServers","outdated","serversAreUpdated","updated","handleResolution","getRefreshBasePath",14,"arr","size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"balancerOptions","Server","statsStore","createServerStats","stats","calculateAvgLatency","balance","calculateStatsBalance","read","createStats","write","getWeightAvg","number",16,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","counter","decrement","reset","pending","index","concat","onUpdateInParallel","closePendingRequests","floor","extend","_time","isEmptyBuffer","closePendingRequest","closeClient",17,"RoundRobin","forceUpdate","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",18,"isArrayNative","uriRegex","Date","getTime","ctx","obj","ms","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}