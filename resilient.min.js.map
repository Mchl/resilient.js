{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","Cache","this","store","Object","create","prototype","flush","key","emptyObject","get","clone","set","data","time","now","value","exists","isObj","isArr","./utils",2,"resolver","http","Client","_resilient","path","options","cb","send","post","put","del","delete","patch","head","method","args","normalizeArgs","requester","apply","emit","isFullUrlSchema","plainHttpRequest","arguments","mergeHttpOptions","noop","wrapCallback","once","finalRequestHandler","err","res","defaults","timeout","$timeout","merge","isURI","url","_httpClient","fn","called","./http","./resolver",3,"service","timeouts","servers","retry","waitBeforeRetry","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","roundRobin","roundRobinSize","weight","success","error","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","enableSelfRefresh","forceRefreshOnStart","refreshServersInterval","refreshServers","refreshOptions","refreshPath","resilientOptions",4,"Servers","Requester","ResilientError","CONCURRENCY","ServersDiscovery","middleware","_middleware","getOptions","getServers","hasDiscoveryServers","updateServersInParallel","buf","sort","pending","counter","onServersUpdateFn","onUpdateServers","onUpdateInParallelFn","onUpdateInParallel","slice","forEach","server","index","pool","concat","updateServers","next","fetchServers","params","addTimeStamp","run","handler","total","decrement","reset","extend","qs","_time","closeAndEmptyPendingRequests","isEmptyBuffer","closePendingRequest","splice","client","xhr","readyState","closeClient","abort","filter","request","./error","./requester","./servers",5,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,1007,"status","stack","message",6,"Evaluator","strategies","add","strategy","push","eval","some",7,"IS_BROWSER","JSON_MIME","resolveModule","HttpClient","VERSION","mapResponse","body","statusCode","isJSONContent","JSON","parse","test","headers","mapOptions","mapRequestBody","defineUserAgent","getUserAgent","LIBRARY_VERSION","json","requestWrapper","lil-http",8,"Options","Resilient","CLIENT_VERSION","./client","./defaults","./options","./resilient",9,"midware","hooks","Middleware","createPool","use","middlewares","toArr","isFn","map","passArgs","register","type","hook","hooksMiddleware","in","out","mw","opts",10,"omit","getRaw","setServers","each","bind","undefined","defaultOptions","keys",11,"operation","getOperation","serversList","getServersList","requestNextServer","previousError","shift","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","getPreviousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","onRetry","retrier","updateDiscoveryServersAndRetry","delay","resolve","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","mapAndResolve","resolution","join","basePath","getTimeout","toLowerCase","arr","v","pop","_sync","unlock","DiscoveryResolver","update","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","indexOf","toUpperCase","m","trim","isUnavailableStatus","_failStrategies","isErrorStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","Sync","cache","_client","_options","list","serversURL","urls","discoveryServers","resetScore","resetStats","latestServers","getUpdatedServers","discoverServers","discoveryOptions","serviceOptions","httpOptions","useHttpClient","restoreHttpClient","serversUpdated","updated","lastUpdate","refresh","mock","mockFn","unmock","failStrategy","addFailStrategy","defineMethodProxy","verb","./cache","./evaluator","./middleware","./resolvers/discovery","./sync","lil-event",13,"Resolver","wrapHandler","sync","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServiceServers","updateServiceServers","getRefreshServers","getRefreshOptions","locked","enqueue","onRefreshServers","lock","dequeue","mErr","refreshDiscoveryServers","outdated","canUpdateDiscoveryServers","serversAreUpdated","interval","handleResolution","_cache","getRefreshBasePath","./discovery",14,"ServiceResolve","fetch","fetchHandler","../discovery","../error","../requester","./service",15,"isCacheEnabled","getCache","name","saveServers","refreshCache","errorHandler","resolveFromCache","resolveWithError","hasValidCache","expires","handleResponse","done","isValidResponse","defineServers","valid","parseAsJSON","../utils",16,"roundRobinSerie","size","getRandom","ps","k","j","rs","max","Math","round","random",17,"balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","field","statsStore","createServerStats","read","createStats","write","number","toFixed",18,"RoundRobin","mapServers","empty","x","y","roundRobinSort","find","isValidURI","uri","mapServer","./roundrobin","./server",19,"locks","queues","state","getSync","task","queue",20,"toStr","toString","Array","hasOwn","hasOwnProperty","Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","obj","ms","setTimeout","str","base","notEmpty","objIterator","extender","merger","target","iterator","eachArgument",21,22,"root","factory","Event","lil","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents",23,"slicer","hasBind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","auth","withCredentials","responseType","assign","cur","setHeaders","defaultContent","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","split","header","isJSONResponse","getResponseHeader","encodeParams","getOwnPropertyNames","encodeURIComponent","replace","parseData","responseText","response","getStatus","buildResponse","statusText","buildErrorResponse","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","onLoad","config","ev","isCrossOrigin","match","getURL","XHRFactory","XMLHttpRequest","createClient","open","user","password","updateProgress","lengthComputable","loaded","hasContentTypeHeader","buildPayload","stringify","timeoutResolver","timeoutId","clearTimeout","progress","onprogress","requestFactory",24,"calls","toArray","runNext","end","remove","nargs"],"mappings":"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"}