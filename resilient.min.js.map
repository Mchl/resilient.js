{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","map","getAllResponseHeaders","split","forEach","header","trim","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","value","encodeURIComponent","join","replace","parseData","data","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","getURL","config","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","isArray","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","key","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","emit","requester","delete","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","once","finalHandler","res","merge","isURI","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","cache","parallel","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","_queue","dispatcher","splice","resolve","push","update","fetch","handler","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","bind","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"getServersList","operation","sort","getOperation","serversList","nextServer","previousError","server","shift","basePath","requestHandler","sendRequest","handleMissingServers","delayRetry","hasDiscoveryServers","updateAndRetry","delay","start","requestReport","isErrorResponse","reportError","report","getHttpClient","onRetry","_httpClient","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","discoveryServers","list","getUpdatedServers","latestServers","discoverServers","urls","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","VERBS","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServers","getRefreshServers","getRefreshOptions","onRefreshServers","outdate","serversAreUpdated","updated","handleResolution","getRefreshBasePath",14,"arr","size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"Server","setStats","setOptions","stats","getStats","calculateAvgLatency","getBalance","applyOptions","calculateStatsBalance","read","createStats","write","getWeightAvg","number",16,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","index","concat","onUpdateInParallel","closePendingRequests","floor","_time","isEmptyBuffer","closePendingRequest","closeClient","abort",17,"RoundRobin","force","y","roundRobinSort","find","mapServers","empty","forceUpdate","isValidURI","uri","mapServer","./roundrobin","./server",18,"Function","isArrayNative","uriRegex","Date","getTime","ctx","fn","obj","ms","setTimeout","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}