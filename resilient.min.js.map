{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","Cache","this","store","Object","create","prototype","flush","key","emptyObject","get","clone","set","data","time","now","value","exists","isObj","isArr","./utils",2,"resolver","http","Client","_resilient","path","options","cb","send","post","put","del","delete","patch","head","method","args","normalizeArgs","requester","apply","emit","isFullUrlSchema","plainHttpRequest","arguments","mergeHttpOptions","noop","wrapCallback","once","finalRequestHandler","err","res","defaults","timeout","$timeout","merge","isURI","url","_httpClient","fn","called","./http","./resolver",3,"service","timeouts","servers","retry","waitBeforeRetry","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","roundRobin","roundRobinSize","weight","success","error","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","enableSelfRefresh","forceRefreshOnStart","refreshServersInterval","refreshServers","refreshOptions","refreshPath","resilientOptions",4,"Servers","Requester","ResilientError","CONCURRENCY","ServersDiscovery","middleware","_middleware","getOptions","getServers","hasDiscoveryServers","updateServersInParallel","buf","sort","pending","counter","onServersUpdateFn","onUpdateServers","onUpdateInParallelFn","onUpdateInParallel","slice","forEach","server","index","pool","concat","updateServers","next","fetchServers","params","addTimeStamp","run","handler","total","decrement","reset","extend","qs","_time","closeAndEmptyPendingRequests","isEmptyBuffer","closePendingRequest","splice","client","xhr","readyState","closeClient","abort","filter","request","./error","./requester","./servers",5,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,1007,"status","stack","message",6,"Evaluator","strategies","add","strategy","push","eval","some",7,"IS_BROWSER","JSON_MIME","resolveModule","HttpClient","VERSION","mapResponse","body","statusCode","isJSONContent","JSON","parse","test","headers","mapOptions","mapRequestBody","defineUserAgent","getUserAgent","LIBRARY_VERSION","json","requestWrapper","lil-http",8,"Options","Resilient","CLIENT_VERSION","./client","./defaults","./options","./resilient",9,"midware","hooks","Middleware","createPool","use","middlewares","toArr","isFn","map","passArgs","register","type","hook","hooksMiddleware","in","out","mw","opts",10,"omit","getRaw","setServers","each","bind","undefined","defaultOptions","keys",11,"operation","getOperation","serversList","getServersList","requestNextServer","previousError","shift","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","getPreviousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","onRetry","retrier","updateDiscoveryServersAndRetry","delay","retryWait","resolve","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","mapAndResolve","resolution","join","basePath","getTimeout","toLowerCase","arr","v","pop","_sync","unlock","DiscoveryResolver","update","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","indexOf","toUpperCase","m","trim","isUnavailableStatus","_failStrategies","isErrorStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","Sync","cache","_client","_options","list","serversURL","urls","discoveryServers","resetScore","resetStats","latestServers","getUpdatedServers","discoverServers","discoveryOptions","serviceOptions","httpOptions","useHttpClient","restoreHttpClient","serversUpdated","updated","lastUpdate","refresh","mock","mockFn","unmock","failStrategy","addFailStrategy","defineMethodProxy","verb","./cache","./evaluator","./middleware","./resolvers/discovery","./sync","lil-event",13,"Resolver","wrapHandler","sync","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServiceServers","updateServiceServers","getRefreshServers","getRefreshOptions","locked","enqueue","onRefreshServers","lock","dequeue","mErr","refreshDiscoveryServers","outdated","canUpdateDiscoveryServers","serversAreUpdated","interval","handleResolution","_cache","getRefreshBasePath","./discovery",14,"ServiceResolve","fetch","fetchHandler","../discovery","../error","../requester","./service",15,"isCacheEnabled","getCache","name","saveServers","refreshCache","errorHandler","resolveFromCache","resolveWithError","hasValidCache","expires","handleResponse","done","isValidResponse","defineServers","valid","parseAsJSON","../utils",16,"roundRobinSerie","size","getRandom","ps","k","j","rs","max","Math","round","random",17,"balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","field","statsStore","createServerStats","read","createStats","write","number","toFixed",18,"RoundRobin","mapServers","empty","x","y","roundRobinSort","find","isValidURI","uri","mapServer","./roundrobin","./server",19,"locks","queues","state","getSync","task","queue",20,"toStr","toString","Array","hasOwn","hasOwnProperty","Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","obj","ms","setTimeout","str","base","notEmpty","objIterator","extender","merger","target","iterator","eachArgument",21,22,"root","factory","Event","lil","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents",23,"slicer","hasBind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","auth","withCredentials","responseType","assign","cur","setHeaders","defaultContent","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","split","header","isJSONResponse","getResponseHeader","encodeParams","getOwnPropertyNames","encodeURIComponent","replace","parseData","responseText","response","getStatus","buildResponse","statusText","buildErrorResponse","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","onLoad","config","ev","isCrossOrigin","match","getURL","XHRFactory","XMLHttpRequest","createClient","open","user","password","updateProgress","lengthComputable","loaded","hasContentTypeHeader","buildPayload","stringify","timeoutResolver","timeoutId","clearTimeout","progress","onprogress","requestFactory",24,"calls","toArray","runNext","end","remove","nargs"],"mappings":"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"}