{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","hasBind","Function","bind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","data","headers","withCredentials","responseType","isObj","assign","target","x","cur","args","arguments","once","fn","called","apply","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","trim","split","forEach","header","key","shift","value","join","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","map","encodeURIComponent","replace","parseData","responseText","JSON","parse","response","getStatus","status","buildResponse","statusText","readyState","buildErrorResponse","error","stack","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","cb","err","onLoad","config","ev","isCrossOrigin","url","match","getURL","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","lengthComputable","loaded","total","hasContentTypeHeader","buildPayload","isArray","stringify","timeoutResolver","timeoutId","clearTimeout","request","progress","errorHandler","setTimeout","abort","onprogress","send","requestFactory","options","get","post","put","del","patch","head",2,"_","Cache","store","flush","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","requester","delete","emit","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","finalHandler","res","merge","isURI","_httpClient","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","_queue","dispatcher","splice","resolve","push","update","fetch","handler","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","cache","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse","parseAsJSON",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"message","create",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"getServersList","operation","sort","getOperation","serversList","requestNextServer","previousError","server","basePath","requestHandler","resolveRequest","sendRequest","handleMissingServers","previousResponse","shouldOmitRetryCycle","getFirstValue","waitBeforeRetry","hasDiscoveryServers","updateAndRetry","delay","nextServer","start","requestReporter","shouldOmitFallbackOnErrorCode","reportError","isErrorResponse","shouldOmitFallbackOnMethod","memoizeReponse","report","getHttpClient","mapAndResolve","resolution","arr","v","onRetry","shouldOmitOnErrorCode","shouldOmitOnMethod","methods","codes","matchHttpMethod","m","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","discoveryServers","list","resetScore","resetStats","getUpdatedServers","latestServers","discoverServers","urls","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","refreshDiscoveryServers","outdated","serversAreUpdated","updated","handleResolution","getRefreshBasePath",14,"size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","statsStore","createServerStats","read","createStats","write","getWeightAvg","number",16,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","counter","decrement","reset","pending","index","concat","onUpdateInParallel","closePendingRequests","floor","extend","_time","isEmptyBuffer","closePendingRequest","closeClient",17,"RoundRobin","forceUpdate","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",18,"isArrayNative","uriRegex","Date","getTime","ctx","obj","ms","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}