{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","Cache","this","store","emptyObject","prototype","flush","key","get","clone","time","exists","value","isObj","isArr","data","set","now","./utils",2,"resolver","http","Client","_resilient","path","options","cb","send","post","put","del","delete","patch","head","method","args","normalizeArgs","requester","apply","emit","isFullUrlSchema","plainHttpRequest","arguments","mergeHttpOptions","noop","wrapCallback","once","finalRequestHandler","err","res","defaults","timeout","$timeout","merge","isURI","url","_httpClient","fn","called","./http","./resolver",3,"Object","create","service","timeouts","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","roundRobin","roundRobinSize","weight","success","error","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",4,"ResilientError","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","state","_state","resolve","finish","unlockAndDispatchQueue","updateServers","lock","locked","enqueue","update","fetch","handler","queue","dequeue","unlock","forEach","dispatcher","./discovery-servers","./error","./requester","./servers-discovery",5,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","cache","getCache","hasValidCache","status","_cache","expires","name","defineServers","isValidResponse","valid","parseAsJSON","JSON","parse",6,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"stack","request","message",7,"resolveModule","JSON_MIME","HttpClient","VERSION","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","params","qs","mapRequestBody","test","headers","getUserAgent","LIBRARY_VERSION","json","lil-http",8,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",9,"Servers","type","each","bind","undefined","omit","getRaw","defaultOptions","keys","defineDefaults","buf","./servers",10,"operation","getOperation","serversList","getServersList","requestNextServer","previousError","server","shift","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","sort","getPreviousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","waitBeforeRetry","retrier","updateDiscoveryServersAndRetry","delay","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","push","mapAndResolve","resolution","join","basePath","getTimeout","toLowerCase","arr","filter","v","slice","onRetry","hasDiscoveryServers","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","indexOf","m","map","toUpperCase","trim","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",11,"State","EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","serversURL","urls","discoveryServers","list","resetScore","resetStats","getUpdatedServers","latestServers","discoverServers","flushCache","useHttpClient","client","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","./state","lil-event",12,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServiceServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","unlockAndDispatchDiscoveryQueue","refreshDiscoveryServers","outdated","canUpdateDiscoveryServers","handleResolution","serversAreUpdated","updated","getRefreshBasePath",13,"size","getRandom","ps","k","j","rs","splice","pop","max","Math","round","random",14,"balancerOptions","Server","stats","calculateAvgLatency","balance","total","calculateStatsBalance","field","statsStore","createServerStats","read","createStats","write","getWeightAvg","number",15,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","pending","counter","index","concat","onUpdateInParallel","decrement","reset","extend","_time","closeAndEmptyPendingRequests","isEmptyBuffer","closePendingRequest","xhr","readyState","closeClient","abort",16,"RoundRobin","x","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",17,"isArray","locks","queues","getState","task",18,"toStr","toString","Array","hasOwn","hasOwnProperty","Function","isArrayNative","uriRegex","Date","getTime","ctx","obj","ms","setTimeout","str","base","part","objIterator","extender","merger","target","iterator","iterateEachArgument",19,20,"root","factory","Event","lil","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents",21,"slicer","hasBind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","auth","withCredentials","responseType","assign","cur","setHeaders","defaultContent","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","split","header","isJSONResponse","getResponseHeader","encodeParams","getOwnPropertyNames","encodeURIComponent","replace","parseData","responseText","response","getStatus","buildResponse","statusText","buildErrorResponse","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","onLoad","config","ev","isCrossOrigin","match","getURL","XHRFactory","XMLHttpRequest","createClient","open","user","password","updateProgress","lengthComputable","loaded","hasContentTypeHeader","buildPayload","stringify","timeoutResolver","timeoutId","clearTimeout","progress","errorHandler","onprogress","requestFactory"],"mappings":"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"}