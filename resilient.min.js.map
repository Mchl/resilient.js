{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","isArr","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","map","getAllResponseHeaders","split","forEach","header","trim","parseData","data","contentType","getResponseHeader","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","createClient","config","toUpperCase","XMLHttpRequest","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","key","clone","time","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","emit","requester","isFullUrl","plainHttp","mergeHttpOptions","wrapCallback","res","getHttpOptions","merge","isURI","./http","./resolver",4,"service","servers","retry","retryWait","updateOnRetry","refresh","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","cache","parallel","cacheExpiration","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","DiscoveryResolver","getOptions","getServers","isUpdating","_updating","hasDiscoveryServers","exists","_queue","push","updateServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","buf","sort","server","index","concat","onUpdateInParallel","isEmptyBuffer","splice","closePendingRequests","client","close","update","fetch","indexOf","Math","floor","random","abort","filter","./discovery-servers","./error","./requester","./servers",6,"defineServers","handlerError","isValidResponse","saveServers","setServers","refreshCache","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires","name",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","mapResponse","requestWrapper","setUserAgent","body","statusCode","isJSONContent","getUserAgent","LIBRARY_VERSION","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","getRaw","each","value","bind","undefined","omit","defaultOptions","keys","defineDefaults",11,"getServersList","operation","enabled","getOperation","serversList","next","previousError","shift","join","basePath","sendRequest","requestHandler","handleMissingServers","delayRetry","delay","discoveryServers","start","isUnavailableStatus","reportError","report","resolve","handler","getHttpClient","_httpClient","isInvalidStatus",12,"EventBus","VERBS","_client","setOptions","setDiscoveryOptions","setServiceOptions","list","discoverServers","flushCache","setHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","hasServers","isUpToDate","handleResolution",14,"arr","size","RoundRobin","getRandom","ps","k","j","rs","pop","max","round",15,"Server","setStats","stats","getStats","calculateAvgLatency","getBalance","applyOptions","balance","read","createStats","write","number",16,"updated","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",17,"Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","fn","obj","objIterator","extender","merger","ms","setTimeout","str","test","base","part","iterator","eachArgument",18,19,"Event","constructor","addListener","on","event","once","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}