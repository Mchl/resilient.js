{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","isArr","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","map","getAllResponseHeaders","split","forEach","header","trim","parseData","data","contentType","getResponseHeader","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","createClient","config","toUpperCase","XMLHttpRequest","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","key","clone","time","exists","value","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","emit","requester","isFullUrl","plainHttp","mergeHttpOptions","wrapCallback","res","getHttpOptions","merge","isURI","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","cache","refresh","parallel","cacheExpiration","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","DiscoveryResolver","getOptions","getServers","isUpdating","_updating","hasDiscoveryServers","_queue","push","updateServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","buf","sort","server","index","concat","onUpdateInParallel","isEmptyBuffer","splice","closePendingRequests","client","close","update","fetch","indexOf","Math","floor","random","abort","filter","./discovery-servers","./error","./requester","./servers",6,"defineServers","handlerError","isValidResponse","saveServers","setServers","refreshCache","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires","name",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","mapResponse","requestWrapper","setUserAgent","body","statusCode","isJSONContent","getUserAgent","LIBRARY_VERSION","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","getRaw","each","bind","undefined","omit","defaultOptions","keys","defineDefaults",11,"getServersList","operation","getOperation","serversList","next","previousError","shift","join","basePath","sendRequest","requestHandler","handleMissingServers","delayRetry","delay","discoveryServers","start","isUnavailableStatus","reportError","report","resolve","handler","getHttpClient","_httpClient","isInvalidStatus",12,"EventBus","VERBS","_client","setOptions","setDiscoveryOptions","setServiceOptions","list","discoverServers","flushCache","setHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","hasServers","isUpToDate","updated","forceUpdate","handleResolution",14,"arr","size","RoundRobin","getRandom","ps","k","j","rs","pop","max","round",15,"Server","setStats","stats","getStats","calculateAvgLatency","getBalance","applyOptions","balance","calculateStatsBalance","read","createStats","write","getWeightAvg","number",16,"force","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",17,"Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","fn","obj","objIterator","extender","merger","ms","setTimeout","str","test","base","part","iterator","eachArgument",18,19,"Event","constructor","addListener","on","event","once","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}