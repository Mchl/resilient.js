{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","isArr","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","map","getAllResponseHeaders","split","forEach","header","trim","parseData","data","contentType","getResponseHeader","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","createClient","config","toUpperCase","XMLHttpRequest","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","key","clone","time","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","emit","requester","isFullUrl","plainHttp","mergeHttpOptions","wrapCallback","res","getHttpOptions","isURI","./http","./resolver",4,"service","servers","retry","retryWait","updateOnRetry","refresh","balancer","enable","weight","latency","discovery","cache","parallel","cacheExpiration","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","DiscoveryResolver","getOptions","getServers","isUpdating","_updating","hasDiscoveryServers","exists","_queue","push","updateServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","buf","sort","server","index","concat","onUpdateInParallel","isEmptyBuffer","splice","closePendingRequests","client","close","update","fetch","indexOf","Math","floor","random","abort","filter","./discovery-servers","./error","./requester","./servers",6,"defineServers","handlerError","isValidResponse","saveServers","setServers","refreshCache","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires","name",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","requestWrapper","setUserAgent","body","mapResponse","statusCode","isJSONContent","getUserAgent","LIBRARY_VERSION","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","getRaw","each","value","bind","undefined","omit","defaultOptions","keys","defineDefaults",11,"getServersList","operation","enabled","getOperation","serversList","next","previousError","shift","join","basePath","sendRequest","requestHandler","handleMissingServers","delayRetry","delay","discoveryServers","start","isUnavailableStatus","reportError","report","handler","isInvalidStatus",12,"EventBus","VERBS","_client","setOptions","setDiscoveryOptions","setServiceOptions","list","discoverServers","flushCache","areServersUpdated","lastUpdate","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","resolve","hasServers","isUpToDate","handleResolution",14,"Server","setStats","stats","getStats","calculateAvgLatency","getBalance","balance","round","read","createStats","write","number",15,"updated","y","find","mapServers","empty","isValidURI","uri","mapServer","./server",16,"Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","fn","obj","ms","setTimeout","str","test","base","part",17,18,"Event","constructor","addListener","on","event","once","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}