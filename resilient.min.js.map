{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","map","getAllResponseHeaders","split","forEach","header","trim","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","value","encodeURIComponent","join","replace","parseData","data","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","getURL","config","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","isArray","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","key","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","emit","requester","delete","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","once","finalHandler","res","merge","isURI","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","cache","parallel","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","_queue","dispatcher","splice","resolve","push","update","fetch","handler","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","bind","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"getServersList","operation","sort","getOperation","serversList","requestNextServer","previousError","server","shift","basePath","requestHandler","sendRequest","handleMissingServers","waitBeforeRetry","hasDiscoveryServers","updateAndRetry","delay","nextServer","start","requestReporter","isErrorResponse","reportError","report","getHttpClient","onRetry","_httpClient","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","discoveryServers","list","getUpdatedServers","latestServers","discoverServers","urls","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","refreshDiscoveryServers","outdated","serversAreUpdated","updated","handleResolution","getRefreshBasePath",14,"arr","size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"balancerOptions","Server","statsStore","createServerStats","stats","calculateAvgLatency","balance","calculateStatsBalance","read","createStats","write","getWeightAvg","number",16,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","index","concat","onUpdateInParallel","closePendingRequests","floor","_time","isEmptyBuffer","closePendingRequest","closeClient","abort",17,"RoundRobin","forceUpdate","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",18,"Function","isArrayNative","uriRegex","Date","getTime","ctx","fn","obj","ms","setTimeout","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}