{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","isArr","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","map","getAllResponseHeaders","split","forEach","header","trim","parseData","data","contentType","getResponseHeader","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","createClient","config","toUpperCase","XMLHttpRequest","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","key","clone","time","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","emit","requester","isFullUrl","plainHttp","mergeHttpOptions","wrapCallback","res","getHttpOptions","merge","isURI","./http","./resolver",4,"service","servers","retry","retryWait","updateOnRetry","refresh","balancer","enable","roundRobin","roundRobinSize","weight","latency","discovery","cache","parallel","cacheExpiration","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","DiscoveryResolver","getOptions","getServers","isUpdating","_updating","hasDiscoveryServers","exists","_queue","push","updateServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","buf","sort","server","index","concat","onUpdateInParallel","isEmptyBuffer","splice","closePendingRequests","client","close","update","fetch","indexOf","Math","floor","random","abort","filter","./discovery-servers","./error","./requester","./servers",6,"defineServers","handlerError","isValidResponse","saveServers","setServers","refreshCache","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires","name",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","requestWrapper","setUserAgent","body","mapResponse","statusCode","isJSONContent","getUserAgent","LIBRARY_VERSION","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","getRaw","each","value","bind","undefined","omit","defaultOptions","keys","defineDefaults",11,"getServersList","operation","enabled","getOperation","serversList","next","previousError","shift","join","basePath","sendRequest","requestHandler","handleMissingServers","delayRetry","delay","discoveryServers","start","isUnavailableStatus","reportError","report","handler","isInvalidStatus",12,"EventBus","VERBS","_client","setOptions","setDiscoveryOptions","setServiceOptions","list","discoverServers","flushCache","areServersUpdated","lastUpdate","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","resolve","hasServers","isUpToDate","handleResolution",14,"arr","size","RoundRobin","getRandom","ps","k","j","rs","pop","max","round",15,"Server","setStats","stats","getStats","calculateAvgLatency","getBalance","applyOptions","balance","read","createStats","write","number",16,"updated","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",17,"Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","fn","obj","objIterator","extender","merger","ms","setTimeout","str","test","base","part","iterator","eachArgument",18,19,"Event","constructor","addListener","on","event","once","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}