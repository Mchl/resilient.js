{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","Cache","this","store","Object","create","prototype","flush","key","emptyObject","get","clone","time","exists","value","isObj","isArr","data","set","now","./utils",2,"resolver","http","Client","_resilient","path","options","cb","send","post","put","del","delete","patch","head","method","args","normalizeArgs","requester","apply","emit","isFullUrlSchema","plainHttpRequest","arguments","mergeHttpOptions","noop","wrapCallback","once","finalRequestHandler","err","res","defaults","timeout","$timeout","merge","isURI","url","_httpClient","fn","called","./http","./resolver",3,"service","timeouts","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","roundRobin","roundRobinSize","weight","success","error","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",4,"ResilientError","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","state","_state","resolve","finish","unlockAndDispatchQueue","updateServers","lock","locked","enqueue","update","fetch","handler","queue","dequeue","unlock","forEach","dispatcher","./discovery-servers","./error","./requester","./servers-discovery",5,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","cache","getCache","hasValidCache","status","_cache","expires","name","defineServers","isValidResponse","valid","parseAsJSON","JSON","parse",6,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"stack","request","message",7,"IS_BROWSER","JSON_MIME","resolveModule","HttpClient","VERSION","mapResponse","body","statusCode","isJSONContent","mapOptions","setUserAgent","params","qs","mapRequestBody","test","headers","getUserAgent","LIBRARY_VERSION","json","requestWrapper","lil-http",8,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",9,"Servers","type","omit","each","bind","undefined","getRaw","defaultOptions","keys","defineDefaults","buf","./servers",10,"operation","getOperation","serversList","getServersList","requestNextServer","previousError","server","shift","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","sort","getPreviousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","waitBeforeRetry","retrier","updateDiscoveryServersAndRetry","delay","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","push","mapAndResolve","resolution","join","basePath","getTimeout","toLowerCase","arr","filter","v","slice","onRetry","hasDiscoveryServers","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","indexOf","m","map","toUpperCase","trim","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",11,"State","EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","serversURL","urls","discoveryServers","list","resetScore","resetStats","getUpdatedServers","latestServers","discoverServers","flushCache","useHttpClient","client","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","./state","lil-event",12,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServiceServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","unlockAndDispatchDiscoveryQueue","refreshDiscoveryServers","outdated","canUpdateDiscoveryServers","handleResolution","serversAreUpdated","updated","getRefreshBasePath",13,"size","getRandom","ps","k","j","rs","splice","pop","max","Math","round","random",14,"balancerOptions","Server","stats","calculateAvgLatency","balance","total","calculateStatsBalance","field","statsStore","createServerStats","read","createStats","write","getWeightAvg","number",15,"MAX_PARALLEL","getOptions","getServers","updateServersInParallel","pending","counter","handleServersUpdate","onUpdateServers","onUpdateInParallelFn","onUpdateInParallel","index","concat","fetchServers","addTimeStamp","decrement","reset","extend","_time","closeAndEmptyPendingRequests","isEmptyBuffer","closePendingRequest","xhr","readyState","closeClient","abort",16,"RoundRobin","x","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",17,"isArray","locks","queues","getState","task",18,"toStr","toString","Array","hasOwn","hasOwnProperty","Function","isArrayNative","uriRegex","Date","getTime","ctx","obj","ms","setTimeout","str","base","part","objIterator","extender","merger","target","iterator","iterateEachArgument",19,20,"root","factory","Event","lil","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents",21,"slicer","hasBind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","auth","withCredentials","responseType","assign","cur","setHeaders","defaultContent","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","split","header","isJSONResponse","getResponseHeader","encodeParams","getOwnPropertyNames","encodeURIComponent","replace","parseData","responseText","response","getStatus","buildResponse","statusText","buildErrorResponse","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","onLoad","config","ev","isCrossOrigin","match","getURL","XHRFactory","XMLHttpRequest","createClient","open","user","password","updateProgress","lengthComputable","loaded","hasContentTypeHeader","buildPayload","stringify","timeoutResolver","timeoutId","clearTimeout","progress","errorHandler","onprogress","requestFactory"],"mappings":"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"}