{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","hasBind","Function","bind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","data","headers","withCredentials","responseType","isObj","assign","target","x","cur","args","arguments","once","fn","called","apply","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","trim","split","forEach","header","key","shift","value","join","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","map","encodeURIComponent","replace","parseData","responseText","JSON","parse","response","getStatus","status","buildResponse","statusText","readyState","buildErrorResponse","error","stack","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","cb","err","onLoad","config","ev","isCrossOrigin","url","match","getURL","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","lengthComputable","loaded","total","hasContentTypeHeader","buildPayload","isArray","stringify","timeoutResolver","timeoutId","clearTimeout","request","progress","errorHandler","setTimeout","abort","onprogress","send","requestFactory","options","get","post","put","del","patch","head",2,"_","Cache","store","emptyObject","flush","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","requester","delete","emit","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","finalRequestHandler","res","$timeout","merge","isURI","_httpClient","./http","./resolver",4,"create","service","timeouts","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","state","_state","resolve","finish","unlockAndDispatchQueue","updateServers","lock","locked","enqueue","update","fetch","handler","queue","dequeue","unlock","dispatcher","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","cache","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse","parseAsJSON",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"message",8,"resolveModule","JSON_MIME","HttpClient","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"operation","getOperation","serversList","getServersList","requestNextServer","previousError","server","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","sort","getPreviousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","waitBeforeRetry","retrier","updateDiscoveryServersAndRetry","delay","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","push","mapAndResolve","resolution","basePath","getTimeout","toLowerCase","arr","v","onRetry","hasDiscoveryServers","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","m","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"State","EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","serversURL","urls","discoveryServers","list","resetScore","resetStats","getUpdatedServers","latestServers","discoverServers","flushCache","useHttpClient","client","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","./state","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServiceServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","unlockAndDispatchDiscoveryQueue","refreshDiscoveryServers","outdated","canUpdateDiscoveryServers","handleResolution","serversAreUpdated","updated","getRefreshBasePath",14,"size","getRandom","ps","k","j","rs","splice","pop","max","Math","round","random",15,"balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","statsStore","createServerStats","read","createStats","write","getWeightAvg","number",16,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","pending","counter","index","concat","onUpdateInParallel","decrement","reset","extend","_time","closeAndEmptyPendingRequests","isEmptyBuffer","closePendingRequest","closeClient",17,"RoundRobin","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",18,"locks","queues","getState","task",19,"isArrayNative","uriRegex","Date","getTime","ctx","obj","ms","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",20,21,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}