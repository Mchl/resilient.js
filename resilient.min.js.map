{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","map","getAllResponseHeaders","split","forEach","header","trim","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","value","encodeURIComponent","join","replace","parseData","data","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","getURL","config","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","isArray","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","key","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","emit","requester","isFullUrl","plainHttpRequest","mergeHttpOptions","wrapCallback","res","getOptions","merge","isURI","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","cache","refresh","parallel","cacheExpiration","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","DiscoveryResolver","getServers","isUpdating","_updating","hasDiscoveryServers","_queue","push","updateServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","buf","sort","server","index","concat","onUpdateInParallel","dispatchQueue","closePendingRequests","splice","isEmptyBuffer","client","close","update","fetch","Math","floor","random","abort","./discovery-servers","./error","./requester","./servers",6,"defineServers","handlerError","isValidResponse","saveServers","setServers","refreshCache","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","mapResponse","requestWrapper","setUserAgent","body","statusCode","isJSONContent","getUserAgent","LIBRARY_VERSION","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","getRaw","each","bind","omit","defaultOptions","keys","defineDefaults",11,"getServersList","operation","getOperation","serversList","next","previousError","shift","basePath","sendRequest","requestHandler","handleMissingServers","delayRetry","delay","start","isErrorResponse","reportError","report","resolve","isErrorStatus","isUnavailableStatus","handler","getHttpClient","_httpClient","isInvalidStatus","checkResponseStatus",12,"EventBus","VERBS","_client","setOptions","setDiscoveryOptions","setServiceOptions","getHttpOptions","discoveryServers","list","discoverServers","getUpdatedServers","getLatestServers","urls","flushCache","setHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","hasServers","isUpToDate","updated","forceUpdate","handleResolution",14,"arr","size","RoundRobin","getRandom","ps","k","j","rs","pop","max","round",15,"Server","setStats","stats","getStats","calculateAvgLatency","getBalance","applyOptions","calculateStatsBalance","read","createStats","write","getWeightAvg","number",16,"force","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",17,"Function","isArrayNative","uriRegex","Date","getTime","ctx","fn","obj","once","objIterator","extender","merger","ms","setTimeout","str","base","part","iterator","eachArgument",18,19,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}