{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","Cache","this","store","Object","create","prototype","flush","key","emptyObject","get","clone","set","data","time","now","value","exists","isObj","isArr","./utils",2,"resolver","http","Client","_resilient","path","options","cb","send","post","put","del","delete","patch","head","method","args","normalizeArgs","opts","callback","Promise","resolve","reject","emit","requester","apply","err","res","bind","isFullUrlSchema","plainHttpRequest","arguments","mergeHttpOptions","noop","wrapCallback","once","finalRequestHandler","defaults","timeout","$timeout","merge","isURI","url","_httpClient","fn","called","./http","./resolver",3,"service","timeouts","servers","retry","waitBeforeRetry","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","random","roundRobin","roundRobinSize","balanceStrategy","disableWeight","weight","success","error","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","enableSelfRefresh","forceRefreshOnStart","refreshServersInterval","refreshServers","refreshOptions","refreshPath","resilientOptions",4,"Servers","Requester","ResilientError","CONCURRENCY","ServersDiscovery","middleware","_middleware","getOptions","getServers","hasDiscoveryServers","updateServersInParallel","buf","sort","pending","counter","onServersUpdateFn","onUpdateServers","onUpdateInParallelFn","onUpdateInParallel","slice","forEach","server","index","pool","concat","updateServers","next","fetchServers","params","addTimeStamp","run","handler","total","decrement","reset","extend","qs","_time","closeAndEmptyPendingRequests","isEmptyBuffer","closePendingRequest","splice","client","xhr","readyState","closeClient","abort","filter","request","./error","./requester","./servers",5,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,1007,"status","stack","message",6,"Evaluator","strategies","add","strategy","push","eval","some",7,"IS_BROWSER","JSON_MIME","resolveModule","HttpClient","VERSION","mapResponse","body","statusCode","isJSONContent","JSON","parse","test","headers","mapOptions","mapRequestBody","defineUserAgent","getUserAgent","LIBRARY_VERSION","json","requestWrapper","lil-http",8,"Options","Resilient","CLIENT_VERSION","./client","./defaults","./options","./resilient",9,"midware","hooks","Middleware","createPool","use","middlewares","toArr","isFn","map","passArgs","register","type","hook","hooksMiddleware","in","out","mw",10,"omit","getRaw","setServers","each","undefined","defaultOptions","keys",11,"operation","getOperation","serversList","getServersList","requestNextServer","previousError","shift","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","getPreviousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","onRetry","retrier","updateDiscoveryServersAndRetry","delay","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","mapAndResolve","resolution","join","basePath","getTimeout","toLowerCase","arr","v","pop","_sync","unlock","DiscoveryResolver","update","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","indexOf","toUpperCase","m","trim","isUnavailableStatus","_failStrategies","isErrorStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","Sync","cache","_client","_options","list","serversURL","urls","discoveryServers","resetScore","resetStats","latestServers","getUpdatedServers","discoverServers","discoveryOptions","serviceOptions","httpOptions","useHttpClient","restoreHttpClient","serversUpdated","updated","lastUpdate","refresh","mock","mockFn","unmock","failStrategy","addFailStrategy","defineMethodProxy","verb","./cache","./evaluator","./middleware","./resolvers/discovery","./sync","lil-event",13,"Resolver","wrapHandler","sync","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServiceServers","updateServiceServers","getRefreshServers","getRefreshOptions","locked","enqueue","onRefreshServers","lock","dequeue","mErr","refreshDiscoveryServers","outdated","canUpdateDiscoveryServers","serversAreUpdated","interval","handleResolution","_cache","getRefreshBasePath","./discovery",14,"ServiceResolve","fetch","fetchHandler","../discovery","../error","../requester","./service",15,"isCacheEnabled","getCache","name","saveServers","refreshCache","errorHandler","resolveFromCache","resolveWithError","hasValidCache","expires","handleResponse","done","isValidResponse","defineServers","valid","parseAsJSON","../utils",16,"roundRobinSerie","size","max","rounds","ps","k","j","rs",17,"balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","field","statsStore","createServerStats","read","createStats","write","round","number","toFixed",18,"RoundRobin","mapServers","empty","x","y","shuffle","roundRobinSort","find","isValidURI","uri","mapServer","array","Math","temp","configSize","./roundrobin","./server",19,"locks","queues","state","getSync","task","queue",20,"toStr","toString","Array","hasOwn","hasOwnProperty","Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","obj","ms","setTimeout","str","base","notEmpty","objIterator","extender","merger","target","iterator","eachArgument",21,22,"root","factory","Event","lil","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents",23,"slicer","hasBind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","auth","withCredentials","responseType","assign","cur","setHeaders","defaultContent","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","split","header","isJSONResponse","getResponseHeader","encodeParams","getOwnPropertyNames","encodeURIComponent","replace","parseData","responseText","response","getStatus","buildResponse","statusText","buildErrorResponse","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","onLoad","config","ev","isCrossOrigin","match","getURL","XHRFactory","XMLHttpRequest","createClient","open","user","password","updateProgress","lengthComputable","loaded","hasContentTypeHeader","buildPayload","stringify","timeoutResolver","timeoutId","clearTimeout","progress","onprogress","requestFactory",24,"calls","toArray","runNext","end","remove","nargs"],"mappings":";CACC,SAASA,GAAG,GAAG,gBAAiBC,UAAS,mBAAoBC,QAAOA,OAAOD,QAAQD,QAAS,IAAG,kBAAmBG,SAAQA,OAAOC,IAAID,UAAUH,OAAO,CAAC,GAAIK,EAAE,oBAAoBC,QAAOD,EAAEC,OAAO,mBAAoBC,QAAOF,EAAEE,OAAO,mBAAoBC,QAAOH,EAAEG,MAAMH,EAAEI,UAAUT,MAAM,WAAW,GAAIG,GAAOD,EAAOD,CAAQ,OAAO,SAAUD,GAAEU,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,SAASC,UAAS,YAAYA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAG,EAAG,IAAGI,EAAE,MAAOA,GAAEJ,GAAG,EAAG,IAAIT,GAAE,GAAIc,OAAM,uBAAuBL,EAAE,IAAK,MAAMT,GAAEe,KAAK,mBAAmBf,EAAE,GAAIgB,GAAEV,EAAEG,IAAIb,WAAYS,GAAEI,GAAG,GAAGQ,KAAKD,EAAEpB,QAAQ,SAASD,GAAG,GAAIW,GAAED,EAAEI,GAAG,GAAGd,EAAG,OAAOa,GAAEF,EAAEA,EAAEX,IAAIqB,EAAEA,EAAEpB,QAAQD,EAAEU,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGb,QAAQ,GAAIiB,SAASD,UAAS,YAAYA,OAAQ,KAAI,GAAIH,GAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKW,GAAG,SAASP,EAAQf,EAAOD,GAC9xB,GAAIwB,GAAIR,EAAQ,UAEhBf,GAAOD,QAAUyB,CAEjB,SAASA,KACPC,KAAKC,MAAQC,OAAOC,OAAO,MAG7BJ,EAAMK,UAAUC,MAAQ,SAAUC,GAChC,GAAIA,EAAK,CACPN,KAAKC,MAAMK,GAAO,SACb,CACLN,KAAKC,MAAQH,EAAES,eAInBR,GAAMK,UAAUI,IAAM,SAAUF,GAC9B,MAAOA,GAAMN,KAAKC,MAAMK,GAAOR,EAAEW,MAAMT,KAAKC,OAG9CF,GAAMK,UAAUM,IAAM,SAAUJ,EAAKK,GACnC,GAAIL,EAAK,CACPN,KAAKC,MAAMK,IAASK,KAAMA,EAAMC,KAAMd,EAAEe,QAI5Cd,GAAMK,UAAUQ,KAAO,SAAUN,GAC/B,GAAIQ,GAAQd,KAAKC,MAAMK,EACvB,OAAOQ,GAAQA,EAAMF,KAAO,KAG9Bb,GAAMK,UAAUW,OAAS,SAAUT,GACjC,GAAIQ,GAAQd,KAAKC,MAAMK,EACvB,OAAOR,GAAEkB,MAAMF,KACZhB,EAAEmB,MAAMH,EAAMH,OAASG,EAAMH,KAAKf,OAAS,GAC5CE,EAAEkB,MAAMF,EAAMH,QACd,SAGDO,UAAU,KAAKC,GAAG,SAAS7B,EAAQf,EAAOD,GAC7C,GAAIwB,GAAIR,EAAQ,UAChB,IAAI8B,GAAW9B,EAAQ,aACvB,IAAI+B,GAAO/B,EAAQ,SAEnBf,GAAOD,QAAUgD,CAEjB,SAASA,GAAQxC,GACfkB,KAAKuB,WAAazC,EAGpBwC,EAAOlB,UAAUI,IAAM,SAAUgB,EAAMC,EAASC,GAC9C,MAAO1B,MAAK2B,KAAKH,EAAMC,EAASC,EAAI,OAGtCJ,GAAOlB,UAAUwB,KAAO,SAAUJ,EAAMC,EAASC,GAC/C,MAAO1B,MAAK2B,KAAKH,EAAMC,EAASC,EAAI,QAGtCJ,GAAOlB,UAAUyB,IAAM,SAAUL,EAAMC,EAASC,GAC9C,MAAO1B,MAAK2B,KAAKH,EAAMC,EAASC,EAAI,OAGtCJ,GAAOlB,UAAU0B,IACjBR,EAAOlB,UAAU2B,OAAS,SAAUP,EAAMC,EAASC,GACjD,MAAO1B,MAAK2B,KAAKH,EAAMC,EAASC,EAAI,UAGtCJ,GAAOlB,UAAU4B,MAAQ,SAAUR,EAAMC,EAASC,GAChD,MAAO1B,MAAK2B,KAAKH,EAAMC,EAASC,EAAI,SAGtCJ,GAAOlB,UAAU6B,KAAO,SAAUT,EAAMC,EAASC,GAC/C,MAAO1B,MAAK2B,KAAKH,EAAMC,EAASC,EAAI,QAGtCJ,GAAOlB,UAAUuB,KAAO,SAAUH,EAAMC,EAASC,EAAIQ,GACnD,GAAIC,GAAOC,EAAczC,KAAKK,KAAMwB,EAAMC,EAASC,EAAIQ,EACvD,IAAIG,GAAOF,EAAK,EAChB,IAAIG,GAAWH,EAAK,EAEpB,OAAO,IAAII,SAAQ,SAAUC,EAASC,GACpCzC,KAAKuB,WAAWmB,KAAK,gBAAiBjB,EAASzB,KAAKuB,WAEpDoB,GAAUC,MAAM5C,MAAOqC,EAAM,SAAUQ,EAAKC,GAC1C,GAAID,EAAK,CACPJ,EAAOI,OACF,CACLL,EAAQM,GAGVR,EAASO,EAAKC,OAEhBC,KAAK/C,OAGT,SAAS2C,GAAWlB,EAASC,GAC3B,GAAIsB,EAAgBvB,GAAU,CAC5B,MAAOwB,GAAiBjD,KAAKuB,WAAYE,EAASC,OAC7C,CACL,MAAON,GAASpB,KAAKuB,WAAYE,EAASC,IAI9C,QAASU,GAAeZ,EAAMC,EAASC,EAAIQ,GACzC,SAAWT,KAAY,WAAY,CACjCC,EAAKD,CACLA,GAAUyB,UAAU,GAGtBzB,EAAU0B,EAAiBnD,KAAKuB,WAAYzB,EAAEkB,MAAMS,GAAWA,EAAU3B,EAAES,cAE3E,UAAWiB,KAAS,SAAUC,EAAQD,KAAOA,CAC7C,UAAWU,KAAW,SAAUT,EAAQS,OAASA,CACjD,UAAWR,KAAO,WAAYA,EAAK5B,EAAEsD,IAErC,QAAS3B,EAAS4B,EAAarD,KAAKuB,WAAYG,IAGlD,QAAS2B,GAAcvE,EAAW4C,GAChC,MAAO4B,GAAK,QAASC,GAAqBV,EAAKC,GAC7ChE,EAAU4D,KAAK,iBAAkBG,EAAKC,EAAKhE,EAC3C4C,GAAGmB,EAAKC,KAIZ,QAASK,GAAkBrE,EAAW2C,GACpC,GAAI+B,GAAW1E,EAAU2C,QAAQ,WAAWjB,KAE5C,IAAIiB,EAAQgC,QAAS,CACnBhC,EAAQiC,SAAWjC,EAAQgC,QAG7B,MAAO3D,GAAE6D,MAAMH,EAAU/B,GAG3B,QAASuB,GAAiBvB,GACxB,MAAOA,KAAa3B,EAAE8D,MAAMnC,EAAQD,OAAS1B,EAAE8D,MAAMnC,EAAQoC,OAAU,MAGzE,QAASZ,GAAkBnE,EAAW2C,EAASC,GAC7C,GAAID,EAAQD,KAAM,CAChBC,EAAQoC,IAAMpC,EAAQD,IACtBC,GAAQD,KAAO,KAGjB,OAAQ1C,EAAUgF,aAAezC,GAAMI,EAASC,GAGlD,QAAS4B,GAAMS,GACb,GAAIC,GAAS,KACb,OAAO,YACL,GAAIA,IAAW,MAAO,CACpBA,EAAS,IACTD,GAAGnB,MAAM,KAAMM,gBAKlBe,SAAS,EAAEC,aAAa,GAAGhD,UAAU,KAAKiD,GAAG,SAAS7E,EAAQf,EAAOD,GACxE,GAAIkF,GAAWjF,EAAOD,QAAU4B,OAAOC,OAAO,KAE9CqD,GAASY,SACPlC,OAAQ,MACRuB,QAAS,GAAK,IACdY,SAAU,KACVC,QAAS,KACTC,MAAO,EACPC,gBAAiB,GACjBC,oBAAqB,KACrBC,kBAAmB,MACnBC,cAAe,KACfC,iBAAkB,KAClBC,mBAAoB,KACpBC,sBAAuB,KACvBC,sBAAuB,KACvBC,yBAA0B,KAG5BxB,GAASyB,UACPC,OAAQ,KACRC,OAAQ,MACRC,WAAY,MACZC,eAAgB,EAChBC,gBAAiB,KACjBC,cAAe,MACfC,QACEC,QAAS,GACTC,MAAO,GACPC,QAAS,IAIbnC,GAASoC,WACPtB,QAAS,KACTpC,OAAQ,MACRqC,MAAO,EACPsB,SAAU,KACVrB,gBAAiB,IACjBf,QAAS,EAAI,IACbqC,aAAc,KACdC,gBAAiB,GAAK,GAAK,IAC3BrB,kBAAmB,KACnBsB,gBAAiB,GAAK,EAAI,IAC1BC,qBAAsB,KACtBC,kBAAmB,MACnBC,oBAAqB,KACrBC,uBAAwB,GAAK,EAAI,IACjCC,eAAgB,KAChBC,eAAgB,KAChBC,YAAa,KACb5B,cAAe,KACfC,iBAAkB,KAClBC,mBAAoB,KACpBC,sBAAuB,KACvBC,sBAAuB,KACvBC,yBAA0B,KAG5BxB,GAASgD,kBACP,UACA,QACA,WACA,WACA,WACA,eACA,kBACA,kBACA,iBACA,iBACA,cACA,kBACA,oBACA,gBACA,mBACA,qBACA,wBACA,wBACA,2BACA,uBACA,yBACA,sBACA,oBACA,4BAGIC,GAAG,SAASnH,EAAQf,EAAOD,GACjC,GAAIwB,GAAIR,EAAQ,UAChB,IAAIoH,GAAUpH,EAAQ,YACtB,IAAIqH,GAAYrH,EAAQ,cACxB,IAAIsH,GAAiBtH,EAAQ,UAE7B,IAAIuH,GAAc,CAElBtI,GAAOD,QAAUwI,CAEjB,SAASA,GAAkBhI,EAAW2C,EAAS6C,GAC7C,GAAI3B,GAAYgE,EAAU7H,EAC1B,IAAIiI,GAAajI,EAAUkI,WAE3B,SAASC,KACP,MAAOnH,GAAE6D,MAAM7E,EAAU2C,QAAQ,aAAajB,MAAOiB,GAGvD,QAASyF,KACP,MAAO5C,IAAWxF,EAAUwF,QAAQ,aAGtC,QAAS6C,KACP,GAAI7C,GAAU4C,GACd,OAAO5C,IAAWA,EAAQvD,UAAY,MAGxC,QAASqG,GAAyB3F,EAASC,GACzC,GAAI2F,KACJ,IAAI/C,GAAU4C,IAAaI,KAAK,OAAQxI,EAAUmG,WAClD,IAAIsC,GAAUC,EAAQlD,EAAQ1E,OAE9B,IAAI6H,GAAoBC,EAAgBhG,EAAI2F,EAC5C,IAAIM,GAAuBC,EAAmBtD,EAASiD,EAASE,EAEhEnD,GAAQuD,MAAM,EAAGhB,GAAaiB,QAAQ,SAAUC,EAAQC,GACtD,GAAIC,IAASF,EACb,IAAIC,IAAU,GAAK1D,EAAQ1E,OAASiH,EAAa,CAC/CoB,EAAOA,EAAKC,OAAO5D,EAAQuD,MAAMhB,IAEnClE,EAAU,GAAI+D,GAAQuB,GAAOxG,EAASkG,EAAsBN,GAAK,QAIrE,QAASc,GAAe1G,EAAS2G,GAC/B,GAAI3G,EAAQoE,SAAU,CACpBuB,EAAwB3F,EAAS2G,OAC5B,CACLzF,EAAUuE,IAAczF,EAASiG,EAAgBU,IAAO,OAI5D,QAASC,GAAcD,GACrB,GAAI3G,GAAUwF,GACdxF,GAAQ6G,OAASC,EAAa9G,EAE9BsF,GAAWyB,IAAI,YAAa,OAAO/G,EAAS,SAAUoB,GACpD,GAAIA,EAAK,CACPuF,EAAK,GAAIxB,GAAe,KAAM/D,QACzB,CACLsF,EAAc1G,EAAS2G,MAK7B,MAAO,SAAShH,GAAUgH,GACxB,GAAIjB,MAA0B,MAAO,CACnCiB,EAAK,GAAIxB,GAAe,WACnB,CACLyB,EAAaD,KAKnB,QAASR,GAAoBtD,EAASkD,EAASY,GAC7C,MAAO,SAASK,GAAS5F,EAAKC,GAC5B,GAAIyE,GAAUC,GACd,IAAI3E,GAAO,MAAQ0E,IAAY,EAAG,CAChCC,EAAQ,KACRY,GAAKvF,EAAKC,KAKhB,QAAS0E,GAASkB,GAChBA,EAAQA,EAAQ,EAAI7B,EAAc6B,CAClC,OAAO,SAASC,GAAWC,GACzB,MAAQF,GAAQE,GAAS,EAAKF,EAAQ,GAI1C,QAASH,GAAc9G,GACrB,MAAO3B,GAAE+I,OAAOpH,EAAQ6G,QAAU7G,EAAQqH,QAAYC,MAAOjJ,EAAEe,QAGjE,QAAS6G,GAAiBhG,EAAI2F,GAC5B,MAAO,UAAUxE,EAAKC,GACpBkG,EAA6B3B,EAC7B3F,GAAGmB,GAAO,KAAMC,IAIpB,QAASkG,GAA8B3B,GACrC,GAAIA,EAAK,CACP,IAAK4B,EAAc5B,GAAM,CACvBA,EAAIS,QAAQoB,GAEd7B,EAAI8B,OAAO,IAIf,QAASD,GAAqBE,GAC5B,GAAIA,EAAQ,CACV,GAAIA,EAAOC,IAAK,CACd,GAAID,EAAOC,IAAIC,aAAe,EAAG,CAC/BC,EAAYH,EAAOC,UAEhB,CACLE,EAAYH,KAKlB,QAASG,GAAaH,GACpB,SAAWA,GAAOI,QAAU,WAAY,CACtC,IAAMJ,EAAOI,QAAU,MAAOnL,MAIlC,QAAS4K,GAAe5B,GACtB,MAAOA,GAAIoC,OAAO,SAAUC,GAAW,MAAO5J,GAAEkB,MAAM0I,KAAY9J,SAAW,KAG5E+J,UAAU,EAAEC,cAAc,GAAGC,YAAY,GAAG3I,UAAU,KAAK4I,GAAG,SAASxK,EAAQf,EAAOD,GACzFC,EAAOD,QAAUsI,CAEjB,IAAImD,IACFC,IAAM,4CACNC,KAAM,kEACNC,KAAM,uDACNC,KAAM,uCACNC,KAAM,gDACNC,KAAM,uCACNC,KAAM,4BACNC,KAAM,mBAGR,SAAS3D,GAAgB4D,EAAQ9E,GAC/B,GAAIA,YAAiBlG,OAAO,CAC1BA,MAAMG,KAAKK,KACXA,MAAK0F,MAAQA,CACb,IAAIA,EAAMjG,KAAMO,KAAKP,KAAOiG,EAAMjG,IAClC,IAAIiG,EAAM+E,MAAOzK,KAAKyK,MAAQ/E,EAAM+E,UAC/B,IAAI/E,EAAO,CAChB1F,KAAK0J,QAAUhE,EAEjB1F,KAAKwK,OAASA,CACdxK,MAAK0K,QAAUX,EAAS/J,KAAKwK,OAE7B,IAAIA,IAAW,MAAQ9E,EAAO,CAC5B1F,KAAK0K,SAAW,MAAQhF,EAAMgF,SAAWhF,IAI7CkB,EAAexG,UAAYF,OAAOC,OAAOX,MAAMY,UAE/CwG,GAAemD,SAAWA,OAEpBY,GAAG,SAASrL,EAAQf,EAAOD,GACjCC,EAAOD,QAAUsM,CAEjB,SAASA,KACP5K,KAAK6K,cAGPD,EAAUxK,UAAU0K,IAAM,SAAUC,GAClC,SAAWA,KAAa,WAAY,CAClC/K,KAAK6K,WAAWG,KAAKD,IAIzBH,GAAUxK,UAAU6K,KAAO,SAAUpI,EAAKC,GACxC,MAAO9C,MAAK6K,WAAWK,KAAK,SAAUH,GACpC,MAAOA,GAASlI,EAAKC,WAInBqI,GAAG,SAAS7L,EAAQf,EAAOD,GACjC,GAAIwB,GAAIR,EAAQ,UAEhB,IAAI8L,SAAoBzM,UAAW,UAAYA,MAC/C,IAAI0M,GAAY,oBAChB,IAAIhK,GAAOiK,GAEX/M,GAAOD,QAAUiN,CAEjB,SAASA,KACP,MAAOlK,GAAKuB,MAAM,KAAMM,WAG1BqI,EAAWC,QAAUnK,EAAKmK,OAC1BD,GAAWE,YAAcA,CAEzB,SAASA,GAAa/J,GACpB,MAAO,UAAUmB,EAAKC,EAAK4I,GACzB,GAAI5I,GAAOA,EAAI6I,WAAY,CACzB7I,EAAI0H,OAAS1H,EAAI6I,WAEnB,GAAID,EAAM,CACR,KACG7I,GAAOC,GAAKnC,KAAOiL,EAAc/I,GAAOC,GAAO+I,KAAKC,MAAMJ,GAAQA,EACnE,MAAOrN,GACPwE,EAAMxE,GAGVqD,EAAGmB,EAAKC,IAIZ,QAAS8I,GAAe9I,GACtB,aAAcA,GAAI4I,OAAS,UACzBL,EAAUU,KAAKjJ,EAAIkJ,QAAQ,iBAG/B,QAASC,GAAYxK,GACnB,SAAWA,KAAY,SAAU,CAC/BA,GAAYoC,IAAKpC,OACZ,CACLA,EAAUA,MAGZ,GAAIA,EAAQ6G,OAAQ7G,EAAQqH,GAAKrH,EAAQ6G,MACzC,IAAI7G,EAAQd,KAAMuL,EAAezK,EACjC,KAAK2J,EAAYe,EAAgB1K,EAEjC,OAAOA,GAGT,QAAS0K,GAAiB1K,GACxBA,EAAQuK,QAAUvK,EAAQuK,WAE1B,KAAKvK,EAAQuK,QAAQ,cAAe,CAClCvK,EAAQuK,QAAQ,cAAgBI,KAIpC,QAASA,KACP,MAAO,kBAAoBb,EAAWc,gBAAkB,UAG1D,QAASH,GAAgBzK,GACvB,GAAIiK,GAAOjK,EAAQd,MAAQc,EAAQiK,IAEnC,IAAIA,GAAQ5L,EAAEkB,MAAM0K,IAAS5L,EAAEmB,MAAMyK,GAAO,CAC1CjK,EAAQ6K,KAAO,IACf7K,GAAQd,KAAO,KAGjBc,EAAQiK,KAAOA,EAGjB,QAASJ,KACP,GAAIF,EAAY,CACd,MAAO9L,GAAQ,gBACV,CACL,MAAOiN,GAAejN,EAAQ,aAIlC,QAASiN,GAAgB7C,GACvB,MAAO,SAAS/G,GAAWlB,EAASC,GAClC,MAAOgI,GAAQuC,EAAWxK,GAAUgK,EAAY/J,QAIjDR,UAAU,GAAGsL,WAAW,GAAG9C,QAAU,KAAK+C,GAAG,SAASnN,EAAQf,EAAOD,GACxE,GAAI+C,GAAO/B,EAAQ,SACnB,IAAIgC,GAAShC,EAAQ,WACrB,IAAIoN,GAAUpN,EAAQ,YACtB,IAAIkE,GAAWlE,EAAQ,aACvB,IAAIqN,GAAYrN,EAAQ,cAExBf,GAAOD,QAAUqO,CAEjBA,GAAUnB,QAAU,OACpBmB,GAAUC,eAAiBvL,EAAKmK,OAChCmB,GAAUnJ,SAAWA,CACrBmJ,GAAUD,QAAUA,CACpBC,GAAUrL,OAASA,CACnBqL,GAAUjD,QAAUrI,CACpBA,GAAKgL,gBAAkBM,EAAUnB,OAGjC,UAAW7M,UAAW,mBAAsBW,KAAY,WAAY,CAClEX,OAAOG,UAAY6N,KAGlBE,WAAW,EAAEC,aAAa,EAAE7I,SAAS,EAAE8I,YAAY,GAAGC,cAAc,KAAKC,GAAG,SAAS3N,EAAQf,EAAOD,GACvG,GAAIwB,GAAIR,EAAQ,UAChB,IAAI4N,GAAU5N,EAAQ,UAEtB,IAAI6N,IAAS,KAAM,MAEnB5O,GAAOD,QAAU8O,CAEjB,SAASA,KACPpN,KAAKiI,KAAOoF,IAGdD,EAAWhN,UAAUkN,IAAM,SAAUxO,EAAWqD,GAC9C,GAAI8F,GAAOjI,KAAKiI,IAChB,IAAIsF,GAAczN,EAAE0N,MAAMrL,EAE1BoL,GACG9D,OAAO3J,EAAE2N,MACTC,IAAIC,EAAS7O,IACbgJ,QAAQ8F,EAAS3F,IAGtBmF,GAAWhN,UAAUoI,IAAM,SAAUqF,EAAMC,GACzC,MAAO9N,MAAKiI,KAAK4F,GAAMC,GAAMtF,IAG/B,SAAS6E,KACP,OACEzH,UAAWmI,IACX3J,QAAS2J,KAIb,QAASA,KACP,OAASC,KAAMd,IAAWe,IAAOf,KAGnC,QAASS,GAAU7O,GACjB,MAAO,UAAUoP,GACf,GAAIL,GAAOK,EAAGL,MAAQ,SACtB,IAAIxL,GAAOvD,EAAU2C,QAAQoM,EAC7B,QAASA,KAAMA,EAAMpF,QAASyF,EAAG7L,EAAMvD,KAI3C,QAAS8O,GAAU3F,GACjB,MAAO,UAAUiG,GACf,GAAIJ,GAAO,IACX,IAAIrF,GAAUyF,EAAGzF,OAEjB,IAAI3I,EAAE2N,KAAKhF,GAAU,CACnB,GAAIA,EAAQqF,OAAS,MAAO,CAC1BA,EAAO,MAET7F,EAAKiG,EAAGL,MAAMC,GAAMrF,GAGtB,GAAI3I,EAAEkB,MAAMyH,GAAU,CACpB0E,EACG1D,OAAO,SAAUnJ,GAChB,MAAOR,GAAE2N,KAAKhF,EAAQnI,MAEvBwH,QAAQ,SAAUxH,GACjB2H,EAAKiG,EAAGL,MAAMvN,GAAKmI,EAAQnI,WAMlCY,UAAU,GAAGgM,QAAU,KAAKiB,IAAI,SAAS7O,EAAQf,EAAOD,GAC3D,GAAIwB,GAAIR,EAAQ,UAChB,IAAIkE,GAAWlE,EAAQ,aACvB,IAAIoH,GAAUpH,EAAQ,YAEtBf,GAAOD,QAAUoO,CAEjB,SAASA,GAASjL,EAASoM,GACzB7N,KAAKC,MAAQ4N,EAAO/N,EAAEW,MAAM+C,EAASqK,IAAS3N,OAAOC,OAAO,KAC5DH,MAAKU,IAAIe,GAGXiL,EAAQtM,UAAUI,IAAM,SAAUF,GAChC,MAAOA,GAAMN,KAAKC,MAAMK,GAAOR,EAAEW,MAAMT,KAAKC,OAG9CyM,GAAQtM,UAAUiB,KAAO,WACvB,MAAOvB,GAAEsO,KAAKpO,KAAKC,MAAOuD,EAASgD,kBAGrCkG,GAAQtM,UAAUK,MAAQ,WACxB,MAAOiM,GAAQlO,OAAO6P,EAAOrO,KAAKC,QAGpCyM,GAAQtM,UAAUkE,QAAU,SAAUA,GACpC,MAAOA,GAAUtE,KAAKsO,WAAWhK,GAAWtE,KAAKC,MAAMqE,QAGzDoI,GAAQtM,UAAUkO,WAAa,SAAUhK,GACvC,GAAItE,KAAKC,MAAMqE,QAAS,CACtBtE,KAAKC,MAAMqE,QAAQ5D,IAAI4D,OAClB,CACLtE,KAAKC,MAAMqE,QAAU,GAAIoC,GAAQpC,IAIrCoI,GAAQtM,UAAUM,IAAM,SAAUJ,EAAKQ,GACrC,GAAIhB,EAAEkB,MAAMV,GAAM,CAChBR,EAAEyO,KAAKjO,EAAKR,EAAEiD,KAAK/C,KAAMA,KAAKU,UACzB,IAAII,IAAU0N,UAAW,CAC9B,GAAIlO,IAAQ,UAAW,CACrBN,KAAKsO,WAAWxN,OACX,CACL,GAAIR,IAAQ,iBAAkB,CAC5BQ,EAAQ,GAAI4F,GAAQ5F,GAEtBd,KAAKC,MAAMK,GAAOQ,IAKxB4L,GAAQlO,OAAS,SAAUiD,EAASgN,GAClC,GAAIxO,GAAQ,GAAIyM,EAChB,IAAIrK,GAAOZ,KAEXvB,QAAOwO,KAAKD,GAAkBjL,GAC3BiG,OAAO,SAAUnJ,GAChB,MAAOA,KAAQ,qBAEhBwH,QAAQ,SAAU+F,GACjB5N,EAAMS,IAAImN,EAAM,GAAInB,GAAQrK,EAAKwL,GAAOA,KAG5C,OAAO5N,GAGT,SAASoO,GAAQ5M,GACf,GAAI4F,KACJvH,GAAEyO,KAAK9M,EAAS,SAAUnB,EAAKQ,GAC7B,GAAIA,YAAiB4L,GAAS,CAC5BrF,EAAI/G,GAAOQ,EAAMN,QAGrB,OAAO6G,MAGNyF,aAAa,EAAEjD,YAAY,GAAG3I,UAAU,KAAKyN,IAAI,SAASrP,EAAQf,EAAOD,GAC5E,GAAIwB,GAAIR,EAAQ,UAChB,IAAI+B,GAAO/B,EAAQ,SACnB,IAAIsH,GAAiBtH,EAAQ,UAC7B,IAAIkH,GAAmBlH,EAAQ,cAAckH,gBAE7CjI,GAAOD,QAAUqI,CAEjB,SAASA,GAAW7H,GAClB,MAAO,SAAS4K,GAASpF,EAAS7C,EAASC,EAAI2F,GAC7C,GAAIuH,GAAYC,EAAapN,EAAQS,OACrC,IAAI4M,GAAcC,EAAejQ,EAAWwF,EAASsK,EACrDnN,GAAU3B,EAAEW,MAAMgB,EAElB,OAAO,SAASuN,GAAmBC,GACjC,GAAIxG,GAAU,IACd,IAAIV,GAAS+G,EAAYI,OAEzB,IAAInH,EAAQ,CACVtG,EAAU0N,EAAqBpH,EAAQtG,EACvCgH,GAAU2G,EAAerH,EAAQ6G,EAAWnN,EAAS4N,EAAe3N,GAAKsN,EAAmBlQ,EAC5FwQ,GAAYxQ,EAAW2C,EAASgH,EAASpB,OACpC,CACLkI,EAAqBzQ,EAAWwF,EAAS7C,EAASwN,EAAevN,MAMzE,QAASqN,GAAgBjQ,EAAWwF,EAASsK,GAC3C,GAAI9P,EAAUmG,WAAWzE,IAAI,UAAW,CACtC,MAAO8D,GAAQgD,KAAKsH,EAAW9P,EAAUmG,gBACpC,CACL,MAAOX,GAAQ9D,OAInB,QAAS+O,GAAsBzQ,EAAWwF,EAAS7C,EAAS+N,EAAqB9N,GAC/E,GAAI+N,GAAyBD,GAC7B,IAAIE,GAAcC,EAAcF,EAEhC,IAAIG,EAAqBnO,EAASiO,GAAc,CAC9ChO,EAAGkB,MAAM,KAAM6M,OACV,IAAIhO,EAAQ8C,MAAO,CACxBsL,EAAa/Q,EAAWwF,EAAS7C,EAASC,OACrC,CACLA,EAAG,GAAIkF,GAAe,IAAM8I,KAIhC,QAASG,GAAc/Q,EAAWwF,EAAS7C,EAASC,GAClD,GAAIoO,GAAUC,EAAQjR,EAAWwF,EAAS7C,EAASC,EACnD,IAAI6C,GAAQC,EAAgBsL,EAASrO,EAErC,IAAIA,EAAQgD,oBAAqB,CAC/BuL,EAA+BlR,EAAWyF,OACrC,CACLA,KAIJ,QAASC,GAAiBuL,EAAStO,GACjC,MAAO,YACL3B,EAAEmQ,MAAMF,EAAStO,EAAQ+C,kBAI7B,QAASuL,GAASjR,EAAWwF,EAAS7C,EAASC,GAC7C,MAAO,YACL,GAAI4C,EAAQvD,SAAU,CACpBU,EAAQ8C,OAAS,CACjBzF,GAAU4D,KAAK,gBAAiBjB,EAAS6C,EACzCqC,GAAU7H,GAAWwF,EAAS7C,EAASC,SAClC,CACLA,EAAG,GAAIkF,GAAe,SAK5B,QAASwI,GAAgBrH,EAAQ6G,EAAWnN,EAASe,EAAS0N,EAAYpR,GACxE,GAAIqR,GAAQrQ,EAAEe,KACd,OAAO,SAASuP,GAAiBvN,EAAKC,GACpC,GAAI6C,GAAU7F,EAAEe,MAAQsP,CACxBrR,GAAU4D,KAAK,mBAAoBG,EAAKC,EAAKrB,EAAS3C,EAEtD,IAAIuR,EAAmB5O,EAASoB,GAAOC,GAAM,CAC3CiF,EAAOuI,YAAY1B,EAAWjJ,EAC9BnD,GAAQK,EAAKC,OACR,IAAIyN,EAAgBzR,EAAW2C,EAASoB,EAAKC,GAAM,CACxDiF,EAAOuI,YAAY1B,EAAWjJ,EAC9B7G,GAAU4D,KAAK,mBAAoBjB,EAASoB,GAAOC,EACnDoN,GAAWM,EAAgB3N,EAAKC,QAC3B,CACLiF,EAAO0I,OAAO7B,EAAWjJ,EACzBnD,GAAQK,EAAKC,KAKnB,QAAS0N,GAAiB3N,EAAKC,GAC7B,MAAO,UAAUpB,GACf,OAASmB,EAAKC,IAIlB,QAASwM,GAAaxQ,EAAW2C,EAASgH,EAASpB,GACjDvI,EAAU4D,KAAK,mBAAoBjB,EAAS3C,EAE5C,KACE,GAAI4K,GAAUgH,EAAc5R,GAAWgB,EAAEsO,KAAK3M,EAAS+E,GAAmBiC,EAC1E,IAAIpB,EAAKA,EAAI2D,KAAKtB,GAClB,MAAO7G,GACP4F,EAAQ5F,IAIZ,QAASwM,GAAgB3N,GACvB,GAAIiP,GAAgBtP,EAAKoK,YAAY/J,EACrC,OAAO,UAAUmB,EAAKC,GACpB,GAAI8N,GAAa/N,GAAOC,CACxB,IAAI4I,GAAOkF,EAAaA,EAAWlF,MAAQkF,EAAWjQ,KAAO,IAC7DgQ,GAAc9N,EAAKC,EAAK4I,IAI5B,QAASyD,GAAsBpH,EAAQtG,GACrCA,EAAQoC,IAAM/D,EAAE+Q,KAAK9I,EAAOlE,IAAKpC,EAAQqP,SAAUrP,EAAQD,KAC3DC,GAAQgC,QAAUsN,EAAWtP,EAC7B,OAAOA,GAGT,QAASsP,GAAYtP,GACnB,GAAIgC,GAAUhC,EAAQiC,UAAYjC,EAAQgC,OAC1C,IAAIY,GAAW5C,EAAQ4C,QACvB,IAAInC,GAAST,EAAQS,MAErB,KAAKT,EAAQiC,UAAY5D,EAAEkB,MAAMqD,GAAW,CAC1CZ,EAAUY,EAASnC,IAAWmC,EAASnC,EAAO8O,gBAAkBvN,EAGlE,MAAOA,GAGT,QAASkM,GAAesB,GACtB,MAAOA,GAAIxH,OAAO,SAAUyH,GAAK,MAAOA,IAAK,OAAQC,MAGvD,QAASnB,GAAgClR,EAAWgR,GAClD,GAAIhR,EAAUqI,sBAAuB,CACnCrI,EAAUsS,MAAMC,OAAO,WACvB1K,GAAU2K,kBAAkBC,OAAOzS,EAAW,KAAMgR,OAC/C,CACLA,KAIJ,QAASF,GAAsBnO,EAASoB,GACtC,MAAO2O,GAAsB/P,EAAQsD,sBAAuBlC,EAAMA,EAAI2H,OAAS,OAC7EiH,EAAmBhQ,EAAQoD,mBAAoBpD,EAAQS,SACvDwP,EAAoBjQ,EAAQkD,cAAelD,EAAQS,OAAQW,GAG/D,QAASwN,GAAoB5O,EAASoB,GACpC,MAAO8O,GAA8BlQ,EAASoB,IAC5C+O,EAA2BnQ,IAC3BiQ,EAAoBjQ,EAAQmD,iBAAkBnD,EAAQS,OAAQW,GAGlE,QAAS+O,GAA4BnQ,GACnC,GAAIoQ,GAAUpQ,EAAQqD,qBACtB,OAAO2M,GAAmBI,EAASpQ,EAAQS,QAG7C,QAASwP,GAAqBI,EAAO5P,EAAQY,GAC3C,MAAOhD,GAAEmB,MAAM6Q,IACbhP,GAAOA,EAAI0H,QACXsH,EAAM5G,KAAK6G,EAAW7P,EAAQY,IAGlC,QAASiP,GAAY7P,EAAQW,GAC3B,MAAO,UAAUmP,GACf,MAAOlS,GAAEkB,MAAMgR,IACbC,EAAgBD,EAAM9P,IACtBgQ,EAAoBF,EAAMnP,EAAI2H,SAIpC,QAASyH,GAAiBD,EAAM9P,GAC9B,MAAS8P,GAAK9P,QAAU8P,EAAK9P,SAAWA,GACtCpC,EAAEmB,MAAM+Q,EAAKH,UAAYM,EAAgBH,EAAKH,QAAS3P,GAG3D,QAASgQ,GAAqBF,EAAMxH,GAClC,MAAOA,KAAYwH,EAAKvS,MAAQuS,EAAKvS,OAAS+K,GAC3C1K,EAAEmB,MAAM+Q,EAAKI,QAAUZ,EAAsBQ,EAAKI,MAAO5H,IAG9D,QAASmH,GAA+BlQ,EAASoB,GAC/C,GAAIuP,GAAQ3Q,EAAQuD,wBACpB,OAAOnC,IAAO2O,EAAsBY,EAAOvP,EAAI2H,QAGjD,QAASiH,GAAoBI,EAAS3P,GACpC,MAAOpC,GAAEmB,MAAM4Q,IAAYA,EAAQjS,QAAUuS,EAAgBN,EAAS3P,GAGxE,QAASsP,GAAuBY,EAAO5H,GACrC,MAAOA,IAAU1K,EAAEmB,MAAMmR,IAAUA,EAAMxS,SACtCwS,EAAMC,QAAQ7H,IACfA,GAAU,IAGd,QAAS2H,GAAiBN,EAAS3P,GACjCA,GAAUA,GAAU,OAAOoQ,aAC3B,OAAOT,GACJpI,OAAO,SAAU8I,GAAK,aAAcA,KAAM,WAC1C7E,IAAI,SAAU6E,GAAK,MAAOA,GAAED,cAAcE,SAC1CtH,KAAK,SAAUqH,GAAK,MAAOA,KAAMrQ,IAGtC,QAASqO,GAAiBzR,EAAW2C,EAASoB,EAAKC,GACjD,MAAO2P,GAAoB5P,EAAKC,IAC9BhE,EAAU4T,gBAAgBzH,KAAKpI,EAAKC,IACnCrB,EAAQiD,mBAAsBiO,EAAc9P,GAAOC,GAGxD,QAAS2P,GAAqB5P,EAAKC,GACjC,MAAQD,KAAQA,EAAIpD,OAAS+O,WAC1B3L,EAAI2H,SAAWgE,WAAa1L,IAAQ0L,YACrCoE,EAAgB/P,GAAOC,IACvB,MAGJ,QAAS8P,GAAiB9P,GACxB,MAAO+P,GAAoB,IAAK/P,GAGlC,QAAS6P,GAAe7P,GACtB,MAAO+P,GAAoB,IAAK/P,GAGlC,QAAS+P,GAAqBpT,EAAMqD,GAClC,MAAQA,KAAQA,EAAIrD,OAASqD,EAAI0H,QAAU/K,GAAQqD,EAAI0H,SAAW,IAAO,MAG3E,QAASqE,GAAc3M,GACrB,MAAOA,GAAOoQ,gBAAkB,MAAQ,OAAS,QAGnD,QAAS5B,GAAe5R,GACtB,aAAcA,GAAUgF,cAAgB,WAAahF,EAAUgF,YAAczC,KAG5EyL,aAAa,EAAEnD,UAAU,EAAE1F,SAAS,EAAE/C,UAAU,KAAK4R,IAAI,SAASxT,EAAQf,EAAOD,GACpF,GAAIyU,GAAWzT,EAAQ,YACvB,IAAIQ,GAAIR,EAAQ,UAChB,IAAI0T,GAAO1T,EAAQ,SACnB,IAAIS,GAAQT,EAAQ,UACpB,IAAIgC,GAAShC,EAAQ,WACrB,IAAIoN,GAAUpN,EAAQ,YACtB,IAAI8N,GAAa9N,EAAQ,eACzB,IAAIsL,GAAYtL,EAAQ,cACxB,IAAIgS,GAAoBhS,EAAQ,wBAEhCf,GAAOD,QAAUqO,CAEjB,SAASA,GAAWlL,GAClB,KAAMzB,eAAgB2M,IAAY,MAAO,IAAIA,GAAUlL,EACvDzB,MAAKiT,MAAQ,GAAIlT,EACjBC,MAAKoR,MAAQ,GAAI4B,EACjBhT,MAAKkT,QAAU,GAAI5R,GAAOtB,KAC1BA,MAAKgH,YAAc,GAAIoG,EACvBpN,MAAK0S,gBAAkB,GAAI9H,EAC3B5K,MAAKmT,SAAWzG,EAAQlO,OAAOiD,GAGjCkL,EAAUvM,UAAYF,OAAOC,OAAO4S,EAAS3S,UAE7CuM,GAAUvM,UAAUkE,QAAU,SAAUuJ,GACtC,GAAIpM,GAAUzB,KAAKyB,QAAQoM,GAAQ,UACnC,OAAOpM,GAAUA,EAAQ6C,UAAY,KAGvCqI,GAAUvM,UAAUkO,WAAa,SAAU8E,EAAMvF,GAC/C7N,KAAKyB,QAAQoM,GAAQ,WAAWvJ,QAAQ8O,EACxC,OAAOpT,MAGT2M,GAAUvM,UAAUiT,WAAa,SAAUxF,GACzC,GAAIvJ,GAAUtE,KAAKsE,QAAQuJ,EAC3B,OAAOvJ,GAAUA,EAAQgP,OAAS,KAGpC3G,GAAUvM,UAAUmT,iBAAmB,SAAUH,GAC/C,GAAItT,EAAEmB,MAAMmS,GAAO,CACjBpT,KAAKyB,QAAQ,aAAa6C,QAAQ8O,OAC7B,CACL,MAAOpT,MAAKsE,QAAQ,cAIxBqI,GAAUvM,UAAU+G,oBAAsB,WACxC,GAAI7C,GAAUtE,KAAKuT,kBACnB,OAAOzT,GAAEkB,MAAMsD,IAAYA,EAAQvD,UAAY,MAGjD4L,GAAUvM,UAAUoT,WACpB7G,EAAUvM,UAAUqT,WAAa,SAAU5F,GACzC,GAAIvJ,GAAUtE,KAAKyB,QAAQoM,GAAQ,WAAWvJ,SAC9C,IAAIA,EAAS,CACXA,EAAQmP,aAEV,MAAOzT,MAGT2M,GAAUvM,UAAUsT,cACpB/G,EAAUvM,UAAUuT,kBAAoB,SAAUlS,EAASC,GACzDA,QAAYD,KAAY,WAAaA,EAAUC,CAE/C,IAAI1B,KAAKuT,mBAAoB,CAC3BvT,KAAK4T,gBAAgBnS,EAASC,OACzB,IAAI1B,KAAKsE,QAAQ,WAAY,CAClC5C,EAAG,KAAM1B,KAAKsE,QAAQ,WAAWgP,YAC5B,CACL5R,EAAG,GAAIlC,OAAM,oBAGf,MAAOQ,MAGT2M,GAAUvM,UAAUwT,gBAAkB,SAAUnS,EAASC,GACvD,MAAOyG,GAAcnI,KAAM,QAASyB,EAASC,GAG/CiL,GAAUvM,UAAU+H,cAAgB,SAAU1G,EAASC,GACrD,MAAOyG,GAAcnI,KAAM,SAAUyB,EAASC,GAGhD,SAASyG,GAAerJ,EAAWoD,EAAQT,EAASC,GAClD,SAAWD,KAAY,WAAY,CAAEC,EAAKD,CAASA,GAAU,KAC7D6P,EAAkBpP,GAAQpD,EAAW2C,EAASC,GAAM5B,EAAEsD,KACtD,OAAOtE,GAGT6N,EAAUvM,UAAUqB,QAAU,SAAUoM,EAAMpM,GAC5C,GAAIoM,GAAQ/N,EAAEkB,MAAMS,GAAU,CAC5B,GAAIxB,GAAQD,KAAKmT,SAAS3S,IAAIqN,EAC9B,IAAI5N,YAAiByM,GAAS,CAC5BzM,EAAMS,IAAIe,GAEZ,OAGF,GAAI3B,EAAEkB,MAAM6M,GAAO,CACjB7N,KAAKmT,SAAWzG,EAAQlO,OAAOqP,EAC/B,QAGF,MAAO7N,MAAKmT,SAAS3S,IAAIqN,GAG3BlB,GAAUvM,UAAUyT,iBAAmB,SAAUpS,GAC/C,GAAIA,EAAS,CACXzB,KAAKyB,QAAQ,YAAaA,OACrB,CACL,MAAOzB,MAAKyB,QAAQ,aAAajB,OAIrCmM,GAAUvM,UAAU0T,eAAiB,SAAUrS,GAC7C,GAAIA,EAAS,CACXzB,KAAKyB,QAAQ,UAAWA,OACnB,CACL,MAAOzB,MAAKyB,QAAQ,WAAWjB,OAInCmM,GAAUvM,UAAU2T,YAAc,SAAUlG,GAC1C,GAAIpM,GAAUzB,KAAKyB,QAAQoM,GAAQ,UACnC,IAAIpM,EAAS,MAAOA,GAAQJ,OAG9BsL,GAAUvM,UAAU4T,cAAgB,SAAU5K,GAC5C,SAAWA,KAAW,WAAY,CAChCpJ,KAAK8D,YAAcsF,EAErB,MAAOpJ,MAGT2M,GAAUvM,UAAU6T,kBAAoB,WACtCjU,KAAK8D,YAAc,IACnB,OAAO9D,MAGT2M,GAAUvM,UAAU8T,eAAiB,WACnC,GAAIC,GAAUnU,KAAKsE,UAAU8P,YAC7B,IAAIC,GAAUrU,KAAKyB,QAAQ,aAAajB,IAAI,oBAAsB,CAClE,OAAO2T,GAAUE,EAGnB1H,GAAUvM,UAAU6E,SAAW,SAAUxD,GACvC,GAAIA,EAAS,CACXzB,KAAKyB,QAAQ,WAAYA,OACpB,CACL,MAAOzB,MAAKyB,QAAQ,aAIxBkL,GAAUvM,UAAUuB,KACpBgL,EAAUvM,UAAUsJ,QAAU,SAAUlI,EAAMC,EAASC,GACrD,MAAO1B,MAAKkT,QAAQvR,KAAKH,EAAMC,EAASC,GAG1CiL,GAAUvM,UAAUkU,KAAO,SAAUC,GACnCvU,KAAKgU,cAAc,SAAUvS,EAASC,GACpC5B,EAAEmQ,MAAM,WAAcsE,EAAO9S,EAASC,MAExC,OAAO1B,MAGT2M,GAAUvM,UAAUoU,OAAS,WAC3BxU,KAAKiU,mBACL,OAAOjU,MAGT2M,GAAUvM,UAAUkN,IAAM,WACxBtN,KAAKgH,YAAYsG,IAAItN,KAAMkD,UAC3B,OAAOlD,MAGT2M,GAAUvM,UAAUiB,KACpBsL,EAAUvM,UAAUgJ,OAAS,WAC3B,MAAOpJ,MAAKkT,QAGdvG,GAAUvM,UAAUqU,aACpB9H,EAAUvM,UAAUsU,gBAAkB,SAAU3J,GAC9C/K,KAAK0S,gBAAgB5H,IAAIC,EACzB,OAAO/K,QAGP,MAAO,OAAQ,MAAO,MAAO,SAAU,OAAQ,SAC9C8H,QAAQ,QAAS6M,GAAmBC,GACnCjI,EAAUvM,UAAUwU,GAAQ,SAAUpT,EAAMC,EAASC,GACnD,MAAO1B,MAAKkT,QAAQ0B,GAAMpT,EAAMC,EAASC,QAI5CmT,UAAU,EAAEhI,WAAW,EAAEiI,cAAc,EAAEC,eAAe,EAAEhI,YAAY,GAAGiI,wBAAwB,GAAGC,SAAS,GAAG/T,UAAU,GAAGgU,YAAY,KAAKC,IAAI,SAAS7V,EAAQf,EAAOD,GAC7K,GAAIwB,GAAIR,EAAQ,UAChB,IAAIoH,GAAUpH,EAAQ,YACtB,IAAIqH,GAAYrH,EAAQ,cACxB,IAAIsH,GAAiBtH,EAAQ,UAC7B,IAAIwH,GAAmBxH,EAAQ,cAC/B,IAAIgS,GAAoBhS,EAAQ,wBAEhCf,GAAOD,QAAU8W,CAEjB,SAASA,GAAUtW,EAAW2C,EAASC,GACrCA,EAAK2T,EAAY3T,EAEjB,IAAI4T,GAAOxW,EAAUsS,KACrB,IAAIrK,GAAajI,EAAUkI,WAE3B,KACExE,EAAQpB,GACR,MAAOyB,GACPnB,EAAG,GAAIkF,GAAe,KAAM/D,IAG9B,QAASL,GAAS4F,GAChB,GAAImN,IAA+B,CACjCC,EAAuBpN,OAClB,IAAIqN,IAA0B,CACnCrN,QACK,IAAIjB,IAAuB,CAChCuO,EAAqBtN,OAChB,CACLA,EAAK,GAAIxB,GAAe,QAI5B,QAAS4O,GAAwBpN,GAC/B,GAAI3G,GAAUoS,GACd,IAAIvP,GAAUqR,EAAkBlU,EAChC,IAAI6E,GAAiBsP,EAAkBnU,EAEvC,IAAI6T,EAAKO,OAAO,eAAgB,CAC9BP,EAAKQ,QAAQ,cAAeC,EAAiBtU,EAAS2G,QACjD,CACLkN,EAAKU,KAAK,cACVlP,GAAiBhI,EAAWwH,EAAgBhC,GAASyR,EAAiBtU,EAAS2G,KAInF,QAAS2N,GAAkBtU,EAAS2G,GAClC,MAAO,UAAUvF,EAAKC,GACpBwS,EAAKjE,OAAO,cACZiE,GAAKW,QAAQ,eAAenO,QAAQ,SAAUpG,GAAMA,EAAGmB,EAAKC,IAE5DiE,GAAWyB,IAAI,YAAa,MAAM3F,EAAKC,EAAK,SAAUoT,GACpD,GAAIrT,GAAOqT,EAAM,CACf9N,EAAK,GAAIxB,GAAe/D,EAAM,KAAO,KAAMA,GAAOqT,QAC7C,IAAIpT,GAAOA,EAAInC,KAAM,CAC1BwV,EAAwBrT,EAAInC,KAAMc,EAClCiU,GAAqBtN,OAChB,CACLA,EAAK,GAAIxB,GAAe,KAAM/D,QAMtC,QAASgR,KACP,MAAO/U,GAAU2C,QAAQ,aAG3B,QAAS0U,GAAyBxV,EAAMc,GACtC3C,EAAU4D,KAAK,oBAAqB/B,EAAM7B,EAC1C2C,GAAQ6C,QAAQ3D,GAGlB,QAAS+U,GAAsBtN,GAC7BkJ,EAAkBC,OAAOzS,EAAW,KAAMsJ,GAG5C,QAASmN,KACP,GAAIa,GAAW,KACf,IAAI3U,GAAUoS,GACd,IAAIvP,GAAU7C,EAAQjB,IAAI,UAE1B,IAAI6V,EAA0B5U,GAAU,CACtC,GAAI6C,GAAWA,EAAQvD,SAAU,CAC/B,GAAIU,EAAQjB,IAAI,uBAAwB,CACtC4V,EAAW9R,EAAQ6P,UAAY,EAEjC,IAAKiC,EAAU,CACbA,EAAW9R,EAAQ8P,aAAe3S,EAAQjB,IAAI,+BAE3C,CACL4V,EAAW,MAIf,MAAOA,GAGT,QAASjP,KACP,MAAOrI,GAAUqI,sBAGnB,QAASsO,KACP,GAAInR,GAAUxF,EAAUwF,SACxB,OAAOA,IAAWA,EAAQvD,UAAYuV,EAAkBhS,IAAY,MAGtE,QAASgS,GAAmBhS,GAC1B,GAAIiS,GAAW1C,IAAmBrT,IAAI,kBACtC,IAAI2G,IAAuB,CACzB,MAAO7C,GAAQ8P,aAAemC,EAEhC,MAAO,MAGT,QAASnV,GAAUyB,EAAKC,GACtBD,EAAMnB,EAAGmB,GAAO2T,EAAiB1T,GAGnC,QAAS0T,GAAkB1T,GACzB,GAAIwB,GAAUxF,EAAUwF,SACxB,IAAI3B,GAAYgE,EAAU7H,EAE1B,IAAIgE,GAAOA,EAAI2T,OAAQ,CACrBnS,EAAU,GAAIoC,GAAQ5D,EAAInC,UACrB,KAAK8U,IAA0B,CACpC,MAAO/T,GAAG,GAAIkF,GAAe,OAG/BG,EAAWyB,IAAI,UAAW,OAAOlE,EAAS7C,EAAS,SAAUoB,GAC3D,GAAIA,EAAK,CACPnB,EAAG,GAAIkF,GAAe,KAAM/D,QACvB,CACLF,EAAU2B,EAAS7C,EAASC,GAAI,SAKtC,QAAS2T,GAAa3T,GACpB,MAAO,UAAUmB,EAAKC,GACpBiE,EAAWyB,IAAI,UAAW,MAAM3F,EAAKC,EAAK,SAAUoT,GAClD,GAAIrT,GAAOqT,EAAM,CACfxU,EAAGmB,GAAO,GAAI+D,GAAe,KAAMsP,QAC9B,CACLxU,EAAG,KAAMoB,QAOnB,QAASuT,GAA2B5U,GAClC,GAAI4E,GAAiB5E,EAAQjB,IAAI,iBACjC,OAAOiB,GAAQjB,IAAI,0BAChBiB,EAAQjB,IAAI,sBACZ6F,GAAkBA,EAAetF,UAGtC,QAAS4U,GAAmBlU,GAC1B,GAAIoM,GAAOpM,EAAQjB,IAAI,qBACnB,UACA,gBACJ,OAAOiB,GAAQjB,IAAIqN,GAGrB,QAAS+H,GAAmBnU,GAC1B,GAAIgN,GAAiB3O,EAAEsO,KAAK3M,EAAQjB,OAAQ,UAAW,kBACvD,IAAI8F,GAAiBxG,EAAE6D,MAAM8K,EAAgBhN,EAAQjB,IAAI,mBAAqBiE,oBAAqB,OACnG,IAAIqM,GAAW4F,EAAmBjV,EAAQjB,MAC1C,IAAIsQ,EAAUxK,EAAewK,SAAWA,CACxC,OAAOxK,GAGT,QAASoQ,GAAoBjV,GAC3B,MAAOA,KAAYA,EAAQ8E,aACxBzG,EAAEkB,MAAMS,EAAQ6E,iBACjB7E,EAAQ6E,eAAewK,WACvB,SAGD6F,cAAc,EAAEhN,UAAU,EAAEC,cAAc,GAAGoL,wBAAwB,GAAGnL,YAAY,GAAG3I,UAAU,KAAK0V,IAAI,SAAStX,EAAQf,EAAOD,GACrI,GAAIsI,GAAiBtH,EAAQ,WAC7B,IAAIqH,GAAYrH,EAAQ,eACxB,IAAIwH,GAAmBxH,EAAQ,eAC/B,IAAIuX,GAAiBvX,EAAQ,YAE7Bf,GAAOD,QAAUgT,CAEjB3K,GAAU2K,kBAAoBA,CAE9B,SAASA,GAAmBxS,EAAW2C,EAAS6C,GAC9C,GAAIgR,GAAOxW,EAAUsS,KAErB,SAAShQ,GAAUoB,GACjB,MAAO,UAAUK,EAAKC,GACpBwS,EAAKjE,OAAO,WACZiE,GAAKW,QAAQ,YAAYnO,QAAQ,SAAUpG,GAAMA,EAAGmB,EAAKC,IACzDN,GAAQK,EAAKC,IAIjB,QAASqF,GAAezG,GACtB4T,EAAKU,KAAK,WACVlP,GAAiBhI,EAAW2C,EAAS6C,GAASlD,EAASM,IAGzD,MAAO,SAASc,GAASd,GACvB,GAAI4T,EAAKO,OAAO,YAAa,CAC3BP,EAAKQ,QAAQ,WAAYpU,OACpB,CACLyG,EAAczG,KAKpB4P,EAAkBC,OAAS,SAAUzS,EAAW2C,EAASC,GACvD4P,EAAkBxS,EAAW2C,GAASoV,EAAe/X,GAAW4C,IAGlE4P,GAAkBwF,MAAQ,SAAUhY,EAAW2C,EAASC,GACtD4P,EAAkBxS,EAAW2C,GAASsV,EAAarV,IAGrD,SAASqV,GAAcrV,GACrB,MAAO,UAAUmB,EAAKC,GACpB,GAAID,EAAK,CACPnB,EAAGmB,OACE,IAAIC,GAAOA,EAAInC,KAAM,CAC1Be,EAAG,KAAMoB,EAAInC,UACR,CACLe,EAAG,GAAIkF,GAAe,KAAM9D,SAK/BkU,eAAe,EAAEC,WAAW,EAAEC,eAAe,GAAGC,YAAY,KAAKC,IAAI,SAAS9X,EAAQf,EAAOD,GAChG,GAAIwB,GAAIR,EAAQ,WAChB,IAAIsH,GAAiBtH,EAAQ,WAE7Bf,GAAOD,QAAUuY,CAEjB,SAASA,GAAgB/X,GACvB,GAAIiI,GAAajI,EAAUkI,WAC3B,IAAIvF,GAAU3C,EAAU2C,QAAQ,YAEhC,SAAS4V,KACP,MAAO5V,GAAQjB,IAAI,gBAGrB,QAAS8W,KACP,MAAOxY,GAAUmU,MAAMzS,IAAI,WAG7B,QAASkC,GAAM6U,EAAM5W,GACnB7B,EAAU4D,KAAK,WAAa6U,EAAM5W,EAAM7B,GAG1C,QAAS0Y,GAAa1U,EAAKsF,GACzB,GAAIzH,GAAOmC,EAAInC,IACf+B,GAAK,UAAW/B,EAChB7B,GAAUwP,WAAW3N,EACrB8W,GAAa9W,EACbyH,GAAK,KAAMtF,GAGb,QAAS4U,GAAc7U,EAAKuF,GAC1B,GAAIiP,IAAkB,CACpBM,EAAiB9U,EAAKuF,OACjB,CACLwP,EAAiB/U,EAAKuF,IAI1B,QAASuP,GAAkB9U,EAAKuF,GAC9B,GAAI6K,GAAQqE,GACZ,IAAIO,EAAc5E,GAAQ,CACxB7K,EAAK,MAAQoC,OAAQ,IAAKiM,OAAQ,KAAM9V,KAAMsS,EAAMtS,WAC/C,CACLiX,EAAiB/U,EAAKuF,IAI1B,QAASyP,GAAe5E,GACtB,GAAI6E,GAAUrW,EAAQjB,IAAI,kBAC1B,OAAOyS,IAASnT,EAAEmB,MAAMgS,EAAMtS,OAAUb,EAAEe,MAAQoS,EAAMrS,KAAQkX,GAAW,MAG7E,QAASL,GAAc9W,GACrB,GAAI0W,IAAkB,CACpB3U,EAAK,QAAS/B,EACd7B,GAAUmU,MAAMvS,IAAI,UAAWC,IAInC,QAASoX,GAAgBlV,EAAKC,EAAKkV,GACjC,GAAInV,EAAK,CACP6U,EAAa7U,EAAKmV,OACb,IAAIC,EAAgBnV,GAAM,CAC/B0U,EAAY1U,EAAKkV,OACZ,CACLA,EAAK,GAAIpR,GAAe,KAAM9D,KAIlC,MAAO,SAASoV,GAAeF,GAC7B,MAAO,SAASvP,GAAS5F,EAAKC,GAC5BiE,EAAWyB,IAAI,YAAa,MAAM3F,EAAKC,EAAK,SAAUoT,GACpD6B,EAAelV,GAAOqT,EAAMpT,EAAKkV,OAMzC,QAASC,GAAiBnV,GACxB,GAAIqV,GAAQ,KACZ,IAAIrV,EAAK,CACP,GAAIhD,EAAEmB,MAAM6B,EAAInC,OAASmC,EAAInC,KAAKf,OAAQ,CACxCuY,EAAQ,SACH,UAAWrV,GAAInC,OAAS,SAAU,CACvCwX,EAAQC,EAAYtV,IAGxB,MAAOqV,GAGT,QAASC,GAAatV,GACpB,IACEA,EAAInC,KAAOkL,KAAKC,MAAMhJ,EAAInC,KAC1B,OAAO,MACP,MAAOtC,GACP,MAAO,QAIX,QAASuZ,GAAkB/U,EAAKuF,GAC9B,GAAI1C,GAAQ,GAAIkB,GAAe/D,EAAI2H,OAAQ3H,IAAS2H,OAAQ,KAC5D,OAAOpC,GAAK1C,MAGXuR,WAAW,EAAEoB,WAAW,KAAKC,IAAI,SAAShZ,EAAQf,EAAOD,GAC5DC,EAAOD,QAAUia,CAEjB,SAASA,GAAiBtH,EAAKuH,GAC7B,GAAIC,IAAOD,EAAO,EAAI,EAAIA,CAC1B,IAAIE,GAAStT,EAAWqT,EAAKxH,GAAK/B,OAClC,UAAUhH,OAAOtF,SAAU8V,GAG7B,QAAStT,GAAYpG,EAAG2Z,GACtB,GAAIC,EACJ,IAAIC,EACJ,IAAItZ,EACJ,IAAIuZ,KAEJ,KAAKH,EAAI,CACPA,IACA,KAAKC,EAAI,EAAGA,GAAK5Z,EAAG4Z,GAAK,EAAGD,EAAG3N,KAAK4N,OAC/B,CACLD,EAAKA,EAAG9Q,QAEV,GAAI7I,EAAI,IAAM,EAAG,CACf2Z,EAAG3N,MAAM,EACThM,IAAK,EAEP,IAAK6Z,EAAI,EAAGA,EAAI7Z,EAAI,EAAG6Z,GAAK,EAAG,CAC7BC,EAAGD,KACH,KAAKtZ,EAAI,EAAGA,EAAIP,EAAI,EAAGO,GAAK,EAAG,CAC7B,GAAIoZ,EAAGpZ,MAAQ,GAAKoZ,EAAG3Z,EAAI,EAAIO,MAAQ,EAAG,CACxCuZ,EAAGD,GAAG7N,MAAM2N,EAAGpZ,GAAIoZ,EAAG3Z,EAAI,EAAIO,MAGlCoZ,EAAGxP,OAAO,EAAG,EAAGwP,EAAGxH,OAErB,MAAO2H,SAGHC,IAAI,SAASzZ,EAAQf,EAAOD,GAClC,GAAI0a,GAAkB1Z,EAAQ,cAAc2F,QAE5C1G,GAAOD,QAAU2a,CAEjB,SAASA,GAAQpV,GACf7D,KAAK6D,IAAMA,CACX7D,MAAKyT,aAGPwF,EAAO7Y,UAAUqQ,OAAS,SAAU7B,EAAWjJ,EAASkI,GACtD,GAAIqL,GAAQlZ,KAAKkZ,MAAMtK,EACvB,IAAIsK,EAAO,CACTA,EAAMrL,GAAQ,YAAc,CAC5BqL,GAAMvT,QAAUwT,EAAoBxT,GAAW,EAAGuT,IAItDD,GAAO7Y,UAAUkQ,YAAc,SAAU1B,EAAWjJ,GAClD3F,KAAKyQ,OAAO7B,EAAWjJ,EAAS,SAGlCsT,GAAO7Y,UAAUgZ,QAAU,SAAUxK,EAAWnN,GAC9C,GAAIyX,GAAQlZ,KAAKkZ,MAAMtK,EACvB,IAAIpJ,GAASwT,EAAgBxT,MAC7B,IAAIkD,GAAQwQ,EAAMxP,QAAUwP,EAAMxT,KAClC,OAAOgD,GAAQ2Q,EAAsBH,EAAO1T,EAAQkD,GAAS,EAG/DuQ,GAAO7Y,UAAU8Y,MAAQ,SAAUtK,EAAW0K,GAC5C,GAAIJ,GAAQlZ,KAAKuZ,WAAW3K,GAAa,OACzC,IAAIsK,GAASI,EAAOJ,EAAQA,EAAMI,EAClC,OAAOJ,GAGTD,GAAO7Y,UAAUqT,WAAa,WAC5BzT,KAAKuZ,WAAaC,IAGpB,SAASA,KACP,OACEC,KAAMC,IACNC,MAAOD,KAIX,QAASA,KACP,OACE/T,QAAS,EACTD,MAAO,EACPgE,QAAS,GAIb,QAAS2P,GAAuBH,EAAO1T,EAAQkD,GAC7C,MAAOkR,IACDV,EAAMxP,QAAU,IAAMhB,EAASlD,EAAOC,QACxCyT,EAAMxT,MAAQ,IAAMgD,EAASlD,EAAOE,MACrCwT,EAAMvT,QAAUH,EAAOG,SAAY,KAGxC,QAASwT,GAAqBxT,EAASuT,GACrC,MAAOU,IAAOjU,EAAUuT,EAAMvT,UAAYuT,EAAMxP,QAAUwP,EAAMxT,QAGlE,QAASkU,GAAOC,GACd,QAAUA,EAAS,IAAO,KAAKC,QAAQ,MAGtChN,aAAa,IAAIiN,IAAI,SAASza,EAAQf,EAAOD,GAChD,GAAIwB,GAAIR,EAAQ,UAChB,IAAI2Z,GAAS3Z,EAAQ,WACrB,IAAI0a,GAAa1a,EAAQ,eAEzBf,GAAOD,QAAUoI,CAEjB,SAASA,GAASpC,GAChBtE,KAAKsE,UACLtE,MAAKmU,QAAU,CACfnU,MAAKU,IAAI4D,GAGXoC,EAAQtG,UAAUI,IAAM,WACtB,MAAOR,MAAKsE,QAAQuD,MAAM,GAG5BnB,GAAQtG,UAAUM,IAAM,SAAU4D,GAChC,GAAIxE,EAAEmB,MAAMqD,GAAU,CACpBtE,KAAKmU,QAAUrU,EAAEe,KACjBb,MAAKsE,QAAU2V,EAAWta,KAAKK,KAAMsE,IAIzCoC,GAAQtG,UAAUgU,WAAa,WAC7B,MAAOtU,GAAEe,MAAQb,KAAKmU,QAGxBzN,GAAQtG,UAAU8Z,MAAQ,WACxB,MAAOla,MAAKsE,QAAQ1E,SAAW,EAGjC8G,GAAQtG,UAAUW,OAAS,WACzB,MAAOf,MAAKwY,OAAS,EAGvB9R,GAAQtG,UAAUoY,KAAO,WACvB,MAAOxY,MAAKsE,QAAQ1E,OAGtB8G,GAAQtG,UAAUkT,KAAO,WACvB,MAAOtT,MAAKsE,QAAQoJ,IAAI,SAAU3F,GAChC,MAAOA,GAAOlE,MAIlB6C,GAAQtG,UAAUqT,WAAa,WAC7BzT,KAAKsE,QAAQwD,QAAQ,SAAUC,GAC7BA,EAAO0L,eAIX/M,GAAQtG,UAAUkH,KAAO,SAAUsH,EAAWnN,GAC5C,GAAI6C,GAAUtE,KAAKsE,QAAQuD,MAAM,EACjC,IAAIvD,EAAQ1E,OAAQ,CAClB,IAAK6B,EAAQjB,IAAI,iBAAkB,CACjC8D,EAAQgD,KAAK,SAAU6S,EAAGC,GACxB,MAAOD,GAAEf,QAAQxK,EAAWnN,GAAW2Y,EAAEhB,QAAQxK,EAAWnN,KAGhE,SAAWA,GAAQjB,IAAI,qBAAuB,WAAY,CACxD8D,EAAU7C,EAAQjB,IAAI,mBAAmB8D,OACpC,IAAI7C,EAAQjB,IAAI,UAAW,CAChC8D,EAAU+V,EAAQ/V,OACb,IAAI7C,EAAQjB,IAAI,cAAe,CACpC8D,EAAUgW,EAAehW,EAAS7C,IAGtC,MAAO6C,GAGToC,GAAQtG,UAAUma,KAAO,SAAU1W,GACjC,GAAIkE,GAAS,IACb,KAAK,GAAIxI,GAAI,EAAGG,EAAIM,KAAKsE,QAAQ1E,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CACtD,GAAIS,KAAKsE,QAAQ/E,GAAGsE,MAAQA,EAAK,CAC/BkE,EAAS/H,KAAKsE,QAAQ/E,EACtB,QAGJ,MAAOwI,GAGT,SAASyS,GAAYC,GACnB,GAAI3a,EAAEkB,MAAMyZ,GAAMA,EAAMA,EAAI5W,KAAO4W,EAAIA,GACvC,OAAO3a,GAAE8D,MAAM6W,GAGjB,QAASR,GAAY3V,GACnB,MAAOA,GACJmF,OAAO+Q,GACP9M,IAAI5N,EAAEiD,KAAK/C,KAAM0a,IAGtB,QAASA,GAAW/Z,GAClB,GAAIoH,EACJ,IAAIpH,YAAgBsY,GAAQ,CAC1BlR,EAASpH,MACJ,CACLoH,EAAS/H,KAAKua,KAAKza,EAAEkB,MAAML,GAAQA,EAAKkD,IAAMlD,EAC9C,KAAKoH,EAAQA,EAAS,GAAIkR,GAAOtY,GAEnC,MAAOoH,GAGT,QAASsS,GAASpJ,GAChB,GAAI0J,GAAQ1J,EAAIpJ,MAAM,EACtB,KAAK,GAAItI,GAAIob,EAAM/a,OAAS,EAAGL,EAAI,EAAGA,GAAK,EAAG,CAC5C,GAAIsZ,GAAI+B,KAAKzV,UAAY5F,EAAI,GAAK,CAClC,IAAIsb,GAAOF,EAAMpb,EACjBob,GAAMpb,GAAKob,EAAM9B,EACjB8B,GAAM9B,GAAKgC,EAEb,MAAOF,GAGT,QAASL,GAAgBhW,EAAS7C,GAChC,GAAI+W,GAAO,CACX,IAAI/W,GAAWA,EAAQjB,IAAI,cAAe,CACxC,GAAIsa,IAAcrZ,EAAQjB,IAAI,iBAC9BgY,GAAOsC,EAAaxW,EAAQ1E,OAAS0E,EAAQ1E,OAASkb,CACtD,IAAItC,EAAO,EAAG,CACZ,MAAOwB,GAAW1V,EAASkU,IAG/B,MAAOlU,MAGNyW,eAAe,GAAGC,WAAW,GAAG9Z,UAAU,KAAK+Z,IAAI,SAAS3b,EAAQf,EAAOD,GAC9E,GAAI2C,GAAQ3B,EAAQ,WAAW2B,KAE/B1C,GAAOD,QAAU0U,CAEjB,SAASA,KACPhT,KAAKkb,QACLlb,MAAKmb,UAGPnI,EAAK5S,UAAUyV,OAAS,SAAUuF,GAChC,MAAOC,GAAQrb,KAAKkb,MAAOE,GAG7BpI,GAAK5S,UAAU4V,KAAO,SAAUoF,GAC9Bpb,KAAKkb,MAAME,GAAS,IACpB,OAAO,MAGTpI,GAAK5S,UAAUiR,OAAS,SAAU+J,GAChCpb,KAAKkb,MAAME,GAAS,KACpB,OAAO,OAGTpI,GAAK5S,UAAU0V,QAAU,SAAUsF,EAAOE,GACxC,GAAID,EAAQrb,KAAKkb,MAAOE,GAAQ,CAC9Bpb,KAAKgL,KAAKoQ,EAAOE,IAIrBtI,GAAK5S,UAAU6V,QAAU,SAAUmF,GACjC,OAAQpb,KAAKmb,OAAOC,QAAcjS,OAAO,GAG3C6J,GAAK5S,UAAU4K,KAAO,SAAUoQ,EAAOE,GACrC,GAAIC,GAAQvb,KAAKmb,OAAOC,EACxB,IAAIna,EAAMsa,KAAW,MAAO,CAC1BA,EAAQvb,KAAKmb,OAAOC,MAEtBG,EAAMvQ,KAAKsQ,GAGb,SAASD,GAASH,EAAOE,GACvB,GAAIpF,GAAOkF,EAAME,EACjB,IAAIpF,IAASxH,UAAW,CACtBwH,EAAOkF,EAAME,GAAS,MAExB,MAAOpF,MAGN9U,UAAU,KAAKsa,IAAI,SAASlc,EAAQf,EAAOD,GAC9C,GAAIwB,GAAIxB,CACR,IAAImd,GAAQvb,OAAOE,UAAUsb,QAC7B,IAAI7T,GAAQ8T,MAAMvb,UAAUyH,KAC5B,IAAI+T,GAAS1b,OAAOE,UAAUyb,cAC9B,IAAI9Y,GAAO+Y,SAAS1b,UAAU2C,IAC9B,IAAIgZ,GAAgBJ,MAAMK,OAC1B,IAAIC,GAAW,sBAEf3d,GAAQ8E,KAAO,YAEf9E,GAAQuC,IAAM,WACZ,OAAO,GAAIqb,OAAOC,UAGpB7d,GAAQiC,YAAc,WACpB,MAAOL,QAAOC,OAAO,MAGvB7B,GAAQ0C,MAAQ,SAAU7B,GACxB,MAAOA,IAAKsc,EAAM9b,KAAKR,KAAO,mBAAqB,MAGrDb,GAAQ2C,MAAQ,SAAU9B,GACxB,MAAOA,IAAK4c,EACRA,EAAc5c,GACdsc,EAAM9b,KAAKR,KAAO,iBAGxBb,GAAQmP,KAAO,SAAUtO,GACvB,aAAcA,KAAM,WAGtBb,GAAQyE,KAAO,SAAUqZ,EAAKrY,GAC5B,MAAOhB,GAAOgB,EAAGhB,KAAKqZ,GAAO,WAC3B,MAAOrY,GAAGnB,MAAMwZ,EAAKlZ,YAIzB5E,GAAQiQ,KAAO,SAAU8N,EAAKtY,GAC5B,GAAIxE,GAAI,IACR,IAAIG,GAAI,CACR,IAAII,EAAEmB,MAAMob,GAAM,CAChB,IAAK9c,EAAI,EAAGG,EAAI2c,EAAIzc,OAAQL,EAAIG,EAAGH,GAAK,EAAGwE,EAAGsY,EAAI9c,GAAIA,OACjD,IAAIO,EAAEkB,MAAMqb,GAAM,CACvB,IAAK9c,IAAK8c,GAAK,GAAIT,EAAOjc,KAAK0c,EAAK9c,GAAIwE,EAAGxE,EAAG8c,EAAI9c,KAItDjB,GAAQmC,MAAQ,SAAU4b,GACxB,MAAOvc,GAAE+I,UAAWwT,GAGtB/d,GAAQ8P,KAAO,SAAUiO,EAAK3N,GAC5B,GAAIpO,GAAM,IACV,IAAI+G,KACJ,IAAIvH,EAAEkB,MAAMqb,GAAM,CAChB,IAAK/b,IAAO+b,GAAK,GAAIT,EAAOjc,KAAK0c,EAAK/b,GAAM,CAC1C,GAAIoO,EAAK2D,QAAQ/R,MAAU,EAAG+G,EAAI/G,GAAO+b,EAAI/b,IAGjD,MAAO+G,GAGT/I,GAAQ2R,MAAQ,SAAUlM,EAAIuY,GAC5B,MAAOC,YAAWxY,EAAIuY,GAAM,GAG9Bhe,GAAQsF,MAAQ,SAAU4Y,GACxB,aAAcA,KAAQ,UAAYP,EAASlQ,KAAKyQ,GAGlDle,GAAQuS,KAAO,SAAU4L,GACvB,OAAQA,GAAQ,IACf3c,EAAE0N,MAAMtK,UAAW,GACjBuG,OAAOiT,GACP7L,KAAK,IAGV,SAAS6L,GAAUF,GACjB,aAAcA,KAAQ,UAAYA,EAAI5c,OAAS,EAGjDtB,EAAQkP,MAAQ,SAAUrL,EAAM6F,GAC9B,MAAOH,GAAMlI,KAAKwC,GAAO6F,GAAS,GAGpC1J,GAAQuK,OAAS8T,EAAYC,EAE7Bte,GAAQqF,MAAQgZ,EAAYE,EAE5B,SAASD,GAAUE,EAAQxc,EAAKQ,GAC9Bgc,EAAOxc,GAAOQ,EAGhB,QAAS6b,GAAaI,GACpB,MAAO,UAAUD,GACf,GAAI3a,GAAOrC,EAAE0N,MAAMtK,UAAW,EAC9BpD,GAAEyO,KAAKpM,EAAM6a,EAAaF,EAAQC,GAClC,OAAOD,IAIX,QAASE,GAAcF,EAAQC,GAC7B,MAAO,UAAUV,GACf,GAAIvc,EAAEkB,MAAMqb,GAAM,CAChBvc,EAAEyO,KAAK8N,EAAK,SAAU/b,EAAKQ,GACzBic,EAASD,EAAQxc,EAAKQ,OAM9B,QAAS+b,GAAQC,EAAQxc,EAAKQ,GAC5B,GAAIhB,EAAEkB,MAAMF,IAAUhB,EAAEkB,MAAM8b,EAAOxc,IAAO,CAC1CR,EAAE6D,MAAMmZ,EAAOxc,GAAMQ,OAChB,CACL8b,EAASE,EAAQxc,EAAKQ,UAIpBmc,IAAI,SAAS3d,EAAQf,EAAOD,SAE5B4e,IAAI,SAAS5d,EAAQf,EAAOD,IAEjC,SAAU6e,EAAMC,GACf,SAAW5e,KAAW,YAAcA,EAAOC,IAAK,CAC9CD,GAAQ,WAAY4e,OACf,UAAW9e,KAAY,SAAU,CACtC8e,EAAQ9e,EACR,UAAWC,KAAW,UAAYA,IAAW,KAAM,CACjDA,EAAOD,QAAUA,EAAQ+e,WAEtB,CACLD,EAASD,EAAKG,IAAMH,EAAKG,YAE3Btd,KAAM,SAAU1B,GAChB,YACA,IAAIkN,GAAU,OACd,IAAI3D,GAAQ8T,MAAMvb,UAAUyH,KAC5B,IAAI+T,GAAS1b,OAAOE,UAAUyb,cAE9B,SAASwB,MAETA,EAAMjd,UAAUmd,YAAcF,CAE9BA,GAAMjd,UAAUod,YAAcH,EAAMjd,UAAUqd,GAAK,SAAUC,EAAO3Z,EAAIT,GACtE,SAAWoa,KAAU,SAAU,KAAM,IAAIC,WAAU,kCACnD,UAAW5Z,KAAO,WAAY,KAAM,IAAI4Z,WAAU,qCAClD,KAAKC,EAAaje,KAAKK,KAAM0d,EAAO3Z,GAAK,CACvC8Z,EAAale,KAAKK,KAAM0d,GAAO1S,MAAOjH,GAAIA,EAAIT,KAAMA,GAAQ,QAE9D,MAAOtD,MAGTqd,GAAMjd,UAAU0d,eAAiBT,EAAMjd,UAAU2d,IAAM,SAAUL,EAAO3Z,GACtE,GAAIiE,EACJ,IAAIgW,GAAYH,EAAale,KAAKK,KAAM0d,EACxC,IAAIO,GAAWL,EAAaje,KAAKK,KAAM0d,EAAO3Z,EAC9C,IAAIka,EAAU,CACZjW,EAAQgW,EAAU3L,QAAQ4L,EAC1B,IAAIjW,GAAS,EAAGgW,EAAU7U,OAAOnB,EAAO,GAE1C,MAAOhI,MAGTqd,GAAMjd,UAAU8d,gBAAkBb,EAAMjd,UAAUkD,KAAO,SAAUoa,EAAO3Z,EAAIT,GAC5EtD,KAAKwd,YAAYE,EAAO3Z,EAAI,KAC5B,OAAO/D,MAGTqd,GAAMjd,UAAUsC,KAAO2a,EAAMjd,UAAU+d,KAAO,SAAUT,GACtD,GAAIne,GAAGG,EAAGue,EAAU9b,EAAO0F,EAAMlI,KAAKuD,WAAW2E,MAAM,EACvD,IAAImW,GAAYH,EAAale,KAAKK,KAAM0d,EACxC,IAAIA,EAAO,CACT,IAAKne,EAAI,EAAGG,EAAIse,EAAUpe,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC/C0e,EAAWD,EAAUze,EACrB,IAAI0e,EAAS3a,KAAM0a,EAAU7U,OAAO5J,EAAG,EACvC0e,GAASla,GAAGnB,MAAM,KAAMT,IAG5B,MAAOnC,MAGTqd,GAAMjd,UAAUge,mBAAqBf,EAAMjd,UAAUie,OAAS,SAAUX,GACtE,GAAIA,GAAS9B,EAAOjc,KAAKK,KAAKse,QAASZ,GAAQ,CAC7C1d,KAAKse,QAAQZ,GAAOvU,OAAO,GAE7B,MAAOnJ,MAGT,SAAS4d,GAAaF,EAAO3Z,GAC3B,GAAIxE,GAAGG,EAAGue,EAAUD,EAAYH,EAAale,KAAKK,KAAM0d,EACxD,KAAKne,EAAI,EAAGG,EAAIse,EAAUpe,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC/C0e,EAAWD,EAAUze,EACrB,IAAI0e,EAASla,KAAOA,EAAI,MAAOka,IAInC,QAASJ,GAAaH,EAAO3Z,GAC3B,GAAIwa,GAASC,EAAU7e,KAAKK,KAC5B,OAAO4b,GAAOjc,KAAK4e,EAAQb,GAASa,EAAOb,GAAUa,EAAOb,MAG9D,QAASc,KACP,MAAOxe,MAAKse,UAAYte,KAAKse,YAG/BjB,EAAM7R,QAAUA,CAChBlN,GAAQ+e,MAAQA,SAGZoB,IAAI,SAASnf,EAAQf,EAAOD,IAEjC,SAAU6e,EAAMC,GACf,SAAW5e,KAAW,YAAcA,EAAOC,IAAK,CAC9CD,GAAQ,WAAY4e,OACf,UAAW9e,KAAY,SAAU,CACtC8e,EAAQ9e,EACR,UAAWC,KAAW,UAAYA,IAAW,KAAM,CACjDA,EAAOD,QAAUA,EAAUA,EAAQ+C,UAEhC,CACL+b,EAASD,EAAKG,IAAMH,EAAKG,YAE3Btd,KAAM,SAAU1B,GAChB,YAEA,IAAIkN,GAAU,QACd,IAAIiQ,GAAQvb,OAAOE,UAAUsb,QAC7B,IAAIgD,GAAS/C,MAAMvb,UAAUyH,KAC7B,IAAI+T,GAAS1b,OAAOE,UAAUyb,cAC9B,IAAI8C,SAAiB7C,UAAS1b,UAAU2C,OAAS,UACjD,IAAI6b,GAASC,SAASD,MACtB,IAAIE,GAAc,uCAClB,IAAIC,GAAgB,mBACpB,IAAIC,SAA0BC,kBAAmB,WACjD,IAAI7b,GAAO,YAEX,IAAII,IACFtB,OAAQ,MACRuB,QAAS,GAAK,IACdyb,KAAM,KACNve,KAAM,KACNqL,QAAS,KACTmT,gBAAiB,MACjBC,aAAc,OAGhB,SAASpe,GAAM7B,GACb,MAAOA,IAAKsc,EAAM9b,KAAKR,KAAO,mBAAqB,MAGrD,QAASkgB,GAAOvC,GACd,GAAIvd,GAAGG,EAAGya,EAAGmF,EAAKnd,EAAOuc,EAAO/e,KAAKuD,WAAW2E,MAAM,EACtD,KAAKtI,EAAI,EAAGG,EAAIyC,EAAKvC,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC1C+f,EAAMnd,EAAK5C,EACX,KAAK4a,IAAKmF,GAAK,GAAI1D,EAAOjc,KAAK2f,EAAKnF,GAAI2C,EAAO3C,GAAKmF,EAAInF,GAE1D,MAAO2C,GAGT,QAASxZ,GAAKS,GACZ,GAAIC,GAAS,KACb,OAAO,YACL,GAAIA,IAAW,MAAO,CACpBA,EAAS,IACTD,GAAGnB,MAAM,KAAMM,aAKrB,QAASqc,GAAWlW,EAAK2C,GACvB,GAAIhL,EAAMgL,GAAU,CAClBA,EAAQ,gBAAkBA,EAAQ,iBAAmB3K,EAAKme,cAC1D,KAAK,GAAIlG,KAAStN,GAAS,GAAI4P,EAAOjc,KAAKqM,EAASsN,GAAQ,CAC1DjQ,EAAIoW,iBAAiBnG,EAAOtN,EAAQsN,MAK1C,QAASoG,GAAWrW,GAClB,GAAI2C,MAAc2T,EAAatW,EAAIuW,wBAAwBpN,OAAOqN,MAAM,KACxEF,GAAW7X,QAAQ,SAAUgY,GAC3B,GAAID,GAAQC,EAAOtN,OAAOqN,MAAM,IAChC,IAAIvf,GAAMuf,EAAM3Q,QAAQsD,MACxB,IAAI1R,GAAQ+e,EAAMhP,KAAK,KAAK2B,MAC5BxG,GAAQ1L,GAAOQ,GAEjB,OAAOkL,GAGT,QAAS+T,GAAe1W,GACtB,MAAO0V,GAAchT,KAAK1C,EAAI2W,kBAAkB,iBAGlD,QAASC,GAAa3X,GACpB,MAAOpI,QAAOggB,oBAAoB5X,GAAQmB,OAAO,SAAU8N,GACzD,MAAOjP,GAAOiP,KAAU/I,YACvBd,IAAI,SAAU6J,GACf,GAAIzW,GAASwH,EAAOiP,KAAU,KAAQ,GAAKjP,EAAOiP,EAClD,OAAO4I,oBAAmB5I,IAASzW,EAAQ,IAAMqf,mBAAmBrf,GAAS,MAC5E+P,KAAK,KAAKuP,QAAQ,OAAQ,KAG/B,QAASC,GAAUhX,GACjB,GAAI1I,GAAO,IACX,IAAI0I,EAAI+V,eAAiB,OAAQ,CAC/Bze,EAAO0I,EAAIiX,YACX,IAAIP,EAAe1W,IAAQ1I,EAAMA,EAAOkL,KAAKC,MAAMnL,OAC9C,CACLA,EAAO0I,EAAIkX,SAEb,MAAO5f,GAGT,QAAS6f,GAAUhW,GACjB,MAAOA,KAAW,KAAO,IAAMA,EAGjC,QAASiW,GAAcpX,GACrB,GAAIkX,IACFlX,IAAKA,EACLmB,OAAQgW,EAAUnX,EAAImB,QACtBkW,WAAYrX,EAAIqX,WAChB/f,KAAM,KACNqL,WAEF,IAAI3C,EAAIC,aAAe,EAAG,CACxBiX,EAAS5f,KAAO0f,EAAUhX,EAC1BkX,GAASvU,QAAU0T,EAAWrW,GAEhC,MAAOkX,GAGT,QAASI,GAAmBtX,EAAK3D,GAC/B,GAAI6a,GAAWE,EAAcpX,EAC7BkX,GAAS7a,MAAQA,CACjB,IAAIA,EAAM+E,MAAO8V,EAAS9V,MAAQ/E,EAAM+E,KACxC,OAAO8V,GAGT,QAASK,GAAgBvX,GACvBA,EAAIwX,mBAAqBxX,EAAIyX,QAAUzX,EAAI0X,UAAY,KAGzD,QAASC,GAAsB3X,GAC7B,GAAImB,GAASgW,EAAUnX,EAAImB,OAC3B,OAAOA,IAAU,KAAOA,EAAS,KAAOA,IAAW,IAGrD,QAASyW,GAAQ5X,EAAK3H,GACpB,MAAO4B,GAAK,SAAUT,GACpBnB,EAAGif,EAAmBtX,EAAKxG,GAAM,QAIrC,QAASqe,GAAOC,EAAQ9X,EAAK3H,GAC3B,MAAO,UAAU0f,GACf,GAAI/X,EAAIC,aAAe,EAAG,CACxBsX,EAAgBvX,EAChB,IAAI2X,EAAsB3X,GAAM,CAC9B3H,EAAG,KAAM+e,EAAcpX,QAClB,CACL4X,EAAQ5X,EAAK3H,GAAI0f,MAMzB,QAASC,GAAcxd,GACrB,GAAIyd,GAAQzd,EAAIyd,MAAMxC,EACtB,OAAOwC,IAASA,EAAM,KAAO1C,EAG/B,QAAS2C,GAAOJ,GACd,GAAItd,GAAMsd,EAAOtd,GACjB,IAAI7C,EAAMmgB,EAAO7Y,QAAS,CACxBzE,IAAQA,EAAIwO,QAAQ,QAAU,EAAI,IAAM,KAAO4N,EAAakB,EAAO7Y,QAErE,MAAOzE,GAGT,QAAS2d,GAAW3d,GAClB,GAAImb,GAAoBqC,EAAcxd,GAAM,CAC1C,MAAO,IAAIob,oBACN,CACL,MAAO,IAAIwC,iBAIf,QAASC,GAAaP,GACpB,GAAIjf,IAAUif,EAAOjf,QAAU,OAAOoQ,aACtC,IAAI4M,GAAOiC,EAAOjC,IAClB,IAAIrb,GAAM0d,EAAOJ,EAEjB,IAAI9X,GAAMmY,EAAW3d,EACrB,IAAIqb,EAAM,CACR7V,EAAIsY,KAAKzf,EAAQ2B,EAAK,KAAMqb,EAAK0C,KAAM1C,EAAK2C,cACvC,CACLxY,EAAIsY,KAAKzf,EAAQ2B,GAEnBwF,EAAI8V,gBAAkBgC,EAAOhC,eAC7B9V,GAAI+V,aAAe+B,EAAO/B,YAC1B/V,GAAI5F,QAAU0d,EAAO1d,OACrB8b,GAAWlW,EAAK8X,EAAOnV,QACvB,OAAO3C,GAGT,QAASyY,GAAezY,EAAK3H,GAC3B,MAAO,UAAU0f,GACf,GAAIA,EAAGW,iBAAkB,CACvBrgB,EAAG0f,EAAIA,EAAGY,OAASZ,EAAG1Y,WACjB,CACLhH,EAAG0f,KAKT,QAASa,GAAqBd,GAC5B,MAAOA,IAAUngB,EAAMmgB,EAAOnV,WACxBmV,EAAOnV,QAAQ,iBAAmBmV,EAAOnV,QAAQ,kBAClD,MAGP,QAASkW,GAAa7Y,EAAK8X,GACzB,GAAIxgB,GAAOwgB,EAAOxgB,IAClB,IAAIK,EAAMmgB,EAAOxgB,OAASgb,MAAMK,QAAQmF,EAAOxgB,MAAO,CACpD,GAAIshB,EAAqBd,KAAY,MAAO,CAC1C9X,EAAIoW,iBAAiB,eAAgB,oBAEvC9e,EAAOkL,KAAKsW,UAAUhB,EAAOxgB,MAE/B,MAAOA,GAGT,QAASyhB,GAAgB1gB,EAAI2gB,GAC3B,MAAO,YACLC,aAAaD,EACb3gB,GAAGkB,MAAM,KAAMM,YAInB,QAASwG,GAAQyX,EAAQzf,EAAI6gB,GAC3B,GAAIlZ,GAAMqY,EAAaP,EACvB,IAAIxgB,GAAOuhB,EAAa7Y,EAAK8X,EAC7B,IAAIzJ,GAAeuJ,EAAQ5X,EAAK3H,EAEhC,IAAIid,EAAS,CACXtV,EAAI0X,UAAYrJ,MACX,CACL,GAAI2K,GAAY9F,WAAW,QAAS/S,KAClC,GAAIH,EAAIC,aAAe,EAAG,CACxBD,EAAIG,UAEL2X,EAAO1d,QACV/B,GAAK0gB,EAAgB1gB,EAAI2gB,EACzB3K,GAAeuJ,EAAQ5X,EAAK3H,GAG9B2H,EAAIwX,mBAAqBK,EAAOC,EAAQ9X,EAAK3H,EAC7C2H,GAAIyX,QAAUpJ,CACd,UAAW6K,KAAa,WAAY,CAClClZ,EAAImZ,WAAaV,EAAezY,EAAKkZ,GAGvC,IACElZ,EAAI1H,KAAKhB,GAAQ,MACjB,MAAOtC,GACPqZ,EAAarZ,GAGf,OAASgL,IAAKA,EAAK8X,OAAQA,GAG7B,QAASsB,GAAevgB,GACtB,MAAO,UAAU2B,EAAKpC,EAASC,EAAI6gB,GACjC,GAAIhjB,GAAGG,EAAG4f,EAAM,IAChB,IAAI6B,GAAS9B,KAAW7b,GAAYtB,OAAQA,GAC5C,IAAIC,GAAOuc,EAAO/e,KAAKuD,UAEvB,KAAK3D,EAAI,EAAGG,EAAIyC,EAAKvC,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC1C+f,EAAMnd,EAAK5C,EACX,UAAW+f,KAAQ,WAAY,CAC7B,GAAInd,EAAKvC,SAAYL,EAAI,SAAa4C,GAAK5C,EAAI,KAAO,WAAY,CAChEgjB,EAAWjD,MACN,CACL5d,EAAK4d,OAEF,IAAIte,EAAMse,GAAM,CACrBD,EAAO8B,EAAQ7B,OACV,UAAWA,KAAQ,WAAa6B,EAAOtd,IAAK,CACjDsd,EAAOtd,IAAMyb,GAIjB,MAAO5V,GAAQyX,EAAQzf,GAAM0B,EAAMmf,IAIvC,QAASlhB,GAAK8f,EAAQxgB,EAAMe,EAAI6gB,GAC9B,MAAOE,GAAe,OAAO7f,MAAM,KAAMM,WAG3C7B,EAAKmK,QAAUA,CACfnK,GAAKmC,SAAWA,CAChBnC,GAAKme,eAAiB,YACtBne,GAAKb,IAAMiiB,EAAe,MAC1BphB,GAAKO,KAAO6gB,EAAe,OAC3BphB,GAAKQ,IAAM4gB,EAAe,MAC1BphB,GAAKW,MAAQygB,EAAe,QAC5BphB,GAAKY,KAAOwgB,EAAe,OAC3BphB,GAAKU,OAASV,EAAKS,IAAM2gB,EAAe,SAExC,OAAOnkB,GAAQ+C,KAAOA,SAGlBqhB,IAAI,SAASpjB,EAAQf,EAAOD,IACjC,SAAU6e,EAAMC,GACf,SAAW5e,KAAW,YAAcA,EAAOC,IAAK,CAC9CD,GAAQ,WAAY4e,OACf,UAAW9e,KAAY,SAAU,CACtC8e,EAAQ9e,EACR,UAAWC,KAAW,UAAYA,IAAW,KAAM,CACjDA,EAAOD,QAAUA,EAAUA,EAAQ4O,aAEhC,CACLkQ,EAAQD,MAEVnd,KAAM,SAAU1B,GAChB,YAEA,SAAS4O,GAAQkP,GACf,GAAIuG,GAAQrV,EAAI7C,QAChB2R,GAAMA,GAAO,IAEb,SAAS9O,KACPsV,EAAQ1f,WACPuG,OAAO,SAAU1F,GAChB,aAAcA,KAAO,aAEtB+D,QAAQ,SAAU/D,GACjB4e,EAAM3X,KAAKjH,IAEb,OAAOqY,GAGT9O,EAAI9E,IAAM,QAASA,KACjB,GAAIwP,GAAM7V,EAAOygB,EAAQ1f,UAEzB,UAAWf,GAAKA,EAAKvC,OAAS,KAAO,WAAY,CAC/CoY,EAAO7V,EAAKgP,MAGd,IAAKwR,EAAM/iB,OAAQ,CACjB,GAAIoY,EAAMA,EAAKrY,KAAKyc,EACpB,QAGF,GAAI3R,GAAQkY,EAAM9a,OAClB1F,GAAK6I,KAAK5C,EAEV,SAASya,KACP,GAAI9e,GAAK0G,EAAMyE,OACfnL,GAAGnB,MAAMwZ,EAAKja,GAGhB,QAASiG,GAAKvF,EAAKigB,GACjB,GAAIjgB,GAAOigB,IAAQrY,EAAM7K,OAAQ,CAC/B6K,EAAQ,IACR,IAAIuN,EAAMA,EAAKrY,KAAKyc,EAAKvZ,EAAKigB,OACzB,CACLD,KAIJA,IAGFvV,GAAIyV,OAAS,SAAUxL,GACrB,IAAK,GAAIhY,GAAI,EAAGG,EAAIijB,EAAM/iB,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC/C,GAAIwE,GAAK4e,EAAMpjB,EACf,IAAIwE,IAAOwT,GAAQxT,EAAGwT,OAASA,EAAM,CACnCoL,EAAMxZ,OAAO5J,EAAG,EAChB,SAKN+N,GAAIjN,MAAQ,WACVsiB,EAAMxZ,OAAO,GAGf,OAAOmE,GAGT,QAASsV,GAAQI,GACf,GAAI7gB,GAAO,GAAIwZ,OAAMqH,EAAMpjB,OAC3B,KAAK,GAAIL,GAAI,EAAGG,EAAIyC,EAAKvC,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC9C4C,EAAK5C,GAAKyjB,EAAMzjB,GAElB,MAAO4C,GAGT+K,EAAQ1B,QAAU,OAClBlN,GAAQ4O,QAAUA,cAGT,IAAI"}