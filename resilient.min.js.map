{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","Cache","this","store","Object","create","prototype","flush","key","emptyObject","get","clone","set","data","time","now","value","exists","isObj","isArr","./utils",2,"resolver","http","Client","_resilient","path","options","cb","send","post","put","del","delete","patch","head","method","args","normalizeArgs","requester","apply","emit","isFullUrlSchema","plainHttpRequest","arguments","mergeHttpOptions","noop","wrapCallback","once","finalRequestHandler","err","res","defaults","timeout","$timeout","merge","isURI","url","_httpClient","fn","called","./http","./resolver",3,"service","timeouts","servers","retry","waitBeforeRetry","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","roundRobin","roundRobinSize","weight","success","error","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","enableSelfRefresh","forceRefreshOnStart","refreshServersInterval","refreshServers","refreshOptions","refreshPath","resilientOptions",4,"Servers","Requester","ResilientError","CONCURRENCY","ServersDiscovery","middleware","_middleware","getOptions","getServers","hasDiscoveryServers","updateServersInParallel","buf","sort","pending","counter","onServersUpdateFn","onUpdateServers","onUpdateInParallelFn","onUpdateInParallel","slice","forEach","server","index","pool","concat","updateServers","next","fetchServers","params","addTimeStamp","run","handler","total","decrement","reset","extend","qs","_time","closeAndEmptyPendingRequests","isEmptyBuffer","closePendingRequest","splice","client","xhr","readyState","closeClient","abort","filter","request","./error","./requester","./servers",5,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,1007,"status","stack","message",6,"IS_BROWSER","JSON_MIME","resolveModule","HttpClient","VERSION","mapResponse","body","statusCode","isJSONContent","JSON","parse","test","headers","mapOptions","mapRequestBody","defineUserAgent","getUserAgent","LIBRARY_VERSION","json","requestWrapper","lil-http",7,"Options","Resilient","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",8,"midware","hooks","Middleware","createPool","use","middlewares","toArr","isFn","map","passArgs","register","type","hook","hooksMiddleware","in","out","mw","opts",9,"omit","getRaw","setServers","each","bind","undefined","defaultOptions","keys",10,"operation","getOperation","serversList","getServersList","requestNextServer","previousError","shift","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","getPreviousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","onRetry","retrier","updateDiscoveryServersAndRetry","delay","retryWait","resolve","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","push","mapAndResolve","resolution","join","basePath","getTimeout","toLowerCase","arr","v","pop","_sync","unlock","DiscoveryResolver","update","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","some","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","indexOf","toUpperCase","m","trim","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",11,"EventBus","Sync","cache","_client","_options","list","serversURL","urls","discoveryServers","resetScore","resetStats","latestServers","getUpdatedServers","discoverServers","discoveryOptions","serviceOptions","httpOptions","useHttpClient","restoreHttpClient","serversUpdated","updated","lastUpdate","refresh","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./middleware","./resolvers/discovery","./sync","lil-event",12,"Resolver","sync","wrapHandler","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServiceServers","updateServiceServers","getRefreshServers","getRefreshOptions","locked","enqueue","onRefreshServers","lock","dequeue","mErr","refreshDiscoveryServers","outdated","canUpdateDiscoveryServers","serversAreUpdated","interval","handleResolution","_cache","getRefreshBasePath","./discovery",13,"ServiceResolve","fetch","fetchHandler","../discovery","../error","../requester","./service",14,"isCacheEnabled","getCache","name","saveServers","refreshCache","errorHandler","resolveFromCache","resolveWithError","hasValidCache","expires","handleResponse","done","isValidResponse","defineServers","valid","parseAsJSON","../utils",15,"roundRobinSerie","size","getRandom","ps","k","j","rs","max","Math","round","random",16,"balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","field","statsStore","createServerStats","read","createStats","write","number","toFixed",17,"RoundRobin","mapServers","empty","x","y","roundRobinSort","find","isValidURI","uri","mapServer","./roundrobin","./server",18,"locks","queues","state","getSync","task","queue",19,"toStr","toString","Array","hasOwn","hasOwnProperty","Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","obj","ms","setTimeout","str","base","notEmpty","objIterator","extender","merger","target","iterator","eachArgument",20,21,"root","factory","Event","lil","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents",22,"slicer","hasBind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","auth","withCredentials","responseType","assign","cur","setHeaders","defaultContent","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","split","header","isJSONResponse","getResponseHeader","encodeParams","getOwnPropertyNames","encodeURIComponent","replace","parseData","responseText","response","getStatus","buildResponse","statusText","buildErrorResponse","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","onLoad","config","ev","isCrossOrigin","match","getURL","XHRFactory","XMLHttpRequest","createClient","open","user","password","updateProgress","lengthComputable","loaded","hasContentTypeHeader","buildPayload","stringify","timeoutResolver","timeoutId","clearTimeout","progress","onprogress","requestFactory",23,"calls","exec","end"],"mappings":"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"}