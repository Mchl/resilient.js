{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","data","headers","withCredentials","responseType","isObj","extend","target","x","cur","args","arguments","once","fn","called","apply","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","trim","split","forEach","header","key","shift","value","join","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","map","encodeURIComponent","replace","parseData","responseText","JSON","parse","response","buildResponse","status","readyState","buildErrorResponse","error","message","stack","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","cb","err","onLoad","config","ev","console","log","url","isCrossOrigin","match","getURL","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","lengthComputable","loaded","total","hasContentTypeHeader","buildPayload","isArray","stringify","request","progress","errorHandler","onprogress","send","requestFactory","options","get","post","put","del","patch","head",2,"_","Cache","store","flush","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","requester","delete","emit","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","finalHandler","res","merge","isURI","_httpClient","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","_queue","dispatcher","splice","resolve","push","update","fetch","handler","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","cache","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse","parseAsJSON",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","bind","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"getServersList","operation","sort","getOperation","serversList","requestNextServer","previousError","server","basePath","requestHandler","sendRequest","handleMissingServers","waitBeforeRetry","hasDiscoveryServers","updateAndRetry","delay","nextServer","start","requestReporter","isErrorResponse","reportError","report","resolveRequest","getHttpClient","onRetry","resolution","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","discoveryServers","list","getUpdatedServers","latestServers","discoverServers","urls","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","refreshDiscoveryServers","outdated","serversAreUpdated","updated","handleResolution","getRefreshBasePath",14,"arr","size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"balancerOptions","Server","statsStore","createServerStats","stats","calculateAvgLatency","balance","calculateStatsBalance","read","createStats","write","getWeightAvg","number",16,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","counter","decrement","reset","pending","index","concat","onUpdateInParallel","closePendingRequests","floor","_time","isEmptyBuffer","closePendingRequest","closeClient","abort",17,"RoundRobin","forceUpdate","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",18,"Function","isArrayNative","uriRegex","Date","getTime","ctx","obj","ms","setTimeout","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}