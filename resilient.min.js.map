{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","Cache","this","store","Object","create","prototype","flush","key","emptyObject","get","clone","set","data","time","now","value","exists","isObj","isArr","./utils",2,"resolver","http","Client","_resilient","path","options","cb","send","post","put","del","delete","patch","head","method","args","normalizeArgs","requester","apply","emit","isFullUrlSchema","plainHttpRequest","arguments","mergeHttpOptions","noop","wrapCallback","once","finalRequestHandler","err","res","defaults","timeout","$timeout","merge","isURI","url","_httpClient","fn","called","./http","./resolver",3,"service","timeouts","servers","retry","waitBeforeRetry","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","roundRobin","roundRobinSize","weight","success","error","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","enableSelfRefresh","forceRefreshOnStart","refreshServersInterval","refreshServers","refreshOptions","refreshPath","resilientOptions",4,"Servers","Requester","ResilientError","CONCURRENCY","ServersDiscovery","middleware","_middleware","getOptions","getServers","hasDiscoveryServers","updateServersInParallel","buf","sort","pending","counter","onServersUpdateFn","onUpdateServers","onUpdateInParallelFn","onUpdateInParallel","slice","forEach","server","index","pool","concat","updateServers","next","fetchServers","params","addTimeStamp","run","handler","total","decrement","reset","extend","qs","_time","closeAndEmptyPendingRequests","isEmptyBuffer","closePendingRequest","splice","client","xhr","readyState","closeClient","abort","filter","request","./error","./requester","./servers",5,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,1007,"status","stack","message",6,"Evaluator","strategies","add","strategy","push","eval","some",7,"IS_BROWSER","JSON_MIME","resolveModule","HttpClient","VERSION","mapResponse","body","statusCode","isJSONContent","JSON","parse","test","headers","mapOptions","mapRequestBody","defineUserAgent","getUserAgent","LIBRARY_VERSION","json","requestWrapper","lil-http",8,"Options","Resilient","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",9,"midware","hooks","Middleware","createPool","use","middlewares","toArr","isFn","map","passArgs","register","type","hook","hooksMiddleware","in","out","mw","opts",10,"omit","getRaw","setServers","each","bind","undefined","defaultOptions","keys",11,"operation","getOperation","serversList","getServersList","requestNextServer","previousError","shift","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","getPreviousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","onRetry","retrier","updateDiscoveryServersAndRetry","delay","retryWait","resolve","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","mapAndResolve","resolution","join","basePath","getTimeout","toLowerCase","arr","v","pop","_sync","unlock","DiscoveryResolver","update","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","indexOf","toUpperCase","m","trim","isUnavailableStatus","_failStrategies","isErrorStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","Sync","cache","_client","_options","list","serversURL","urls","discoveryServers","resetScore","resetStats","latestServers","getUpdatedServers","discoverServers","discoveryOptions","serviceOptions","httpOptions","useHttpClient","restoreHttpClient","serversUpdated","updated","lastUpdate","refresh","mock","mockFn","unmock","failStrategy","addFailStrategy","defineMethodProxy","verb","./cache","./evaluator","./middleware","./resolvers/discovery","./sync","lil-event",13,"Resolver","sync","wrapHandler","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServiceServers","updateServiceServers","getRefreshServers","getRefreshOptions","locked","enqueue","onRefreshServers","lock","dequeue","mErr","refreshDiscoveryServers","outdated","canUpdateDiscoveryServers","serversAreUpdated","interval","handleResolution","_cache","getRefreshBasePath","./discovery",14,"ServiceResolve","fetch","fetchHandler","../discovery","../error","../requester","./service",15,"isCacheEnabled","getCache","name","saveServers","refreshCache","errorHandler","resolveFromCache","resolveWithError","hasValidCache","expires","handleResponse","done","isValidResponse","defineServers","valid","parseAsJSON","../utils",16,"roundRobinSerie","size","getRandom","ps","k","j","rs","max","Math","round","random",17,"balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","field","statsStore","createServerStats","read","createStats","write","number","toFixed",18,"RoundRobin","mapServers","empty","x","y","roundRobinSort","find","isValidURI","uri","mapServer","./roundrobin","./server",19,"locks","queues","state","getSync","task","queue",20,"toStr","toString","Array","hasOwn","hasOwnProperty","Function","isArrayNative","isArray","uriRegex","Date","getTime","ctx","obj","ms","setTimeout","str","base","notEmpty","objIterator","extender","merger","target","iterator","eachArgument",21,22,"root","factory","Event","lil","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents",23,"slicer","hasBind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","auth","withCredentials","responseType","assign","cur","setHeaders","defaultContent","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","split","header","isJSONResponse","getResponseHeader","encodeParams","getOwnPropertyNames","encodeURIComponent","replace","parseData","responseText","response","getStatus","buildResponse","statusText","buildErrorResponse","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","onLoad","config","ev","isCrossOrigin","match","getURL","XHRFactory","XMLHttpRequest","createClient","open","user","password","updateProgress","lengthComputable","loaded","hasContentTypeHeader","buildPayload","stringify","timeoutResolver","timeoutId","clearTimeout","progress","onprogress","requestFactory",24,"calls","exec","end"],"mappings":"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"}