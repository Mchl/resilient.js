{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","map","getAllResponseHeaders","split","forEach","header","trim","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","value","encodeURIComponent","join","replace","parseData","data","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","getURL","config","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","isArray","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","key","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","emit","requester","delete","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","once","finalHandler","res","getOptions","merge","isURI","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","cache","parallel","cacheExpiration","enableRefreshServers","refreshInterval","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","_queue","dispatcher","splice","resolve","push","update","fetch","handler","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","bind","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"getServersList","operation","sort","getOperation","serversList","nextServer","previousError","server","shift","basePath","requestHandler","sendRequest","handleMissingServers","delayRetry","hasDiscoveryServers","updateAndRetry","delay","start","requestReport","isErrorResponse","reportError","report","getHttpClient","onRetry","_httpClient","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_options","_client","setOptions","setDiscoveryOptions","setServiceOptions","getHttpOptions","discoveryServers","list","discoverServers","getUpdatedServers","getLatestServers","urls","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","VERBS","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServers","getRefreshServers","getRefreshOptions","onRefreshServers","outdate","serversAreUpdated","updated","handleResolution","getRefreshBasePath",14,"arr","size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"Server","setStats","stats","getStats","calculateAvgLatency","getBalance","applyOptions","calculateStatsBalance","read","createStats","write","getWeightAvg","number",16,"getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","index","concat","onUpdateInParallel","closePendingRequests","floor","_time","isEmptyBuffer","closePendingRequest","closeClient","abort",17,"RoundRobin","force","y","roundRobinSort","find","mapServers","empty","forceUpdate","isValidURI","uri","mapServer","./roundrobin","./server",18,"Function","isArrayNative","uriRegex","Date","getTime","ctx","fn","obj","ms","setTimeout","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}