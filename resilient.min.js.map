{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","hasBind","Function","bind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","data","headers","withCredentials","responseType","isObj","assign","target","x","cur","args","arguments","once","fn","called","apply","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","trim","split","forEach","header","key","shift","value","join","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","map","encodeURIComponent","replace","parseData","responseText","JSON","parse","response","getStatus","status","buildResponse","statusText","readyState","buildErrorResponse","error","stack","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","cb","err","onLoad","config","ev","isCrossOrigin","url","match","getURL","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","lengthComputable","loaded","total","hasContentTypeHeader","buildPayload","isArray","stringify","timeoutResolver","timeoutId","clearTimeout","request","progress","errorHandler","setTimeout","abort","onprogress","send","requestFactory","options","get","post","put","del","patch","head",2,"_","Cache","store","flush","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","requester","delete","emit","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","finalHandler","res","merge","isURI","_httpClient","./http","./resolver",4,"service","timeouts","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","_queue","dispatcher","splice","resolve","push","update","fetch","handler","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","cache","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse","parseAsJSON",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"message","create",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"getServersList","operation","sort","getOperation","serversList","requestNextServer","previousError","server","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","previousResponse","shouldOmitRetryCycle","getFirstValue","waitBeforeRetry","hasDiscoveryServers","updateAndRetry","delay","nextServer","start","requestReporter","shouldOmitFallbackOnErrorCode","reportError","isErrorResponse","shouldOmitFallbackOnMethod","memoizeReponse","report","getHttpClient","mapAndResolve","resolution","basePath","getTimeout","toLowerCase","arr","v","onRetry","shouldOmitOnErrorCode","shouldOmitOnMethod","methods","codes","matchHttpMethod","m","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","discoveryServers","list","resetScore","resetStats","getUpdatedServers","latestServers","discoverServers","urls","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","refreshDiscoveryServers","outdated","serversAreUpdated","updated","handleResolution","getRefreshBasePath",14,"size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","statsStore","createServerStats","read","createStats","write","getWeightAvg","number",16,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","counter","decrement","reset","pending","index","concat","onUpdateInParallel","closePendingRequests","extend","_time","isEmptyBuffer","closePendingRequest","closeClient",17,"RoundRobin","forceUpdate","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",18,"isArrayNative","uriRegex","Date","getTime","ctx","obj","ms","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}