{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","hasBind","Function","bind","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","data","headers","withCredentials","responseType","isObj","assign","target","x","cur","args","arguments","once","fn","called","apply","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","rawHeaders","getAllResponseHeaders","trim","split","forEach","header","key","shift","value","join","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","map","encodeURIComponent","replace","parseData","responseText","JSON","parse","response","getStatus","status","buildResponse","statusText","readyState","buildErrorResponse","error","stack","cleanReferences","onreadystatechange","onerror","ontimeout","isValidResponseStatus","onError","cb","err","onLoad","config","ev","isCrossOrigin","url","match","getURL","indexOf","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","lengthComputable","loaded","total","hasContentTypeHeader","buildPayload","isArray","stringify","timeoutResolver","timeoutId","clearTimeout","request","progress","errorHandler","setTimeout","abort","onprogress","send","requestFactory","options","get","post","put","del","patch","head",2,"_","Cache","store","emptyObject","flush","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","requester","delete","emit","isFullUrlSchema","plainHttpRequest","mergeHttpOptions","wrapCallback","finalRequestHandler","res","$timeout","merge","isURI","_httpClient","./http","./resolver",4,"create","service","timeouts","servers","retry","retryWait","discoverBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","parallel","cacheEnabled","cacheExpiration","refreshInterval","enableRefreshServers","refreshServersInterval","refreshServers","refreshOptions","refreshPath","useDiscoveryServersToRefresh","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","ServersDiscovery","DiscoveryResolver","finish","dispatchQueue","updateServers","_updating","resolve","_queue","push","update","fetch","handler","queue","splice","dispatcher","./discovery-servers","./error","./requester","./servers","./servers-discovery",6,"saveServers","setServers","refreshCache","handlerError","isCacheEnabled","resolveFromCache","resolveWithError","cache","getCache","hasValidCache","_cache","valid","expires","defineServers","isValidResponse","parseAsJSON",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"message",8,"resolveModule","JSON_MIME","client","mapResponse","requestWrapper","mapOptions","body","statusCode","isJSONContent","setUserAgent","qs","mapRequestBody","getUserAgent","LIBRARY_VERSION","json","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","each","omit","getRaw","defaultOptions","keys","defineDefaults","buf",11,"operation","getOperation","serversList","getServersList","requestNextServer","previousError","server","defineRequestOptions","requestHandler","resolveRequest","sendRequest","handleMissingServers","sort","previousResponse","cachedPreviousResponse","responseObj","getFirstValue","shouldOmitRetryCycle","retryRequest","waitBeforeRetry","retrier","updateDiscoveryServersAndRetry","delay","nextServer","start","requestReporter","shouldOmitFallback","reportError","isErrorResponse","memoizeResponse","report","getHttpClient","mapAndResolve","resolution","basePath","getTimeout","toLowerCase","arr","v","onRetry","hasDiscoveryServers","shouldOmitOnErrorCode","shouldOmitOnMethod","shouldOmitWhenRules","shouldOmitFallbackOnErrorCode","shouldOmitFallbackOnMethod","methods","rules","ruleFilter","rule","matchRuleMethod","matchRuleStatusCode","matchHttpMethod","codes","m","isErrorStatus","isUnavailableStatus","isInvalidStatus","checkResponseStatus",12,"EventBus","_discovering","_discoveryQueue","_client","_options","discoveryOptions","serviceOptions","getHttpOptions","serversURL","urls","discoveryServers","list","resetScore","resetStats","getUpdatedServers","latestServers","discoverServers","flushCache","useHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","mock","mockFn","unmock","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","next","hasDiscoveryServersOutdated","updateDiscoveryServers","hasValidServiceServers","updateServersFromDiscovery","getRefreshServers","getRefreshOptions","onRefreshServers","dispatchAfterDiscovery","refreshDiscoveryServers","dispacher","outdated","canUpdateDiscoveryServers","handleResolution","serversAreUpdated","updated","getRefreshBasePath",14,"size","getRandom","ps","k","j","rs","pop","max","Math","round","random",15,"balancerOptions","Server","stats","calculateAvgLatency","balance","calculateStatsBalance","statsStore","createServerStats","read","createStats","write","getWeightAvg","number",16,"getOptions","getServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","counter","decrement","reset","pending","index","concat","onUpdateInParallel","closePendingRequests","extend","_time","isEmptyBuffer","closePendingRequest","closeClient",17,"RoundRobin","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",18,"isArrayNative","uriRegex","Date","getTime","ctx","obj","ms","str","base","part","objIterator","extender","merger","iterator","iterateEachArgument",19,20,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}