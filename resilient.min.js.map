{"version":3,"sources":["resilient.js"],"names":["e","exports","module","define","amd","f","window","global","self","resilient","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"root","factory","http","lil","this","VERSION","toStr","Object","prototype","toString","slicer","Array","slice","hasOwn","hasOwnProperty","origin","location","originRegex","jsonMimeRegex","hasDomainRequest","XDomainRequest","noop","defaults","method","timeout","auth","headers","async","withCredentials","responseType","isObj","extend","target","x","cur","args","arguments","setHeaders","xhr","defaultContent","field","setRequestHeader","getHeaders","map","getAllResponseHeaders","split","forEach","header","trim","isJSONResponse","test","getResponseHeader","encodeParams","params","getOwnPropertyNames","filter","name","undefined","value","encodeURIComponent","join","replace","parseData","data","responseText","JSON","parse","response","buildResponse","status","buildErrorResponse","error","message","stack","onError","cb","called","err","onLoad","readyState","isCrossOrigin","url","match","getURL","config","XHRFactory","XMLHttpRequest","createClient","toUpperCase","open","user","password","updateProgress","ev","evt","lengthComputable","loaded","total","request","progress","isArray","stringify","errorHandler","onload","onerror","ontimeout","onabort","onprogress","send","requestFactory","options","apply","get","post","put","del","patch","head",2,"_","Cache","store","flush","key","clone","time","exists","isArr","set","now","./utils",3,"resolver","Client","_resilient","path","normalizeArgs","emit","requester","isFullUrl","plainHttp","mergeHttpOptions","wrapCallback","res","getHttpOptions","merge","isURI","./http","./resolver",4,"service","servers","retry","retryWait","discoverBeforeRetry","balancer","enable","roundRobin","roundRobinSize","weight","success","latency","discovery","cache","refresh","parallel","cacheExpiration","resilientOptions",5,"ResilientError","Servers","Requester","DiscoveryServers","DiscoveryResolver","getOptions","getServers","isUpdating","_updating","hasDiscoveryServers","_queue","push","updateServers","fetchServers","addTimeStamp","updateServersInParallel","onUpdateServers","buf","sort","server","index","concat","once","onUpdateInParallel","isEmptyBuffer","splice","closePendingRequests","client","close","update","fetch","indexOf","Math","floor","random","abort","./discovery-servers","./error","./requester","./servers",6,"defineServers","handlerError","isValidResponse","saveServers","setServers","refreshCache","isCacheEnabled","resolveFromCache","resolveWithError","getCache","hasValidCache","_cache","valid","expires",7,"MESSAGES",1000,1001,1002,1003,1004,1005,1006,"create",8,"resolveModule","mapResponse","requestWrapper","setUserAgent","body","statusCode","isJSONContent","getUserAgent","LIBRARY_VERSION","../bower_components/lil-http/http",9,"Resilient","Options","ResilientFactory","CLIENT_VERSION","./client","./defaults","./options","./resilient",10,"type","getRaw","each","bind","omit","defaultOptions","keys","defineDefaults",11,"getServersList","operation","getOperation","serversList","next","previousError","shift","basePath","sendRequest","requestHandler","handleMissingServers","delayRetry","delay","discoveryServers","start","isUnavailableStatus","reportError","report","resolve","handler","getHttpClient","_httpClient","isInvalidStatus",12,"EventBus","VERBS","_client","setOptions","setDiscoveryOptions","setServiceOptions","list","discoverServers","flushCache","setHttpClient","restoreHttpClient","areServersUpdated","lastUpdate","defineMethodProxy","verb","./cache","./discovery-resolver","lil-event",13,"Resolver","hasServers","isUpToDate","updated","forceUpdate","handleResolution",14,"arr","size","RoundRobin","getRandom","ps","k","j","rs","pop","max","round",15,"Server","setStats","stats","getStats","calculateAvgLatency","getBalance","applyOptions","balance","calculateStatsBalance","read","createStats","write","getWeightAvg","number",16,"force","y","roundRobinSort","find","mapServers","empty","isValidURI","uri","mapServer","./roundrobin","./server",17,"Function","isArrayNative","uriRegex","Date","getTime","ctx","fn","obj","objIterator","extender","merger","ms","setTimeout","str","base","part","iterator","eachArgument",18,19,"Event","constructor","addListener","on","event","TypeError","findListener","getListeners","removeListener","off","listeners","listener","addOnceListener","fire","removeAllListeners","offAll","_events","events","getEvents"],"mappings":"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"}