/*! resilient - v0.1 - MIT License - https://github.com/h2non/resilient */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.resilient=t()}}(function(){var t,e,n;return function r(t,e,n){function o(u,a){if(!e[u]){if(!t[u]){var f=typeof require=="function"&&require;if(!a&&f)return f(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var p=e[u]={exports:{}};t[u][0].call(p.exports,function(e){var n=t[u][1][e];return o(n?n:e)},p,p.exports,r,t,e,n)}return e[u].exports}var i=typeof require=="function"&&require;for(var u=0;u<n.length;u++)o(n[u]);return o}({1:[function(e,n,r){(function(e,o){if(typeof t==="function"&&t.amd){t(["exports"],o)}else if(typeof r==="object"){o(r);if(typeof n==="object"&&n!==null){n.exports=r=r.http}}else{o(e.lil=e.lil||{})}})(this,function(t){var e="0.1.2";var n=Object.prototype.toString;var r=Array.prototype.slice;var o=location.origin;var i=/^(http[s]?:\/\/[a-z0-9\-\.\:]+)[\/]?/i;var u={method:"GET",timeout:30*1e3,auth:null,headers:null,async:true,withCredentials:false,responseType:"text"};function a(t){return t&&n.call(t)==="[object Object]"}function f(t){return t&&n.call(t)==="[object Array]"}function s(t){var e,n,o,i,u=r.call(arguments).slice(1);for(e=0,n=u.length;e<n;e+=1){i=u[e];for(o in i)if(i.hasOwnProperty(o)){t[o]=i[o]}}return t}function p(t,e){if(a(e)){e["Content-Type"]=e["Content-Type"]||E.defaultContent;for(var n in e){t.setRequestHeader(n,e[n])}}}function c(t){var e={},n=t.getAllResponseHeaders().split("\n");n.forEach(function(t){if(t){t=t.split(":");e[t[0].trim()]=(t[1]||"").trim()}});return e}function d(t){var e,n=t.getResponseHeader("Content-Type");if(t.responseType==="text"){e=t.responseText;if(n==="application/json")e=JSON.parse(e)}else{e=t.response}return e}function v(t){return{xhr:t,status:t.status,data:d(t),headers:c(t)}}function y(t,e){var n=v(t);n.error=e;return n}function h(t,e){var n=false;return function(r){if(!n){e(y(t,r),null);n=true}}}function g(t,e){return function(){if(t.readyState===4){if(t.status>=200&&t.status<300){e(null,v(t))}else{e(v(t),null)}}}}function m(t){var e=t.match(i);return e&&e[1]===o}function T(t){var e=null;var n=(t.method||"GET").toUpperCase();var r=t.auth||{};var o=t.url;if(m(o)){if(typeof XDomainRequest!=="undefined"){e=new XDomainRequest}}else{e=new XMLHttpRequest}e.open(n,o,t.async,r.user,r.password);e.withCredentials=t.withCredentials;e.responseType=t.responseType;e.timeout=t.timeout;p(e,t.headers);return e}function w(t,e){return function(t){if(evt.lengthComputable){e(t,evt.loaded/evt.total)}else{e(t)}}}function b(t,e,n){var r=T(t);var o=a(t.data)||f(t.data)?JSON.stringify(t.data):t.data;var i=h(r,e);r.onload=g(r,e);r.onerror=i;r.ontimeout=i;r.onabort=i;if(typeof n==="function")r.onprogress=w(r,n);try{r.send(o)}catch(u){i(u)}return r}function x(t){return function(e,n,o,i){var f=s({},u,{method:t});var p=r.call(arguments);var c,d=null;for(c=0,l=p.length;c<l;c+=1){d=p[c];if(typeof d==="function"){o=d;if(o!==d)i=d}else if(a(d)){s(f,d)}else if(typeof d==="string"){f.url=d}}return b(f,o,i)}}function E(t,e,n,r){return x("GET").apply(null,arguments)}E.VERSION=e;E.defaults=u;E.defaultContent="text/plain";E.get=x("GET");E.post=x("POST");E.put=x("PUT");E.del=x("DELETE");E.patch=x("PATCH");E.head=x("HEAD");return t.http=E})},{}],2:[function(t,e,n){var r=t("../bower_components/lil-http/http");var o=t("./server");var i="0.1.0";e.exports=u;u.Servers=o;u.VERSION=i;function u(t){var e={};function n(t,e,n,o){var u=[];if(typeof t==="string")u.push(t);if(typeof e==="object")u.push(e);r.apply(r,u.concat([i(n,arguments),o]))}function o(t){return t.status>=429||t.status===0}function i(t,e){return function r(i,u){if(i&&o(i)){return n.apply(null,e)}t(i,u)}}n.httpOptions={};n.balanceOptions={};function u(t){return function(){r[t].apply()}}n.get=function(){};n.post=function(){};n.put=function(){};n.del=function(){};n.patch=function(){};n.head=function(){};return n}},{"../bower_components/lil-http/http":1,"./server":3}],3:[function(t,e,n){e.exports=r;function r(t){this.uri=t;this.stats={read:o(),write:o()}}r.prototype.report=function(t,e,n){var r=this.getStats(t);if(r){r[e]+=1;if(n>0)r.latency+=n}};r.prototype.getBalance=function(t){var e=this.getStats(t);var n=this.getLatency(t);var r=e.request+e.error;return e.request*100/r*35+e.error*100/r*50+n*15/100};r.prototype.getLatency=function(t){var e=this.getStats(t);return e.latency/(e.request+e.error)};r.prototype.getStats=function(t,e){var n=this.stats[t||"read"];if(n&&e)n=n[e];return n};r.prototype.getURI=function(){return this.uri};function o(){return{latency:0,error:0,request:0}}},{}]},{},[2])(2)});
//# sourceMappingURL=resilient.min.js.map