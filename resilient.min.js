/*! resilient - v0.4.0 - MIT License - https://github.com/resilient-http/resilient.js */
(function(t){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else{var e;if(typeof window!=="undefined"){e=window}else if(typeof global!=="undefined"){e=global}else if(typeof self!=="undefined"){e=self}else{e=this}e.resilient=t()}})(function(){var t,e,r;return function t(e,r,n){function i(s,u){if(!r[s]){if(!e[s]){var f=typeof require=="function"&&require;if(!u&&f)return f(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[s].exports}var o=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){var n=t("./utils");e.exports=i;function i(){this.store=Object.create(null)}i.prototype.flush=function(t){if(t){this.store[t]=null}else{this.store=n.emptyObject()}};i.prototype.get=function(t){return t?this.store[t]:n.clone(this.store)};i.prototype.set=function(t,e){if(t){this.store[t]={data:e,time:n.now()}}};i.prototype.time=function(t){var e=this.store[t];return e?e.time:null};i.prototype.exists=function(t){var e=this.store[t];return n.isObj(e)&&(n.isArr(e.data)&&e.data.length>0||n.isObj(e.data))||false}},{"./utils":20}],2:[function(t,e,r){var n=t("./utils");var i=t("./resolver");var o=t("./http");e.exports=s;function s(t){this._resilient=t}s.prototype.get=function(t,e,r){return this.send(t,e,r,"GET")};s.prototype.post=function(t,e,r){return this.send(t,e,r,"POST")};s.prototype.put=function(t,e,r){return this.send(t,e,r,"PUT")};s.prototype.del=s.prototype.delete=function(t,e,r){return this.send(t,e,r,"DELETE")};s.prototype.patch=function(t,e,r){return this.send(t,e,r,"PATCH")};s.prototype.head=function(t,e,r){return this.send(t,e,r,"HEAD")};s.prototype.send=function(t,e,r,i){var o=f.call(this,t,e,r,i);var s=o[0];var a=o[1];var c=new Promise(function(t,e){this._resilient.emit("request:start",s,this._resilient);u.apply(this,[s,function(r,n){if(r){e(r)}else{t(n)}a(r,n)}])}.bind(this));if(a!==n.noop){c.then(a).catch(a)}return c};function u(t,e){if(l(t)){return h(this._resilient,t,e)}else{return i(this._resilient,t,e)}}function f(t,e,r,i){if(typeof e==="function"){r=e;e=arguments[0]}e=c(this._resilient,n.isObj(e)?e:n.emptyObject());if(typeof t==="string")e.path=t;if(typeof i==="string")e.method=i;if(typeof r!=="function")r=n.noop;return[e,a(this._resilient,r)]}function a(t,e){return p(function r(n,i){t.emit("request:finish",n,i,t);e(n,i)})}function c(t,e){var r=t.options("service").get();if(e.timeout){e.$timeout=e.timeout}return n.merge(r,e)}function l(t){return t&&(n.isURI(t.path)||n.isURI(t.url))||false}function h(t,e,r){if(e.path){e.url=e.path;e.path=null}return(t._httpClient||o)(e,r)}function p(t){var e=false;return function(){if(e===false){e=true;t.apply(null,arguments)}}}},{"./http":7,"./resolver":13,"./utils":20}],3:[function(t,e,r){var n=e.exports=Object.create(null);n.service={method:"GET",timeout:10*1e3,timeouts:null,servers:null,retry:0,waitBeforeRetry:50,discoverBeforeRetry:true,promiscuousErrors:false,omitRetryWhen:null,omitFallbackWhen:null,omitRetryOnMethods:null,omitFallbackOnMethods:null,omitRetryOnErrorCodes:null,omitFallbackOnErrorCodes:null};n.balancer={enable:true,random:false,roundRobin:false,roundRobinSize:3,balanceStrategy:null,disableWeight:false,weight:{success:15,error:20,latency:.001}};n.discovery={servers:null,method:"GET",retry:3,parallel:true,waitBeforeRetry:1e3,timeout:2*1e3,cacheEnabled:true,cacheExpiration:60*15*1e3,promiscuousErrors:true,refreshInterval:60*2*1e3,enableRefreshServers:true,enableSelfRefresh:false,forceRefreshOnStart:true,refreshServersInterval:60*5*1e3,refreshServers:null,refreshOptions:null,refreshPath:null,omitRetryWhen:null,omitFallbackWhen:null,omitRetryOnMethods:null,omitFallbackOnMethods:null,omitRetryOnErrorCodes:null,omitFallbackOnErrorCodes:null};n.resilientOptions=["servers","retry","timeouts","$timeout","parallel","cacheEnabled","cacheExpiration","refreshInterval","refreshServers","refreshOptions","refreshPath","waitBeforeRetry","promiscuousErrors","omitRetryWhen","omitFallbackWhen","omitRetryOnMethods","omitFallbackOnMethods","omitRetryOnErrorCodes","omitFallbackOnErrorCodes","enableRefreshServers","refreshServersInterval","discoverBeforeRetry","enableSelfRefresh","forceRefreshOnStart"]},{}],4:[function(t,e,r){var n=t("./utils");var i=t("./servers");var o=t("./requester");var s=t("./error");var u=3;e.exports=f;function f(t,e,r){var f=o(t);var p=t._middleware;function v(){return n.merge(t.options("discovery").get(),e)}function y(){return r||t.servers("discovery")}function d(){var t=y();return t&&t.exists()||false}function g(e,r){var n=[];var o=y().sort("read",t.balancer());var s=c(o.length);var l=h(r,n);var p=a(o,s,l);o.slice(0,u).forEach(function(t,r){var s=[t];if(r===2&&o.length>u){s=s.concat(o.slice(u))}f(new i(s),e,p,n)(null)})}function w(t,e){if(t.parallel){g(t,e)}else{f(y(),t,h(e))(null)}}function m(t){var e=v();e.params=l(e);p.run("discovery","out")(e,function(r){if(r){t(new s(1007,r))}else{w(e,t)}})}return function t(e){if(d()===false){e(new s(1002))}else{m(e)}}}function a(t,e,r){return function t(n,i){var o=e();if(n==null||o===0){e(true);r(n,i)}}}function c(t){t=t>2?u:t;return function e(r){return t=r?-1:t-1}}function l(t){return n.extend(t.params||t.qs||{},{_time:n.now()})}function h(t,e){return function(r,n){p(e);t(r||null,n)}}function p(t){if(t){if(!d(t)){t.forEach(v)}t.splice(0)}}function v(t){if(t){if(t.xhr){if(t.xhr.readyState!==4){y(t.xhr)}}else{y(t)}}}function y(t){if(typeof t.abort==="function"){try{t.abort()}catch(t){}}}function d(t){return t.filter(function(t){return n.isObj(t)}).length===0}},{"./error":5,"./requester":11,"./servers":18,"./utils":20}],5:[function(t,e,r){e.exports=i;var n={1e3:"All requests failed. No servers available",1001:"Cannot update discovery servers. Empty or invalid response body",1002:"Missing discovery servers. Cannot resolve the server",1003:"Cannot resolve servers. Missing data",1004:"Discovery server response is invalid or empty",1005:"Missing servers during retry process",1006:"Internal unexpected error",1007:"Middleware error"};function i(t,e){if(e instanceof Error){Error.call(this);this.error=e;if(e.code)this.code=e.code;if(e.stack)this.stack=e.stack}else if(e){this.request=e}this.status=t;this.message=n[this.status];if(t===1007&&e){this.message+=": "+(e.message||e)}}i.prototype=Object.create(Error.prototype);i.MESSAGES=n},{}],6:[function(t,e,r){e.exports=n;function n(){this.strategies=[]}n.prototype.add=function(t){if(typeof t==="function"){this.strategies.push(t)}};n.prototype.eval=function(t,e){return this.strategies.some(function(r){return r(t,e)})}},{}],7:[function(t,e,r){var n=t("./utils");var i=typeof window==="object"&&window;var o=/application\/json/i;var s=v();e.exports=u;function u(){return s.apply(null,arguments)}u.VERSION=s.VERSION;u.mapResponse=f;function f(t){return function(e,r,n){if(r&&r.statusCode){r.status=r.statusCode}if(n){try{(e||r).data=a(e||r)?JSON.parse(n):n}catch(t){e=t}}t(e,r)}}function a(t){return typeof t.body==="string"&&o.test(t.headers["content-type"])}function c(t){if(typeof t==="string"){t={url:t}}else{t=t||{}}if(t.params)t.qs=t.params;if(t.data)p(t);if(!i)l(t);return t}function l(t){t.headers=t.headers||{};if(!t.headers["User-Agent"]){t.headers["User-Agent"]=h()}}function h(){return"resilient-http "+u.LIBRARY_VERSION+" (node)"}function p(t){var e=t.data||t.body;if(e&&n.isObj(e)||n.isArr(e)){t.json=true;t.data=null}t.body=e}function v(){if(i){return t("lil-http")}else{return y(t("request"))}}function y(t){return function e(r,n){return t(c(r),f(n))}}},{"./utils":20,"lil-http":30,request:21}],8:[function(t,e,r){var n=t("./http");var i=t("./client");var o=t("./options");var s=t("./defaults");var u=t("./resilient");e.exports=u;u.VERSION="0.4.0";u.CLIENT_VERSION=n.VERSION;u.defaults=s;u.Options=o;u.Client=i;u.request=n;n.LIBRARY_VERSION=u.VERSION;if(typeof window!=="undefined"&&typeof t==="function"){window.resilient=u}},{"./client":2,"./defaults":3,"./http":7,"./options":10,"./resilient":12}],9:[function(t,e,r){var n=t("./utils");var i=t("midware");var o=["in","out"];e.exports=s;function s(){this.pool=u()}s.prototype.use=function(t,e){var r=this.pool;var i=n.toArr(e);i.filter(n.isFn).map(a(t)).forEach(c(r))};s.prototype.run=function(t,e){return this.pool[t][e].run};function u(){return{discovery:f(),service:f()}}function f(){return{in:i(),out:i()}}function a(t){return function(e){var r=e.type||"service";var n=t.options(r);return{type:r,handler:e(n,t)}}}function c(t){return function(e){var r="in";var i=e.handler;if(n.isFn(i)){if(i.hook==="out"){r="out"}t[e.type][r](i)}if(n.isObj(i)){o.filter(function(t){return n.isFn(i[t])}).forEach(function(r){t[e.type][r](i[r])})}}}},{"./utils":20,midware:31}],10:[function(t,e,r){var n=t("./utils");var i=t("./defaults");var o=t("./servers");e.exports=s;function s(t,e){this.store=e?n.clone(i[e]):Object.create(null);this.set(t)}s.prototype.get=function(t){return t?this.store[t]:n.clone(this.store)};s.prototype.http=function(){return n.omit(this.store,i.resilientOptions)};s.prototype.clone=function(){return s.define(u(this.store))};s.prototype.servers=function(t){return t?this.setServers(t):this.store.servers};s.prototype.setServers=function(t){if(this.store.servers){this.store.servers.set(t)}else{this.store.servers=new o(t)}};s.prototype.set=function(t,e){if(n.isObj(t)){n.each(t,n.bind(this,this.set))}else if(e!==undefined){if(t==="servers"){this.setServers(e)}else{if(t==="refreshServers"){e=new o(e)}this.store[t]=e}}};s.define=function(t,e){var r=new s;var n=t||{};Object.keys(e||i).filter(function(t){return t!=="resilientOptions"}).forEach(function(t){r.set(t,new s(n[t],t))});return r};function u(t){var e={};n.each(t,function(t,r){if(r instanceof s){e[t]=r.get()}});return e}},{"./defaults":3,"./servers":18,"./utils":20}],11:[function(t,e,r){var n=t("./utils");var i=t("./http");var o=t("./error");var s=t("./defaults").resilientOptions;e.exports=u;function u(t){return function e(r,i,o,s){var u=L(i.method);var c=f(t,r,u);i=n.clone(i);return function e(n){var f=null;var l=c.shift();if(l){i=g(l,i);f=p(l,u,i,d(o),e,t);y(t,i,f,s)}else{a(t,r,i,n,o)}}}}function f(t,e,r){if(t.balancer().get("enable")){return e.sort(r,t.balancer())}else{return e.get()}}function a(t,e,r,n,i){var s=n();var u=m(s);if(E(r,u)){i.apply(null,s)}else if(r.retry){c(t,e,r,i)}else{i(new o(1e3,u))}}function c(t,e,r,n){var i=h(t,e,r,n);var o=l(i,r);if(r.discoverBeforeRetry){b(t,o)}else{o()}}function l(t,e){return function(){n.delay(t,e.waitBeforeRetry)}}function h(t,e,r,n){return function(){if(e.exists()){r.retry-=1;t.emit("request:retry",r,e);u(t)(e,r,n)()}else{n(new o(1005))}}}function p(t,e,r,i,o,s){var u=n.timer();return function n(f,a){var c=u();s.emit("request:incoming",f,a,r,s);if(O(r,f||a)){t.reportError(e,c);i(f,a)}else if(T(s,r,f,a)){t.reportError(e,c);s.emit("request:fallback",r,f||a);o(v(f,a))}else{t.report(e,c);i(f,a)}}}function v(t,e){return function(r){return[t,e]}}function y(t,e,r,i){t.emit("request:outgoing",e,t);try{var o=P(t)(n.omit(e,s),r);if(i)i.push(o)}catch(t){r(t)}}function d(t){var e=i.mapResponse(t);return function(t,r){var n=t||r;var i=n?n.body||n.data:null;e(t,r,i)}}function g(t,e){e.url=n.join(t.url,e.basePath,e.path);e.timeout=w(e);return e}function w(t){var e=t.$timeout||t.timeout;var r=t.timeouts;var i=t.method;if(!t.$timeout&&n.isObj(r)){e=r[i]||r[i.toLowerCase()]||e}return e}function m(t){return t.filter(function(t){return t!=null}).pop()}function b(t,e){if(t.hasDiscoveryServers()){t._sync.unlock("updating");u.DiscoveryResolver.update(t,null,e)}else{e()}}function E(t,e){return I(t.omitRetryOnErrorCodes,e?e.status:null)||C(t.omitRetryOnMethods,t.method)||S(t.omitRetryWhen,t.method,e)}function O(t,e){return j(t,e)||A(t)||S(t.omitFallbackWhen,t.method,e)}function A(t){var e=t.omitFallbackOnMethods;return C(e,t.method)}function S(t,e,r){return n.isArr(t)&&r&&r.status&&t.some(_(e,r))}function _(t,e){return function(r){return n.isObj(r)&&R(r,t)&&x(r,e.status)}}function R(t,e){return t.method&&t.method===e||n.isArr(t.methods)&&B(t.methods,e)}function x(t,e){return e&&(t.code&&t.code===e||n.isArr(t.codes)&&I(t.codes,e))}function j(t,e){var r=t.omitFallbackOnErrorCodes;return e&&I(r,e.status)}function C(t,e){return n.isArr(t)&&t.length&&B(t,e)}function I(t,e){return e&&n.isArr(t)&&t.length&&~t.indexOf(e)&&e>=300}function B(t,e){e=(e||"GET").toUpperCase();return t.filter(function(t){return typeof t==="string"}).map(function(t){return t.toUpperCase().trim()}).some(function(t){return t===e})}function T(t,e,r,n){return k(r,n)||t._failStrategies.eval(r,n)||e.promiscuousErrors&&q(r||n)}function k(t,e){return t&&(t.code!==undefined||t.status===undefined&&e===undefined)||U(t||e)||false}function U(t){return M(429,t)}function q(t){return M(400,t)}function M(t,e){return e&&!e.code&&(e.status>=t||e.status===0)||false}function L(t){return t.toUpperCase()==="GET"?"read":"write"}function P(t){return typeof t._httpClient==="function"?t._httpClient:i}},{"./defaults":3,"./error":5,"./http":7,"./utils":20}],12:[function(t,e,r){var n=t("lil-event");var i=t("./utils");var o=t("./sync");var s=t("./cache");var u=t("./client");var f=t("./options");var a=t("./middleware");var c=t("./evaluator");var l=t("./resolvers/discovery");e.exports=h;function h(t){if(!(this instanceof h))return new h(t);this.cache=new s;this._sync=new o;this._client=new u(this);this._middleware=new a;this._failStrategies=new c;this._options=f.define(t)}h.prototype=Object.create(n.prototype);h.prototype.servers=function(t){var e=this.options(t||"service");return e?e.servers():null};h.prototype.setServers=function(t,e){this.options(e||"service").servers(t);return this};h.prototype.serversURL=function(t){var e=this.servers(t);return e?e.urls():null};h.prototype.discoveryServers=function(t){if(i.isArr(t)){this.options("discovery").servers(t)}else{return this.servers("discovery")}};h.prototype.hasDiscoveryServers=function(){var t=this.discoveryServers();return i.isObj(t)&&t.exists()||false};h.prototype.resetScore=h.prototype.resetStats=function(t){var e=this.options(t||"service").servers();if(e){e.resetStats()}return this};h.prototype.latestServers=h.prototype.getUpdatedServers=function(t,e){e=typeof t==="function"?t:e;if(this.discoveryServers()){this.discoverServers(t,e)}else if(this.servers("service")){e(null,this.servers("service").urls())}else{e(new Error("Missing servers"))}return this};h.prototype.discoverServers=function(t,e){return p(this,"fetch",t,e)};h.prototype.updateServers=function(t,e){return p(this,"update",t,e)};function p(t,e,r,n){if(typeof r==="function"){n=r;r=null}l[e](t,r,n||i.noop);return t}h.prototype.options=function(t,e){if(t&&i.isObj(e)){var r=this._options.get(t);if(r instanceof f){r.set(e)}return}if(i.isObj(t)){this._options=f.define(t);return}return this._options.get(t)};h.prototype.discoveryOptions=function(t){if(t){this.options("discovery",t)}else{return this.options("discovery").get()}};h.prototype.serviceOptions=function(t){if(t){this.options("service",t)}else{return this.options("service").get()}};h.prototype.httpOptions=function(t){var e=this.options(t||"service");if(e)return e.http()};h.prototype.useHttpClient=function(t){if(typeof t==="function"){this._httpClient=t}return this};h.prototype.restoreHttpClient=function(){this._httpClient=null;return this};h.prototype.serversUpdated=function(){var t=this.servers().lastUpdate();var e=this.options("discovery").get("refreshInterval")||0;return t<e};h.prototype.balancer=function(t){if(t){this.options("balancer",t)}else{return this.options("balancer")}};h.prototype.send=h.prototype.request=function(t,e,r){return this._client.send(t,e,r)};h.prototype.mock=function(t){this.useHttpClient(function(e,r){i.delay(function(){t(e,r)})});return this};h.prototype.unmock=function(){this.restoreHttpClient();return this};h.prototype.use=function(){this._middleware.use(this,arguments);return this};h.prototype.http=h.prototype.client=function(){return this._client};h.prototype.failStrategy=h.prototype.addFailStrategy=function(t){this._failStrategies.add(t);return this};["get","post","put","del","delete","head","patch"].forEach(function t(e){h.prototype[e]=function(t,r,n){return this._client[e](t,r,n)}})},{"./cache":1,"./client":2,"./evaluator":6,"./middleware":9,"./options":10,"./resolvers/discovery":14,"./sync":19,"./utils":20,"lil-event":29}],13:[function(t,e,r){var n=t("./utils");var i=t("./servers");var o=t("./requester");var s=t("./error");var u=t("./discovery");var f=t("./resolvers/discovery");e.exports=a;function a(t,e,r){r=_(r);var n=t._sync;var a=t._middleware;try{p(A)}catch(t){r(new s(1006,t))}function p(t){if(m()){v(t)}else if(E()){t()}else if(b()){w(t)}else{t(new s(1002))}}function v(e){var r=d();var i=l(r);var o=h(r);if(n.locked("discovering")){n.enqueue("discovering",y(r,e))}else{n.lock("discovering");u(t,o,i)(y(r,e))}}function y(t,e){return function(r,i){n.unlock("discovering");n.dequeue("discovering").forEach(function(t){t(r,i)});a.run("discovery","in")(r,i,function(n){if(r||n){e(new s(r?1001:1007,r||n))}else if(i&&i.data){g(i.data,t);w(e)}else{e(new s(1004,r))}})}}function d(){return t.options("discovery")}function g(e,r){t.emit("discovery:refresh",e,t);r.servers(e)}function w(e){f.update(t,null,e)}function m(){var t=false;var e=d();var r=e.get("servers");if(c(e)){if(r&&r.exists()){if(e.get("forceRefreshOnStart")){t=r.updated===0}if(!t){t=r.lastUpdate()>e.get("refreshServersInterval")}}else{t=true}}return t}function b(){return t.hasDiscoveryServers()}function E(){var e=t.servers();return e&&e.exists()&&O(e)||false}function O(t){var e=d().get("refreshInterval");if(b()){return t.lastUpdate()<e}return true}function A(t,e){t?r(t):S(e)}function S(n){var u=t.servers();var f=o(t);if(n&&n._cache){u=new i(n.data)}else if(!E()){return r(new s(1003))}a.run("service","out")(u,e,function(t){if(t){r(new s(1007,t))}else{f(u,e,r)(null)}})}function _(t){return function(e,r){a.run("service","in")(e,r,function(n){if(e||n){t(e||new s(1007,n))}else{t(null,r)}})}}}function c(t){var e=t.get("refreshServers");return t.get("enableRefreshServers")&&(t.get("enableSelfRefresh")||e&&e.exists())}function l(t){var e=t.get("enableSelfRefresh")?"servers":"refreshServers";return t.get(e)}function h(t){var e=n.omit(t.get(),["servers","refreshOptions"]);var r=n.merge(e,t.get("refreshOptions"),{discoverBeforeRetry:false});var i=p(t.get());if(i)r.basePath=i;return r}function p(t){return t&&(t.refreshPath||n.isObj(t.refreshOptions)&&t.refreshOptions.basePath)||false}},{"./discovery":4,"./error":5,"./requester":11,"./resolvers/discovery":14,"./servers":18,"./utils":20}],14:[function(t,e,r){var n=t("../error");var i=t("../requester");var o=t("../discovery");var s=t("./service");e.exports=u;i.DiscoveryResolver=u;function u(t,e,r){var n=t._sync;function i(t){return function(e,r){n.unlock("updating");n.dequeue("updating").forEach(function(t){t(e,r)});t(e,r)}}function s(s){n.lock("updating");o(t,e,r)(i(s))}return function t(e){if(n.locked("updating")){n.enqueue("updating",e)}else{s(e)}}}u.update=function(t,e,r){u(t,e)(s(t)(r))};u.fetch=function(t,e,r){u(t,e)(f(r))};function f(t){return function(e,r){if(e){t(e)}else if(r&&r.data){t(null,r.data)}else{t(new n(1001,r))}}}},{"../discovery":4,"../error":5,"../requester":11,"./service":15}],15:[function(t,e,r){var n=t("../utils");var i=t("../error");e.exports=o;function o(t){var e=t._middleware;var r=t.options("discovery");function o(){return r.get("cacheEnabled")}function u(){return t.cache.get("servers")}function a(e,r){t.emit("servers:"+e,r,t)}function c(e,r){var n=e.data;a("refresh",n);t.setServers(n);v(n);r(null,e)}function l(t,e){if(o()){h(t,e)}else{f(t,e)}}function h(t,e){var r=u();if(p(r)){e(null,{status:200,_cache:true,data:r.data})}else{f(t,e)}}function p(t){var e=r.get("cacheExpiration");return t&&n.isArr(t.data)&&n.now()-t.time>e||false}function v(e){if(o()){a("cache",e);t.cache.set("servers",e)}}function y(t,e,r){if(t){l(t,r)}else if(s(e)){c(e,r)}else{r(new i(1004,e))}}return function t(r){return function t(n,i){e.run("discovery","in")(n,i,function(t){y(n||t,i,r)})}}}function s(t){var e=false;if(t){if(n.isArr(t.data)&&t.data.length){e=true}else if(typeof t.data==="string"){e=u(t)}}return e}function u(t){try{t.data=JSON.parse(t.data);return true}catch(t){return false}}function f(t,e){var r=new i(t.status,t||{status:1e3});return e(r)}},{"../error":5,"../utils":20}],16:[function(t,e,r){e.exports=n;function n(t,e){var r=+e<2?2:e;var n=i(r,t).shift();return[].concat.apply([],n)}function i(t,e){var r;var n;var i;var o=[];if(!e){e=[];for(r=1;r<=t;r+=1)e.push(r)}else{e=e.slice()}if(t%2===1){e.push(-1);t+=1}for(n=0;n<t-1;n+=1){o[n]=[];for(i=0;i<t/2;i+=1){if(e[i]!==-1&&e[t-1-i]!==-1){o[n].push([e[i],e[t-1-i]])}}e.splice(1,0,e.pop())}return o}},{}],17:[function(t,e,r){t("console.table");var n=t("./defaults").balancer;e.exports=i;function i(t,e){this.url=t;this.index=e+1;this.resetStats()}i.prototype.report=function(t,e,r){var n=this.stats(t);if(n){n[r||"request"]+=1;n.latency=f(e||0,n)}};i.prototype.reportError=function(t,e){this.report(t,e,"error")};i.prototype.balance=function(t,e){var r=this.stats(t);var i=n.weight;var o=r.request+r.error;return o?u(r,i,o,this.index):0};i.prototype.stats=function(t,e){var r=this.statsStore[t||"read"];if(r&&e)r=r[e];return r};i.prototype.resetStats=function(){this.statsStore=o()};function o(){return{read:s(),write:s()}}function s(){return{latency:0,error:0,request:0}}function u(t,e,r,n){var i=t.request/r*e.success;var o=t.error/r*e.error;var s=t.latency*e.latency;return(i+o+s+n+r).toFixed(2)}function f(t,e){return(t+e.latency)/(e.request+e.error)}},{"./defaults":3,"console.table":25}],18:[function(t,e,r){var n=t("./utils");var i=t("./server");var o=t("./roundrobin");e.exports=s;function s(t){this.servers=[];this.updated=0;this.set(t)}s.prototype.get=function(){return this.servers.slice(0)};s.prototype.set=function(t){if(n.isArr(t)){this.updated=n.now();this.servers=f.call(this,t)}};s.prototype.lastUpdate=function(){return n.now()-this.updated};s.prototype.empty=function(){return this.servers.length===0};s.prototype.exists=function(){return this.size()>0};s.prototype.size=function(){return this.servers.length};s.prototype.urls=function(){return this.servers.map(function(t){return t.url})};s.prototype.resetStats=function(){this.servers.forEach(function(t){t.resetStats()})};s.prototype.sort=function(t,e){var r=this.servers.slice(0);if(r.length){if(!e.get("disableWeight")){r.sort(function(r,n){return r.balance(t,e)-n.balance(t,e)})}if(typeof e.get("balanceStrategy")==="function"){r=e.get("balanceStrategy")(r)}else if(e.get("random")){r=c(r)}else if(e.get("roundRobin")){r=l(r,e)}}return r};s.prototype.find=function(t){var e=null;for(var r=0,n=this.servers.length;r<n;r+=1){if(this.servers[r].url===t){e=this.servers[r];break}}return e};function u(t){if(n.isObj(t))t=t.url||t.uri;return n.isURI(t)}function f(t){return t.filter(u).map(n.bind(this,a))}function a(t,e){var r;if(t instanceof i){r=t}else{r=this.find(n.isObj(t)?t.url:t);if(!r)r=new i(t,e)}return r}function c(t){var e=t.slice(0);for(var r=e.length-1;r>0;r-=1){var n=Math.random()*(r+1)|0;var i=e[r];e[r]=e[n];e[n]=i}return e}function l(t,e){var r=0;if(e&&e.get("roundRobin")){var n=+e.get("roundRobinSize");r=n>t.length?t.length:n;if(r>1){return o(t,r)}}return t}},{"./roundrobin":16,"./server":17,"./utils":20}],19:[function(t,e,r){var n=t("./utils").isArr;e.exports=i;function i(){this.locks={};this.queues={}}i.prototype.locked=function(t){return o(this.locks,t)};i.prototype.lock=function(t){this.locks[t]=true;return true};i.prototype.unlock=function(t){this.locks[t]=false;return false};i.prototype.enqueue=function(t,e){if(o(this.locks,t)){this.push(t,e)}};i.prototype.dequeue=function(t){return(this.queues[t]||[]).splice(0)};i.prototype.push=function(t,e){var r=this.queues[t];if(n(r)===false){r=this.queues[t]=[]}r.push(e)};function o(t,e){var r=t[e];if(r===undefined){r=t[e]=false}return r}},{"./utils":20}],20:[function(t,e,r){var n=r;var i=Object.prototype.toString;var o=Array.prototype.slice;var s=Object.prototype.hasOwnProperty;var u=Function.prototype.bind;var f=Array.isArray;var a=/^http[s]?\:\/\/(.+)/i;r.noop=function(){};r.now=function(){return(new Date).getTime()};r.timer=function(){var t=n.now();return function e(){return n.now()-t}};r.emptyObject=function(){return Object.create(null)};r.isObj=function(t){return t&&i.call(t)==="[object Object]"||false};r.isArr=function(t){return t&&f?f(t):i.call(t)==="[object Array]"};r.isFn=function(t){return typeof t==="function"};r.bind=function(t,e){return u?e.bind(t):function(){return e.apply(t,arguments)}};r.each=function(t,e){var r=null;var i=0;if(n.isArr(t)){for(r=0,i=t.length;r<i;r+=1)e(t[r],r)}else if(n.isObj(t)){for(r in t)if(s.call(t,r))e(r,t[r])}};r.clone=function(t){return n.extend({},t)};r.omit=function(t,e){var r=null;var i={};if(n.isObj(t)){for(r in t)if(s.call(t,r)){if(e.indexOf(r)===-1)i[r]=t[r]}}return i};r.delay=function(t,e){return setTimeout(t,e||1)};r.isURI=function(t){return typeof t==="string"&&a.test(t)};r.join=function(t){return(t||"")+n.toArr(arguments,1).filter(c).join("")};function c(t){return typeof t==="string"&&t.length>0}r.toArr=function(t,e){return o.call(t,+e||0)};r.extend=h(l);r.merge=h(v);function l(t,e,r){t[e]=r}function h(t){return function(e){var r=n.toArr(arguments,1);n.each(r,p(e,t));return e}}function p(t,e){return function(r){if(n.isObj(r)){n.each(r,function(r,n){e(t,r,n)})}}}function v(t,e,r){if(n.isObj(r)&&n.isObj(t[e])){n.merge(t[e],r)}else{l(t,e,r)}}},{}],21:[function(t,e,r){},{}],22:[function(t,e,r){"use strict";r.byteLength=c;r.toByteArray=l;r.fromByteArray=v;var n=[];var i=[];var o=typeof Uint8Array!=="undefined"?Uint8Array:Array;var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var u=0,f=s.length;u<f;++u){n[u]=s[u];i[s.charCodeAt(u)]=u}i["-".charCodeAt(0)]=62;i["_".charCodeAt(0)]=63;function a(t){var e=t.length;if(e%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}return t[e-2]==="="?2:t[e-1]==="="?1:0}function c(t){return t.length*3/4-a(t)}function l(t){var e,r,n,s,u;var f=t.length;s=a(t);u=new o(f*3/4-s);r=s>0?f-4:f;var c=0;for(e=0;e<r;e+=4){n=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)];u[c++]=n>>16&255;u[c++]=n>>8&255;u[c++]=n&255}if(s===2){n=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4;u[c++]=n&255}else if(s===1){n=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2;u[c++]=n>>8&255;u[c++]=n&255}return u}function h(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[t&63]}function p(t,e,r){var n;var i=[];for(var o=e;o<r;o+=3){n=(t[o]<<16)+(t[o+1]<<8)+t[o+2];i.push(h(n))}return i.join("")}function v(t){var e;var r=t.length;var i=r%3;var o="";var s=[];var u=16383;for(var f=0,a=r-i;f<a;f+=u){s.push(p(t,f,f+u>a?a:f+u))}if(i===1){e=t[r-1];o+=n[e>>2];o+=n[e<<4&63];o+="=="}else if(i===2){e=(t[r-2]<<8)+t[r-1];o+=n[e>>10];o+=n[e>>4&63];o+=n[e<<2&63];o+="="}s.push(o);return s.join("")}},{}],23:[function(t,e,r){"use strict";var n=t("base64-js");var i=t("ieee754");r.Buffer=f;r.SlowBuffer=w;r.INSPECT_MAX_BYTES=50;var o=2147483647;r.kMaxLength=o;f.TYPED_ARRAY_SUPPORT=s();if(!f.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function s(){try{var t=new Uint8Array(1);t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return t.foo()===42}catch(t){return false}}function u(t){if(t>o){throw new RangeError("Invalid typed array length")}var e=new Uint8Array(t);e.__proto__=f.prototype;return e}function f(t,e,r){if(typeof t==="number"){if(typeof e==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return h(t)}return a(t,e,r)}if(typeof Symbol!=="undefined"&&Symbol.species&&f[Symbol.species]===f){Object.defineProperty(f,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}f.poolSize=8192;function a(t,e,r){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(Z(t)){return y(t,e,r)}if(typeof t==="string"){return p(t,e)}return d(t)}f.from=function(t,e,r){return a(t,e,r)};f.prototype.__proto__=Uint8Array.prototype;f.__proto__=Uint8Array;function c(t){if(typeof t!=="number"){throw new TypeError('"size" argument must be a number')}else if(t<0){throw new RangeError('"size" argument must not be negative')}}function l(t,e,r){c(t);if(t<=0){return u(t)}if(e!==undefined){return typeof r==="string"?u(t).fill(e,r):u(t).fill(e)}return u(t)}f.alloc=function(t,e,r){return l(t,e,r)};function h(t){c(t);return u(t<0?0:g(t)|0)}f.allocUnsafe=function(t){return h(t)};f.allocUnsafeSlow=function(t){return h(t)};function p(t,e){if(typeof e!=="string"||e===""){e="utf8"}if(!f.isEncoding(e)){throw new TypeError('"encoding" must be a valid string encoding')}var r=m(t,e)|0;var n=u(r);var i=n.write(t,e);if(i!==r){n=n.slice(0,i)}return n}function v(t){var e=t.length<0?0:g(t.length)|0;var r=u(e);for(var n=0;n<e;n+=1){r[n]=t[n]&255}return r}function y(t,e,r){if(e<0||t.byteLength<e){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<e+(r||0)){throw new RangeError("'length' is out of bounds")}var n;if(e===undefined&&r===undefined){n=new Uint8Array(t)}else if(r===undefined){n=new Uint8Array(t,e)}else{n=new Uint8Array(t,e,r)}n.__proto__=f.prototype;return n}function d(t){if(f.isBuffer(t)){var e=g(t.length)|0;var r=u(e);if(r.length===0){return r}t.copy(r,0,0,e);return r}if(t){if(K(t)||"length"in t){if(typeof t.length!=="number"||Q(t.length)){return u(0)}return v(t)}if(t.type==="Buffer"&&Array.isArray(t.data)){return v(t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(t){if(t>=o){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+o.toString(16)+" bytes")}return t|0}function w(t){if(+t!=t){t=0}return f.alloc(+t)}f.isBuffer=function t(e){return e!=null&&e._isBuffer===true};f.compare=function t(e,r){if(!f.isBuffer(e)||!f.isBuffer(r)){throw new TypeError("Arguments must be Buffers")}if(e===r)return 0;var n=e.length;var i=r.length;for(var o=0,s=Math.min(n,i);o<s;++o){if(e[o]!==r[o]){n=e[o];i=r[o];break}}if(n<i)return-1;if(i<n)return 1;return 0};f.isEncoding=function t(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};f.concat=function t(e,r){if(!Array.isArray(e)){throw new TypeError('"list" argument must be an Array of Buffers')}if(e.length===0){return f.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<e.length;++n){r+=e[n].length}}var i=f.allocUnsafe(r);var o=0;for(n=0;n<e.length;++n){var s=e[n];if(!f.isBuffer(s)){throw new TypeError('"list" argument must be an Array of Buffers')}s.copy(i,o);o+=s.length}return i};function m(t,e){if(f.isBuffer(t)){return t.length}if(K(t)||Z(t)){return t.byteLength}if(typeof t!=="string"){t=""+t}var r=t.length;if(r===0)return 0;var n=false;for(;;){switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case undefined:return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return X(t).length;default:if(n)return G(t).length;e=(""+e).toLowerCase();n=true}}}f.byteLength=m;function b(t,e,r){var n=false;if(e===undefined||e<0){e=0}if(e>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;e>>>=0;if(r<=e){return""}if(!t)t="utf8";while(true){switch(t){case"hex":return M(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return U(this,e,r)
;case"latin1":case"binary":return q(this,e,r);case"base64":return I(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase();n=true}}}f.prototype._isBuffer=true;function E(t,e,r){var n=t[e];t[e]=t[r];t[r]=n}f.prototype.swap16=function t(){var e=this.length;if(e%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<e;r+=2){E(this,r,r+1)}return this};f.prototype.swap32=function t(){var e=this.length;if(e%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<e;r+=4){E(this,r,r+3);E(this,r+1,r+2)}return this};f.prototype.swap64=function t(){var e=this.length;if(e%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<e;r+=8){E(this,r,r+7);E(this,r+1,r+6);E(this,r+2,r+5);E(this,r+3,r+4)}return this};f.prototype.toString=function t(){var e=this.length;if(e===0)return"";if(arguments.length===0)return B(this,0,e);return b.apply(this,arguments)};f.prototype.equals=function t(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(this===e)return true;return f.compare(this,e)===0};f.prototype.inspect=function t(){var e="";var n=r.INSPECT_MAX_BYTES;if(this.length>0){e=this.toString("hex",0,n).match(/.{2}/g).join(" ");if(this.length>n)e+=" ... "}return"<Buffer "+e+">"};f.prototype.compare=function t(e,r,n,i,o){if(!f.isBuffer(e)){throw new TypeError("Argument must be a Buffer")}if(r===undefined){r=0}if(n===undefined){n=e?e.length:0}if(i===undefined){i=0}if(o===undefined){o=this.length}if(r<0||n>e.length||i<0||o>this.length){throw new RangeError("out of range index")}if(i>=o&&r>=n){return 0}if(i>=o){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;i>>>=0;o>>>=0;if(this===e)return 0;var s=o-i;var u=n-r;var a=Math.min(s,u);var c=this.slice(i,o);var l=e.slice(r,n);for(var h=0;h<a;++h){if(c[h]!==l[h]){s=c[h];u=l[h];break}}if(s<u)return-1;if(u<s)return 1;return 0};function O(t,e,r,n,i){if(t.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(Q(r)){r=i?0:t.length-1}if(r<0)r=t.length+r;if(r>=t.length){if(i)return-1;else r=t.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof e==="string"){e=f.from(e,n)}if(f.isBuffer(e)){if(e.length===0){return-1}return A(t,e,r,n,i)}else if(typeof e==="number"){e=e&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(t,e,r)}else{return Uint8Array.prototype.lastIndexOf.call(t,e,r)}}return A(t,[e],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function A(t,e,r,n,i){var o=1;var s=t.length;var u=e.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(t.length<2||e.length<2){return-1}o=2;s/=2;u/=2;r/=2}}function f(t,e){if(o===1){return t[e]}else{return t.readUInt16BE(e*o)}}var a;if(i){var c=-1;for(a=r;a<s;a++){if(f(t,a)===f(e,c===-1?0:a-c)){if(c===-1)c=a;if(a-c+1===u)return c*o}else{if(c!==-1)a-=a-c;c=-1}}}else{if(r+u>s)r=s-u;for(a=r;a>=0;a--){var l=true;for(var h=0;h<u;h++){if(f(t,a+h)!==f(e,h)){l=false;break}}if(l)return a}}return-1}f.prototype.includes=function t(e,r,n){return this.indexOf(e,r,n)!==-1};f.prototype.indexOf=function t(e,r,n){return O(this,e,r,n,true)};f.prototype.lastIndexOf=function t(e,r,n){return O(this,e,r,n,false)};function S(t,e,r,n){r=Number(r)||0;var i=t.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");if(n>o/2){n=o/2}for(var s=0;s<n;++s){var u=parseInt(e.substr(s*2,2),16);if(Q(u))return s;t[r+s]=u}return s}function _(t,e,r,n){return $(G(e,t.length-r),t,r,n)}function R(t,e,r,n){return $(Y(e),t,r,n)}function x(t,e,r,n){return R(t,e,r,n)}function j(t,e,r,n){return $(X(e),t,r,n)}function C(t,e,r,n){return $(J(e,t.length-r),t,r,n)}f.prototype.write=function t(e,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(n)){n=n>>>0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var o=this.length-r;if(n===undefined||n>o)n=o;if(e.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var s=false;for(;;){switch(i){case"hex":return S(this,e,r,n);case"utf8":case"utf-8":return _(this,e,r,n);case"ascii":return R(this,e,r,n);case"latin1":case"binary":return x(this,e,r,n);case"base64":return j(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();s=true}}};f.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(t,e,r){if(e===0&&r===t.length){return n.fromByteArray(t)}else{return n.fromByteArray(t.slice(e,r))}}function B(t,e,r){r=Math.min(t.length,r);var n=[];var i=e;while(i<r){var o=t[i];var s=null;var u=o>239?4:o>223?3:o>191?2:1;if(i+u<=r){var f,a,c,l;switch(u){case 1:if(o<128){s=o}break;case 2:f=t[i+1];if((f&192)===128){l=(o&31)<<6|f&63;if(l>127){s=l}}break;case 3:f=t[i+1];a=t[i+2];if((f&192)===128&&(a&192)===128){l=(o&15)<<12|(f&63)<<6|a&63;if(l>2047&&(l<55296||l>57343)){s=l}}break;case 4:f=t[i+1];a=t[i+2];c=t[i+3];if((f&192)===128&&(a&192)===128&&(c&192)===128){l=(o&15)<<18|(f&63)<<12|(a&63)<<6|c&63;if(l>65535&&l<1114112){s=l}}}}if(s===null){s=65533;u=1}else if(s>65535){s-=65536;n.push(s>>>10&1023|55296);s=56320|s&1023}n.push(s);i+=u}return k(n)}var T=4096;function k(t){var e=t.length;if(e<=T){return String.fromCharCode.apply(String,t)}var r="";var n=0;while(n<e){r+=String.fromCharCode.apply(String,t.slice(n,n+=T))}return r}function U(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i){n+=String.fromCharCode(t[i]&127)}return n}function q(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i){n+=String.fromCharCode(t[i])}return n}function M(t,e,r){var n=t.length;if(!e||e<0)e=0;if(!r||r<0||r>n)r=n;var i="";for(var o=e;o<r;++o){i+=W(t[o])}return i}function L(t,e,r){var n=t.slice(e,r);var i="";for(var o=0;o<n.length;o+=2){i+=String.fromCharCode(n[o]+n[o+1]*256)}return i}f.prototype.slice=function t(e,r){var n=this.length;e=~~e;r=r===undefined?n:~~r;if(e<0){e+=n;if(e<0)e=0}else if(e>n){e=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<e)r=e;var i=this.subarray(e,r);i.__proto__=f.prototype;return i};function P(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUIntLE=function t(e,r,n){e=e>>>0;r=r>>>0;if(!n)P(e,r,this.length);var i=this[e];var o=1;var s=0;while(++s<r&&(o*=256)){i+=this[e+s]*o}return i};f.prototype.readUIntBE=function t(e,r,n){e=e>>>0;r=r>>>0;if(!n){P(e,r,this.length)}var i=this[e+--r];var o=1;while(r>0&&(o*=256)){i+=this[e+--r]*o}return i};f.prototype.readUInt8=function t(e,r){e=e>>>0;if(!r)P(e,1,this.length);return this[e]};f.prototype.readUInt16LE=function t(e,r){e=e>>>0;if(!r)P(e,2,this.length);return this[e]|this[e+1]<<8};f.prototype.readUInt16BE=function t(e,r){e=e>>>0;if(!r)P(e,2,this.length);return this[e]<<8|this[e+1]};f.prototype.readUInt32LE=function t(e,r){e=e>>>0;if(!r)P(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};f.prototype.readUInt32BE=function t(e,r){e=e>>>0;if(!r)P(e,4,this.length);return this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};f.prototype.readIntLE=function t(e,r,n){e=e>>>0;r=r>>>0;if(!n)P(e,r,this.length);var i=this[e];var o=1;var s=0;while(++s<r&&(o*=256)){i+=this[e+s]*o}o*=128;if(i>=o)i-=Math.pow(2,8*r);return i};f.prototype.readIntBE=function t(e,r,n){e=e>>>0;r=r>>>0;if(!n)P(e,r,this.length);var i=r;var o=1;var s=this[e+--i];while(i>0&&(o*=256)){s+=this[e+--i]*o}o*=128;if(s>=o)s-=Math.pow(2,8*r);return s};f.prototype.readInt8=function t(e,r){e=e>>>0;if(!r)P(e,1,this.length);if(!(this[e]&128))return this[e];return(255-this[e]+1)*-1};f.prototype.readInt16LE=function t(e,r){e=e>>>0;if(!r)P(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};f.prototype.readInt16BE=function t(e,r){e=e>>>0;if(!r)P(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};f.prototype.readInt32LE=function t(e,r){e=e>>>0;if(!r)P(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};f.prototype.readInt32BE=function t(e,r){e=e>>>0;if(!r)P(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};f.prototype.readFloatLE=function t(e,r){e=e>>>0;if(!r)P(e,4,this.length);return i.read(this,e,true,23,4)};f.prototype.readFloatBE=function t(e,r){e=e>>>0;if(!r)P(e,4,this.length);return i.read(this,e,false,23,4)};f.prototype.readDoubleLE=function t(e,r){e=e>>>0;if(!r)P(e,8,this.length);return i.read(this,e,true,52,8)};f.prototype.readDoubleBE=function t(e,r){e=e>>>0;if(!r)P(e,8,this.length);return i.read(this,e,false,52,8)};function N(t,e,r,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}f.prototype.writeUIntLE=function t(e,r,n,i){e=+e;r=r>>>0;n=n>>>0;if(!i){var o=Math.pow(2,8*n)-1;N(this,e,r,n,o,0)}var s=1;var u=0;this[r]=e&255;while(++u<n&&(s*=256)){this[r+u]=e/s&255}return r+n};f.prototype.writeUIntBE=function t(e,r,n,i){e=+e;r=r>>>0;n=n>>>0;if(!i){var o=Math.pow(2,8*n)-1;N(this,e,r,n,o,0)}var s=n-1;var u=1;this[r+s]=e&255;while(--s>=0&&(u*=256)){this[r+s]=e/u&255}return r+n};f.prototype.writeUInt8=function t(e,r,n){e=+e;r=r>>>0;if(!n)N(this,e,r,1,255,0);this[r]=e&255;return r+1};f.prototype.writeUInt16LE=function t(e,r,n){e=+e;r=r>>>0;if(!n)N(this,e,r,2,65535,0);this[r]=e&255;this[r+1]=e>>>8;return r+2};f.prototype.writeUInt16BE=function t(e,r,n){e=+e;r=r>>>0;if(!n)N(this,e,r,2,65535,0);this[r]=e>>>8;this[r+1]=e&255;return r+2};f.prototype.writeUInt32LE=function t(e,r,n){e=+e;r=r>>>0;if(!n)N(this,e,r,4,4294967295,0);this[r+3]=e>>>24;this[r+2]=e>>>16;this[r+1]=e>>>8;this[r]=e&255;return r+4};f.prototype.writeUInt32BE=function t(e,r,n){e=+e;r=r>>>0;if(!n)N(this,e,r,4,4294967295,0);this[r]=e>>>24;this[r+1]=e>>>16;this[r+2]=e>>>8;this[r+3]=e&255;return r+4};f.prototype.writeIntLE=function t(e,r,n,i){e=+e;r=r>>>0;if(!i){var o=Math.pow(2,8*n-1);N(this,e,r,n,o-1,-o)}var s=0;var u=1;var f=0;this[r]=e&255;while(++s<n&&(u*=256)){if(e<0&&f===0&&this[r+s-1]!==0){f=1}this[r+s]=(e/u>>0)-f&255}return r+n};f.prototype.writeIntBE=function t(e,r,n,i){e=+e;r=r>>>0;if(!i){var o=Math.pow(2,8*n-1);N(this,e,r,n,o-1,-o)}var s=n-1;var u=1;var f=0;this[r+s]=e&255;while(--s>=0&&(u*=256)){if(e<0&&f===0&&this[r+s+1]!==0){f=1}this[r+s]=(e/u>>0)-f&255}return r+n};f.prototype.writeInt8=function t(e,r,n){e=+e;r=r>>>0;if(!n)N(this,e,r,1,127,-128);if(e<0)e=255+e+1;this[r]=e&255;return r+1};f.prototype.writeInt16LE=function t(e,r,n){e=+e;r=r>>>0;if(!n)N(this,e,r,2,32767,-32768);this[r]=e&255;this[r+1]=e>>>8;return r+2};f.prototype.writeInt16BE=function t(e,r,n){e=+e;r=r>>>0;if(!n)N(this,e,r,2,32767,-32768);this[r]=e>>>8;this[r+1]=e&255;return r+2};f.prototype.writeInt32LE=function t(e,r,n){e=+e;r=r>>>0;if(!n)N(this,e,r,4,2147483647,-2147483648);this[r]=e&255;this[r+1]=e>>>8;this[r+2]=e>>>16;this[r+3]=e>>>24;return r+4};f.prototype.writeInt32BE=function t(e,r,n){e=+e;r=r>>>0;if(!n)N(this,e,r,4,2147483647,-2147483648);if(e<0)e=4294967295+e+1;this[r]=e>>>24;this[r+1]=e>>>16;this[r+2]=e>>>8;this[r+3]=e&255;return r+4};function F(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(t,e,r,n,o){e=+e;r=r>>>0;if(!o){F(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38)}i.write(t,e,r,n,23,4);return r+4}f.prototype.writeFloatLE=function t(e,r,n){return D(this,e,r,true,n)};f.prototype.writeFloatBE=function t(e,r,n){return D(this,e,r,false,n)};function z(t,e,r,n,o){e=+e;r=r>>>0;if(!o){F(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308)}i.write(t,e,r,n,52,8);return r+8}f.prototype.writeDoubleLE=function t(e,r,n){return z(this,e,r,true,n)};f.prototype.writeDoubleBE=function t(e,r,n){return z(this,e,r,false,n)};f.prototype.copy=function t(e,r,n,i){if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=e.length)r=e.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(e.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(e.length-r<i-n){i=e.length-r+n}var o=i-n;var s;if(this===e&&n<r&&r<i){for(s=o-1;s>=0;--s){e[s+r]=this[s+n]}}else if(o<1e3){for(s=0;s<o;++s){e[s+r]=this[s+n]}}else{Uint8Array.prototype.set.call(e,this.subarray(n,n+o),r)}return o};f.prototype.fill=function t(e,r,n,i){if(typeof e==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(e.length===1){var o=e.charCodeAt(0);if(o<256){e=o}}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!f.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}}else if(typeof e==="number"){e=e&255}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!e)e=0;var s;if(typeof e==="number"){for(s=r;s<n;++s){this[s]=e}}else{var u=f.isBuffer(e)?e:new f(e,i);var a=u.length;for(s=0;s<n-r;++s){this[s+r]=u[s%a]}}return this};var H=/[^+\/0-9A-Za-z-_]/g;function V(t){t=t.trim().replace(H,"");if(t.length<2)return"";while(t.length%4!==0){t=t+"="}return t}function W(t){if(t<16)return"0"+t.toString(16);return t.toString(16)}function G(t,e){e=e||Infinity;var r;var n=t.length;var i=null;var o=[];for(var s=0;s<n;++s){r=t.charCodeAt(s);if(r>55295&&r<57344){if(!i){if(r>56319){if((e-=3)>-1)o.push(239,191,189);continue}else if(s+1===n){if((e-=3)>-1)o.push(239,191,189);continue}i=r;continue}if(r<56320){if((e-=3)>-1)o.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((e-=3)>-1)o.push(239,191,189)}i=null;if(r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return o}function Y(t){var e=[];for(var r=0;r<t.length;++r){e.push(t.charCodeAt(r)&255)}return e}function J(t,e){var r,n,i;var o=[];for(var s=0;s<t.length;++s){if((e-=2)<0)break;r=t.charCodeAt(s);n=r>>8;i=r%256;o.push(i);o.push(n)}return o}function X(t){return n.toByteArray(V(t))}function $(t,e,r,n){for(var i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function Z(t){return t instanceof ArrayBuffer||t!=null&&t.constructor!=null&&t.constructor.name==="ArrayBuffer"&&typeof t.byteLength==="number"}function K(t){return typeof ArrayBuffer.isView==="function"&&ArrayBuffer.isView(t)}function Q(t){return t!==t}},{"base64-js":22,ieee754:28}],24:[function(t,e,r){(function(t){var r=function(){"use strict";function e(r,n,i,o){var u;if(typeof n==="object"){i=n.depth;o=n.prototype;u=n.filter;n=n.circular}var f=[];var a=[];var c=typeof t!="undefined";if(typeof n=="undefined")n=true;if(typeof i=="undefined")i=Infinity;function l(r,i){if(r===null)return null;if(i==0)return r;var u;var h;if(typeof r!="object"){return r}if(e.__isArray(r)){u=[]}else if(e.__isRegExp(r)){u=new RegExp(r.source,s(r));if(r.lastIndex)u.lastIndex=r.lastIndex}else if(e.__isDate(r)){u=new Date(r.getTime())}else if(c&&t.isBuffer(r)){u=new t(r.length);r.copy(u);return u}else{if(typeof o=="undefined"){h=Object.getPrototypeOf(r);u=Object.create(h)}else{u=Object.create(o);h=o}}if(n){var p=f.indexOf(r);if(p!=-1){return a[p]}f.push(r);a.push(u)}for(var v in r){var y;if(h){y=Object.getOwnPropertyDescriptor(h,v)}if(y&&y.set==null){continue}u[v]=l(r[v],i-1)}return u}return l(r,i)}e.clonePrototype=function t(e){if(e===null)return null;var r=function(){};r.prototype=e;return new r};function r(t){return Object.prototype.toString.call(t)}e.__objToStr=r;function n(t){return typeof t==="object"&&r(t)==="[object Date]"}e.__isDate=n;function i(t){return typeof t==="object"&&r(t)==="[object Array]"}e.__isArray=i;function o(t){return typeof t==="object"&&r(t)==="[object RegExp]"}e.__isRegExp=o;function s(t){var e="";if(t.global)e+="g";if(t.ignoreCase)e+="i";if(t.multiline)e+="m";return e}e.__getRegExpFlags=s;return e}();if(typeof e==="object"&&e.exports){e.exports=r}}).call(this,t("buffer").Buffer)},{buffer:23}],25:[function(t,e,r){(function(){"use strict";function e(){if(typeof console==="undefined"){throw new Error("Weird, console object is undefined")}if(typeof console.table==="function"){if(console.table===h){return}}function e(t,e){return typeof e===t}var r=e.bind(null,"string");function n(t,e){return Array.isArray(e)&&e.every(t)}var i=n.bind(null,r);var o=n.bind(null,Array.isArray);var s=t("easy-table");function u(t){var e=new s;t.forEach(function(t){if(typeof t==="string"||typeof t==="number"){e.cell("item",t)}else{Object.keys(t).forEach(function(r){e.cell(r,t[r])})}e.newRow()});return e.toString()}function f(t,e){var r=new s;e.forEach(function(e){e.forEach(function(e,n){r.cell(t[n],e)});r.newRow()});var n=r.toString();console.log(n)}function a(t,e){var r=u(e);var n=r.indexOf("\n");if(n>0){if(t.length>n){n=t.length}console.log(t);var i="-",o,s="";for(o=0;o<n;o+=1){s+=i}console.log(s)}console.log(r)}function c(t){var e=Object.keys(t);return e.map(function(e){return{key:e,value:t[e]}})}function l(t){return u(c(t))}function h(){var t=Array.prototype.slice.call(arguments);if(t.length===2&&typeof t[0]==="string"&&Array.isArray(t[1])){return a(t[0],t[1])}if(t.length===2&&i(t[0])&&o(t[1])){return f(t[0],t[1])}t.forEach(function(t){if(typeof t==="string"){return console.log(t)}else if(Array.isArray(t)){console.log(u(t))}else if(typeof t==="object"){console.log(l(t))}})}console.table=h}e()})()},{"easy-table":27}],26:[function(t,e,r){var n=t("clone");e.exports=function(t,e){t=t||{};Object.keys(e).forEach(function(r){if(typeof t[r]==="undefined"){t[r]=n(e[r])}});return t}},{clone:24}],27:[function(t,e,r){var n;try{n=t("wcwidth")}catch(t){}e.exports=i;function i(){this.rows=[];this.row={__printers:{}}}i.prototype.newRow=function(){this.rows.push(this.row);this.row={__printers:{}};return this};i.prototype.cell=function(t,e,r){this.row[t]=e;this.row.__printers[t]=r||o;return this};i.prototype.separator="  ";function o(t){return t===undefined?"":""+t}function s(t){var e=t.replace(/\u001b\[\d+m/g,"");return n==null?e.length:n(e)}i.string=o;i.leftPadder=u;function u(t){return function(e,r){var n=o(e);var i=s(n);var u=r>i?Array(r-i+1).join(t):"";return u+n}}var f=i.padLeft=u(" ");i.rightPadder=a;function a(t){return function e(r,n){var i=o(r);var u=s(i);var f=n>u?Array(n-u+1).join(t):"";return i+f}}var c=a(" ");i.number=function(t){return function(e,r){if(e==null)return"";if(typeof e!="number")throw new Error(""+e+" is not a number");var n=t==null?e+"":e.toFixed(t);return f(n,r)}};function l(t,e){for(var r in t){if(r=="__printers")continue;e(r,t[r])}}i.prototype.columns=function(){var t={};for(var e=0;e<2;e++){this.rows.forEach(function(e){var r=0;l(e,function(e){r=Math.max(r,t[e]||0);t[e]=r;r++})})}return Object.keys(t).sort(function(e,r){return t[e]-t[r]})};i.prototype.print=function(){var t=this.columns();var e=this.separator;var r={};var n="";this.rows.forEach(function(t){l(t,function(e,n){var i=t.__printers[e].call(t,n);r[e]=Math.max(s(i),r[e]||0)})});this.rows.forEach(function(i){var o="";t.forEach(function(t){var n=r[t];var s=i.hasOwnProperty(t)?""+i.__printers[t].call(i,i[t],n):"";o+=c(s,n)+e});o=o.slice(0,-e.length);n+=o+"\n"});return n};i.prototype.toString=function(){var t=this.columns();var e=new i;e.separator=this.separator;t.forEach(function(t){e.cell(t,t)});e.newRow();e.pushDelimeter(t);e.rows=e.rows.concat(this.rows);if(this.totals&&this.rows.length){e.pushDelimeter(t);this.forEachTotal(e.cell.bind(e));e.newRow()}return e.print()};i.prototype.pushDelimeter=function(t){t=t||this.columns();t.forEach(function(t){this.cell(t,undefined,u("-"))},this);return this.newRow()};i.prototype.forEachTotal=function(t){for(var e in this.totals){var r=this.totals[e];var n=r.init;var i=this.rows.length;this.rows.forEach(function(t,o){n=r.reduce.call(t,n,t[e],o,i)});t(e,n,r.printer)}};i.prototype.printTransposed=function(t){t=t||{};var e=new i;e.separator=t.separator||this.separator;this.columns().forEach(function(r){e.cell(0,r,t.namePrinter);this.rows.forEach(function(t,n){e.cell(n+1,t[r],t.__printers[r])});e.newRow()},this);return e.print()};i.prototype.sort=function(t){if(typeof t=="function"){this.rows.sort(t);return this}var e=Array.isArray(t)?t:this.columns();var r=e.map(function(t){var e="asc";var r=/(.*)\|\s*(asc|des)\s*$/.exec(t);if(r){t=r[1];e=r[2]}return function(r,n){return e=="asc"?h(r[t],n[t]):h(n[t],r[t])}});return this.sort(function(t,e){for(var n=0;n<r.length;n++){var i=r[n](t,e);if(i!=0)return i}return 0})};function h(t,e){if(t===e)return 0;if(t===undefined)return 1;if(e===undefined)return-1;if(t===null)return 1;if(e===null)return-1;if(t>e)return 1;if(t<e)return-1;return h(String(t),String(e))}i.prototype.total=function(t,e){e=e||{};this.totals=this.totals||{};this.totals[t]={reduce:e.reduce||i.aggr.sum,printer:e.printer||f,init:e.init==null?0:e.init};return this};i.aggr={};i.aggr.printer=function(t,e){e=e||o;return function(r,n){return f(t+e(r),n)}};i.aggr.sum=function(t,e){return t+e};i.aggr.avg=function(t,e,r,n){t=t+e;return r+1==n?t/n:t};i.print=function(t,e,r){var n=e||{};e=typeof e=="function"?e:function(t,e){for(var r in t){if(!t.hasOwnProperty(r))continue;var i=n[r]||{};e(i.name||r,t[r],i.printer)}};var o=new i;var s=o.cell.bind(o);if(Array.isArray(t)){r=r||function(t){return t.toString()};t.forEach(function(t){e(t,s);o.newRow()})}else{r=r||function(t){return t.printTransposed({separator:" : "})};e(t,s);o.newRow()}return r(o)};i.log=function(t,e,r){console.log(i.print(t,e,r))};i.prototype.log=function(){console.log(this.toString())}},{wcwidth:33}],28:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s;var u=i*8-n-1;var f=(1<<u)-1;var a=f>>1;var c=-7;var l=r?i-1:0;var h=r?-1:1;var p=t[e+l];l+=h;o=p&(1<<-c)-1;p>>=-c;c+=u;for(;c>0;o=o*256+t[e+l],l+=h,c-=8){}s=o&(1<<-c)-1;o>>=-c;c+=n;for(;c>0;s=s*256+t[e+l],l+=h,c-=8){}if(o===0){o=1-a}else if(o===f){return s?NaN:(p?-1:1)*Infinity}else{s=s+Math.pow(2,n);o=o-a}return(p?-1:1)*s*Math.pow(2,o-n)};r.write=function(t,e,r,n,i,o){var s,u,f;var a=o*8-i-1;var c=(1<<a)-1;var l=c>>1;var h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var p=n?0:o-1;var v=n?1:-1;var y=e<0||e===0&&1/e<0?1:0;e=Math.abs(e);if(isNaN(e)||e===Infinity){u=isNaN(e)?1:0;s=c}else{s=Math.floor(Math.log(e)/Math.LN2);if(e*(f=Math.pow(2,-s))<1){s--;f*=2}if(s+l>=1){e+=h/f}else{e+=h*Math.pow(2,1-l)}if(e*f>=2){s++;f/=2}if(s+l>=c){u=0;s=c}else if(s+l>=1){u=(e*f-1)*Math.pow(2,i);s=s+l}else{u=e*Math.pow(2,l-1)*Math.pow(2,i);s=0}}for(;i>=8;t[r+p]=u&255,p+=v,u/=256,i-=8){}s=s<<i|u;a+=i;for(;a>0;t[r+p]=s&255,p+=v,s/=256,a-=8){}t[r+p-v]|=y*128}},{}],29:[function(e,r,n){(function(e,i){if(typeof t==="function"&&t.amd){t(["exports"],i)}else if(typeof n==="object"){i(n);if(typeof r==="object"&&r!==null){r.exports=n.Event}}else{i(e.lil=e.lil||{})}})(this,function(t){"use strict";var e="0.1.3";var r=Array.prototype.slice;var n=Object.prototype.hasOwnProperty;function i(){}i.prototype.constructor=i;i.prototype.addListener=i.prototype.on=function(t,e,r){if(typeof t!=="string")throw new TypeError("First argument must be a string");if(typeof e!=="function")throw new TypeError("Second argument must be a function");if(!o.call(this,t,e)){s.call(this,t).push({fn:e,once:r||false})}return this};i.prototype.removeListener=i.prototype.off=function(t,e){var r;var n=s.call(this,t);var i=o.call(this,t,e);if(i){r=n.indexOf(i);if(r>=0)n.splice(r,1)}return this};i.prototype.addOnceListener=i.prototype.once=function(t,e,r){this.addListener(t,e,true);return this};i.prototype.emit=i.prototype.fire=function(t){var e,n,i,o=r.call(arguments).slice(1);var u=s.call(this,t);if(t){for(e=0,n=u.length;e<n;e+=1){i=u[e];if(i.once)u.splice(e,1);i.fn.apply(null,o)}}return this};i.prototype.removeAllListeners=i.prototype.offAll=function(t){if(t&&n.call(this._events,t)){this._events[t].splice(0)}return this};function o(t,e){var r,n,i,o=s.call(this,t);for(r=0,n=o.length;r<n;r+=1){i=o[r];if(i.fn===e)return i}}function s(t,e){var r=u.call(this);return n.call(r,t)?r[t]:r[t]=[]}function u(){return this._events||(this._events={})}i.VERSION=e;t.Event=i})},{}],30:[function(e,r,n){(function(e,i){if(typeof t==="function"&&t.amd){t(["exports"],i)}else if(typeof n==="object"){i(n);if(typeof r==="object"&&r!==null){r.exports=n=n.http}}else{i(e.lil=e.lil||{})}})(this,function(t){"use strict";var e="0.1.17";var r=Object.prototype.toString;var n=Array.prototype.slice;var i=Object.prototype.hasOwnProperty;var o=typeof Function.prototype.bind==="function";var s=location.origin;var u=/^(http[s]?:\/\/[a-z0-9\-\.\:]+)[\/]?/i;var f=/application\/json/;var a=typeof XDomainRequest!=="undefined";var c=function(){};var l={method:"GET",timeout:30*1e3,auth:null,data:null,headers:null,withCredentials:false,responseType:"text"};function h(t){return t&&r.call(t)==="[object Object]"||false}function p(t){var e,r,o,s,u=n.call(arguments).slice(1);for(e=0,r=u.length;e<r;e+=1){s=u[e];for(o in s)if(i.call(s,o))t[o]=s[o]}return t}function v(t){var e=false;return function(){if(e===false){e=true;t.apply(null,arguments)}}}function y(t,e){if(!h(e))return;e["Content-Type"]=e["Content-Type"]||e["content-type"]||L.defaultContent;var r=Object.keys(e).reduce(function(t,r){var n=r.toLowerCase();if(n!==r){if(i.call(e,n)){delete e[n];delete t[n]}}t[r]=e[r];return t},{});Object.keys(r).forEach(function(e){t.setRequestHeader(e,r[e])})}function d(t){var e={},r=t.getAllResponseHeaders().trim().split("\n");r.forEach(function(t){var r=t.trim().split(":");var n=r.shift().trim();var i=r.join(":").trim();e[n]=i});return e}function g(t){return f.test(t.getResponseHeader("Content-Type"))}function w(t){return Object.getOwnPropertyNames(t).filter(function(e){return t[e]!==undefined}).map(function(e){var r=t[e]===null?"":t[e];return encodeURIComponent(e)+(r?"="+encodeURIComponent(r):"")}).join("&").replace(/%20/g,"+")}function m(t){var e=null;if(t.responseType==="text"){e=t.responseText;if(g(t)&&e)e=JSON.parse(e)}else{e=t.response}return e}function b(t){return t===1223?204:t}function E(t){var e={xhr:t,status:b(t.status),statusText:t.statusText,data:null,headers:{}};if(t.readyState===4){e.data=m(t);e.headers=d(t)}return e}function O(t,e){var r=E(t);r.error=e;if(e.stack)r.stack=e.stack;return r}function A(t){t.onreadystatechange=t.onerror=t.ontimeout=null}function S(t){var e=b(t.status);return e>=200&&e<300||e===304}function _(t,e){return v(function(r){e(O(t,r),null)})}function R(t,e,r){return function(t){if(e.readyState===4){A(e);if(S(e)){r(null,E(e))}else{_(e,r)(t)}}}}function x(t){var e=t.match(u);return e&&e[1]===s}function j(t){var e=t.url;if(h(t.params)){e+=(e.indexOf("?")===-1?"?":"&")+w(t.params)}return e}function C(t){if(a&&x(t)){return new XDomainRequest}else{return new XMLHttpRequest}}function I(t){var e=(t.method||"GET").toUpperCase();var r=t.auth;var n=j(t);if(!n||typeof n!=="string"){throw new TypeError("Missing required request URL")}var i=C(n);if(r){i.open(e,n,true,r.user,r.password)}else{i.open(e,n)}i.withCredentials=t.withCredentials;i.responseType=t.responseType;i.timeout=t.timeout;y(i,t.headers);return i}function B(t,e){return function(t){if(t.lengthComputable){e(t,t.loaded/t.total)}else{e(t)}}}function T(t){return t&&h(t.headers)&&(t.headers["content-type"]||t.headers["Content-Type"])||false}function k(t,e){var r=e.data;if(h(e.data)||Array.isArray(e.data)){if(T(e)===false){t.setRequestHeader("Content-Type","application/json")}r=JSON.stringify(e.data)}return r}function U(t,e){return function(){clearTimeout(e);t.apply(null,arguments)}}function q(t,e,r){var n=I(t);var i=k(n,t);var s=_(n,e);if(o){n.ontimeout=s}else{var u=setTimeout(function t(){if(n.readyState!==4){n.abort()}},t.timeout);e=U(e,u);s=_(n,e)}n.onreadystatechange=R(t,n,e);n.onerror=s;if(typeof r==="function"){n.onprogress=B(n,r)}try{n.send(i||null)}catch(t){s(t)}return{xhr:n,config:t}}function M(t){return function(e,r,i,o){var s,u,f=null;var a=p({},l,{method:t});var v=n.call(arguments);for(s=0,u=v.length;s<u;s+=1){f=v[s];if(typeof f==="function"){if(v.length===s+1&&typeof v[s-1]==="function"){o=f}else{i=f}}else if(h(f)){p(a,f)}else if(typeof f==="string"&&!a.url){a.url=f}}return q(a,i||c,o)}}function L(t,e,r,n){return M("GET").apply(null,arguments)}L.VERSION=e;L.defaults=l;L.defaultContent="text/plain";L.get=M("GET");L.post=M("POST");L.put=M("PUT");L.patch=M("PATCH");L.head=M("HEAD");L.delete=L.del=M("DELETE");return t.http=L})},{}],31:[function(e,r,n){(function(e,i){if(typeof t==="function"&&t.amd){t(["exports"],i)}else if(typeof n==="object"){i(n);if(typeof r==="object"&&r!==null){r.exports=n=n.midware}}else{i(e)}})(this,function(t){"use strict";function e(t){var e=n.stack=[];t=t||null;function n(){r(arguments).filter(function(t){return typeof t==="function"}).forEach(function(t){e.push(t)});return t}n.run=function n(){var i,o=r(arguments);if(typeof o[o.length-1]==="function"){i=o.pop()}if(!e.length){if(i)i.call(t);return}var s=e.slice();o.push(f);function u(){var e=s.shift();e.apply(t,o)}function f(e,r){if(e||r||!s.length){s=null;if(i)i.call(t,e,r)}else{u()}}u()};n.remove=function(t){for(var r=0,n=e.length;r<n;r+=1){var i=e[r];if(i===t||i.name===t){e.splice(r,1);break}}};n.flush=function(){e.splice(0)};return n}function r(t){var e=new Array(t.length);for(var r=0,n=e.length;r<n;r+=1){e[r]=t[r]}return e}e.VERSION="0.1.7";t.midware=e})},{}],32:[function(t,e,r){e.exports=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]]},{}],33:[function(t,e,r){"use strict";var n=t("defaults");var i=t("./combining");var o={nul:0,control:0};e.exports=function t(e){return s(e,o)
};e.exports.config=function(t){t=n(t||{},o);return function e(r){return s(r,t)}};function s(t,e){if(typeof t!=="string")return u(t,e);var r=0;for(var n=0;n<t.length;n++){var i=u(t.charCodeAt(n),e);if(i<0)return-1;r+=i}return r}function u(t,e){if(t===0)return e.nul;if(t<32||t>=127&&t<160)return e.control;if(f(t))return 0;return 1+(t>=4352&&(t<=4447||t==9001||t==9002||t>=11904&&t<=42191&&t!=12351||t>=44032&&t<=55203||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65135||t>=65280&&t<=65376||t>=65504&&t<=65510||t>=131072&&t<=196605||t>=196608&&t<=262141))}function f(t){var e=0;var r=i.length-1;var n;if(t<i[0][0]||t>i[r][1])return false;while(r>=e){n=Math.floor((e+r)/2);if(t>i[n][1])e=n+1;else if(t<i[n][0])r=n-1;else return true}return false}},{"./combining":32,defaults:26}]},{},[8])(8)});
//# sourceMappingURL=http://cdn.rawgit.com/resilient-http/resilient.js/0.4.0/resilient.min.js.map
